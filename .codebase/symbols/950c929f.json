{
  "file_path": "/work/external-deps/Context-Engine/tests/test_logger_utils.py",
  "file_hash": "635506879bee0da77d64545e50b5ff3bd9197aea",
  "updated_at": "2025-12-26T17:34:24.501165",
  "symbols": {
    "function_test_safe_converters_default_on_invalid_input_8": {
      "name": "test_safe_converters_default_on_invalid_input",
      "type": "function",
      "start_line": 8,
      "end_line": 19,
      "content_hash": "0d542aeee820a667c987fefa3906f07bd8716d24",
      "content": "def test_safe_converters_default_on_invalid_input():\n    log = logging.getLogger(\"test.logger\")\n\n    assert logger_mod.safe_int(\"\", 42, logger=log, context=\"int_field\") == 42\n    assert logger_mod.safe_int(\"17\", 0) == 17\n\n    assert logger_mod.safe_float(\"abc\", 3.14, logger=log, context=\"float_field\") == 3.14\n    assert logger_mod.safe_float(\"2.5\", 0.0) == 2.5\n\n    assert logger_mod.safe_bool(\"yes\", False) is True\n    assert logger_mod.safe_bool(\"NO\", True) is False\n    assert logger_mod.safe_bool(\"maybe\", True, logger=log, context=\"bool_field\") is True",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_test_context_logger_injects_extra_fields_22": {
      "name": "test_context_logger_injects_extra_fields",
      "type": "function",
      "start_line": 22,
      "end_line": 34,
      "content_hash": "03132ae7ddd6d4be2a3012211ec25d66bf8a4a33",
      "content": "def test_context_logger_injects_extra_fields(caplog):\n    base_logger = logger_mod.get_logger(\"context-engine-test\", json_format=False)\n    contextual = logger_mod.ContextLogger(base_logger, stage=\"test\", request_id=\"abc123\")\n\n    with caplog.at_level(logging.INFO, logger=\"context-engine-test\"):\n        contextual.info(\"hello\", answer=\"ok\")\n\n    assert any(\"hello\" in message for message in caplog.messages)\n    # Ensure contextual fields are preserved\n    record = caplog.records[-1]\n    assert getattr(record, \"extra_fields\", {}).get(\"stage\") == \"test\"\n    assert getattr(record, \"extra_fields\", {}).get(\"request_id\") == \"abc123\"\n    assert getattr(record, \"extra_fields\", {}).get(\"answer\") == \"ok\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}