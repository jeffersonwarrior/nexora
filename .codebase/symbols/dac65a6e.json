{
  "file_path": "/work/internal/tui/exp/diffview/split.go",
  "file_hash": "11f77aa323b645345d63f7ad417f80ce3e8158bc",
  "updated_at": "2025-12-26T17:34:20.516840",
  "symbols": {
    "struct_splitHunk_10": {
      "name": "splitHunk",
      "type": "struct",
      "start_line": 10,
      "end_line": 15,
      "content_hash": "2829aa85de0bf1e89a5bcfe7959ccb8509d4965e",
      "content": "type splitHunk struct {\n\tfromLine int\n\ttoLine   int\n\tlines    []*splitLine\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_splitLine_16": {
      "name": "splitLine",
      "type": "struct",
      "start_line": 16,
      "end_line": 20,
      "content_hash": "78b7746e88a8c6867f2705c751d19447315d181b",
      "content": "type splitLine struct {\n\tbefore *udiff.Line\n\tafter  *udiff.Line\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_hunkToSplit_21": {
      "name": "hunkToSplit",
      "type": "function",
      "start_line": 21,
      "end_line": 73,
      "content_hash": "6fb7bb9cc37728fc96f1312dd2d3f4098f6e795b",
      "content": "func hunkToSplit(h *udiff.Hunk) (sh splitHunk) {\n\tlines := slices.Clone(h.Lines)\n\tsh = splitHunk{\n\t\tfromLine: h.FromLine,\n\t\ttoLine:   h.ToLine,\n\t\tlines:    make([]*splitLine, 0, len(lines)),\n\t}\n\n\tfor {\n\t\tvar ul udiff.Line\n\t\tvar ok bool\n\t\tul, lines, ok = slice.Shift(lines)\n\t\tif !ok {\n\t\t\tbreak\n\t\t}\n\n\t\tvar sl splitLine\n\n\t\tswitch ul.Kind {\n\t\t// For equal lines, add as is\n\t\tcase udiff.Equal:\n\t\t\tsl.before = &ul\n\t\t\tsl.after = &ul\n\n\t\t// For inserted lines, set after and keep before as nil\n\t\tcase udiff.Insert:\n\t\t\tsl.before = nil\n\t\t\tsl.after = &ul\n\n\t\t// For deleted lines, set before and loop over the next lines\n\t\t// searching for the equivalent after line.\n\t\tcase udiff.Delete:\n\t\t\tsl.before = &ul\n\n\t\tinner:\n\t\t\tfor i, l := range lines {\n\t\t\t\tswitch l.Kind {\n\t\t\t\tcase udiff.Insert:\n\t\t\t\t\tvar ll udiff.Line\n\t\t\t\t\tll, lines, _ = slice.DeleteAt(lines, i)\n\t\t\t\t\tsl.after = &ll\n\t\t\t\t\tbreak inner\n\t\t\t\tcase udiff.Equal:\n\t\t\t\t\tbreak inner\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsh.lines = append(sh.lines, &sl)\n\t}\n\n\treturn sh\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}