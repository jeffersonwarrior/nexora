{
  "file_path": "/work/.github/workflows/schema-update.yml",
  "file_hash": "5efa91645fd42402e0f9b146bf525d47bfa1f688",
  "updated_at": "2025-12-26T17:34:20.170585",
  "symbols": {
    "key_name_1": {
      "name": "name",
      "type": "key",
      "start_line": 1,
      "end_line": 1,
      "content_hash": "2cf0d3e5f8944a62fa2b25b8b8e990d705e2b3e2",
      "content": "name: Update Schema",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on_3": {
      "name": "on",
      "type": "key",
      "start_line": 3,
      "end_line": 8,
      "content_hash": "6e64907e79d7b01fbda62a52d434fbe4e1239bd2",
      "content": "on:\n  push:\n    branches: [main]\n    paths:\n      - \"internal/config/**\"\n  workflow_dispatch:  # Allow manual triggering",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.push_4": {
      "name": "on.push",
      "type": "key",
      "start_line": 4,
      "end_line": 7,
      "content_hash": "156f00142b5f52e36d9da2afbf4c6de85390dfd9",
      "content": "  push:\n    branches: [main]\n    paths:\n      - \"internal/config/**\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.push.branches_5": {
      "name": "on.push.branches",
      "type": "key",
      "start_line": 5,
      "end_line": 5,
      "content_hash": "139f6f36def1eeee739cd1e34a3a061ceae18156",
      "content": "    branches: [main]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.push.paths_6": {
      "name": "on.push.paths",
      "type": "key",
      "start_line": 6,
      "end_line": 7,
      "content_hash": "7fd8d191a22bf4822f79620d18cdb2ba198b6d1f",
      "content": "    paths:\n      - \"internal/config/**\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.workflow_dispatch_8": {
      "name": "on.workflow_dispatch",
      "type": "key",
      "start_line": 8,
      "end_line": 8,
      "content_hash": "9db02ac9a033a346358eba170b6572940073bd63",
      "content": "  workflow_dispatch:  # Allow manual triggering",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs_10": {
      "name": "jobs",
      "type": "key",
      "start_line": 10,
      "end_line": 69,
      "content_hash": "bef9d108354b95074d9eb91d74c81933b3f640fc",
      "content": "jobs:\n  update-schema:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'  # Only run on main branch\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          token: ${{ secrets.PERSONAL_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}\n          fetch-depth: 0  # Fetch full history for proper commits\n      - uses: actions/setup-go@v5\n        with:\n          go-version-file: go.mod\n      - name: Generate schema with auto-fix\n        run: |\n          echo \"\ud83d\udd0d Generating schema...\"\n          \n          # Try to generate schema with error handling\n          set +e\n          SCHEMA_OUTPUT=$(go run . schema 2>&1)\n          SCHEMA_EXIT_CODE=$?\n          \n          if [ $SCHEMA_EXIT_CODE -ne 0 ]; then\n            echo \"\ud83d\udca5 Schema generation failed, attempting auto-fixes...\"\n            echo \"$SCHEMA_OUTPUT\"\n            \n            # Try common fixes for schema generation issues\n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"cannot find\"; then\n              echo \"\ud83d\udd27 Tidying modules...\"\n              go mod tidy\n              go mod download\n            fi\n            \n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"build constraints\"; then\n              echo \"\ud83d\udd27 Fixing build constraints...\"\n              go mod tidy\n            fi\n            \n            # Retry schema generation\n            echo \"\ud83d\udd04 Retrying schema generation...\"\n            go run . schema > ./schema.json 2>/dev/null || {\n              echo \"\u274c Schema generation still failed after auto-fixes\"\n              exit 1\n            }\n          else\n            echo \"$SCHEMA_OUTPUT\" > ./schema.json\n          fi\n          \n          git config user.name \"Charm\"\n          git config user.email \"124303983+charmcli@users.noreply.github.com\"\n          \n          echo \"\u2705 Schema generated successfully\"\n      - uses: stefanzweifel/git-auto-commit-action@v5\n        with:\n          commit_message: \"chore: auto-update generated files\"\n          branch: main\n          commit_user_name: Charm\n          commit_user_email: 124303983+charmcli@users.noreply.github.com\n          commit_author: Charm <124303983+charmcli@users.noreply.github.com>\n          create_branch: false\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema_11": {
      "name": "jobs.update-schema",
      "type": "key",
      "start_line": 11,
      "end_line": 69,
      "content_hash": "ad41e915661fe09cdb3e1d60a2665c513a4519f5",
      "content": "  update-schema:\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'  # Only run on main branch\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          token: ${{ secrets.PERSONAL_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}\n          fetch-depth: 0  # Fetch full history for proper commits\n      - uses: actions/setup-go@v5\n        with:\n          go-version-file: go.mod\n      - name: Generate schema with auto-fix\n        run: |\n          echo \"\ud83d\udd0d Generating schema...\"\n          \n          # Try to generate schema with error handling\n          set +e\n          SCHEMA_OUTPUT=$(go run . schema 2>&1)\n          SCHEMA_EXIT_CODE=$?\n          \n          if [ $SCHEMA_EXIT_CODE -ne 0 ]; then\n            echo \"\ud83d\udca5 Schema generation failed, attempting auto-fixes...\"\n            echo \"$SCHEMA_OUTPUT\"\n            \n            # Try common fixes for schema generation issues\n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"cannot find\"; then\n              echo \"\ud83d\udd27 Tidying modules...\"\n              go mod tidy\n              go mod download\n            fi\n            \n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"build constraints\"; then\n              echo \"\ud83d\udd27 Fixing build constraints...\"\n              go mod tidy\n            fi\n            \n            # Retry schema generation\n            echo \"\ud83d\udd04 Retrying schema generation...\"\n            go run . schema > ./schema.json 2>/dev/null || {\n              echo \"\u274c Schema generation still failed after auto-fixes\"\n              exit 1\n            }\n          else\n            echo \"$SCHEMA_OUTPUT\" > ./schema.json\n          fi\n          \n          git config user.name \"Charm\"\n          git config user.email \"124303983+charmcli@users.noreply.github.com\"\n          \n          echo \"\u2705 Schema generated successfully\"\n      - uses: stefanzweifel/git-auto-commit-action@v5\n        with:\n          commit_message: \"chore: auto-update generated files\"\n          branch: main\n          commit_user_name: Charm\n          commit_user_email: 124303983+charmcli@users.noreply.github.com\n          commit_author: Charm <124303983+charmcli@users.noreply.github.com>\n          create_branch: false\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.runs-on_12": {
      "name": "jobs.update-schema.runs-on",
      "type": "key",
      "start_line": 12,
      "end_line": 12,
      "content_hash": "af41e65e8de6d5fac9a3ffe97c9153f19e320298",
      "content": "    runs-on: ubuntu-latest",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.if_13": {
      "name": "jobs.update-schema.if",
      "type": "key",
      "start_line": 13,
      "end_line": 13,
      "content_hash": "6a58f2dff3a827b0332562d0df02ed4eea725c5e",
      "content": "    if: github.ref == 'refs/heads/main'  # Only run on main branch",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps_14": {
      "name": "jobs.update-schema.steps",
      "type": "key",
      "start_line": 14,
      "end_line": 69,
      "content_hash": "03a8ca7936958a3401b6fe0bc2ae4083fbf9e619",
      "content": "    steps:\n      - uses: actions/checkout@v4\n        with:\n          token: ${{ secrets.PERSONAL_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}\n          fetch-depth: 0  # Fetch full history for proper commits\n      - uses: actions/setup-go@v5\n        with:\n          go-version-file: go.mod\n      - name: Generate schema with auto-fix\n        run: |\n          echo \"\ud83d\udd0d Generating schema...\"\n          \n          # Try to generate schema with error handling\n          set +e\n          SCHEMA_OUTPUT=$(go run . schema 2>&1)\n          SCHEMA_EXIT_CODE=$?\n          \n          if [ $SCHEMA_EXIT_CODE -ne 0 ]; then\n            echo \"\ud83d\udca5 Schema generation failed, attempting auto-fixes...\"\n            echo \"$SCHEMA_OUTPUT\"\n            \n            # Try common fixes for schema generation issues\n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"cannot find\"; then\n              echo \"\ud83d\udd27 Tidying modules...\"\n              go mod tidy\n              go mod download\n            fi\n            \n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"build constraints\"; then\n              echo \"\ud83d\udd27 Fixing build constraints...\"\n              go mod tidy\n            fi\n            \n            # Retry schema generation\n            echo \"\ud83d\udd04 Retrying schema generation...\"\n            go run . schema > ./schema.json 2>/dev/null || {\n              echo \"\u274c Schema generation still failed after auto-fixes\"\n              exit 1\n            }\n          else\n            echo \"$SCHEMA_OUTPUT\" > ./schema.json\n          fi\n          \n          git config user.name \"Charm\"\n          git config user.email \"124303983+charmcli@users.noreply.github.com\"\n          \n          echo \"\u2705 Schema generated successfully\"\n      - uses: stefanzweifel/git-auto-commit-action@v5\n        with:\n          commit_message: \"chore: auto-update generated files\"\n          branch: main\n          commit_user_name: Charm\n          commit_user_email: 124303983+charmcli@users.noreply.github.com\n          commit_author: Charm <124303983+charmcli@users.noreply.github.com>\n          create_branch: false\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.uses_15": {
      "name": "jobs.update-schema.steps.uses",
      "type": "key",
      "start_line": 15,
      "end_line": 15,
      "content_hash": "94d776ea972ae48be1086fe6571c992a21d00df4",
      "content": "      - uses: actions/checkout@v4",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with_16": {
      "name": "jobs.update-schema.steps.with",
      "type": "key",
      "start_line": 16,
      "end_line": 18,
      "content_hash": "cf378c0f945aceacd52b01ca4b871abe4f07fc73",
      "content": "        with:\n          token: ${{ secrets.PERSONAL_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}\n          fetch-depth: 0  # Fetch full history for proper commits",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.token_17": {
      "name": "jobs.update-schema.steps.with.token",
      "type": "key",
      "start_line": 17,
      "end_line": 17,
      "content_hash": "9b6e56bce206eb4f2eb284ecbd2323ec9cb8bab3",
      "content": "          token: ${{ secrets.PERSONAL_ACCESS_TOKEN || secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.fetch-depth_18": {
      "name": "jobs.update-schema.steps.with.fetch-depth",
      "type": "key",
      "start_line": 18,
      "end_line": 18,
      "content_hash": "f87e277f804477f3a704900af25e68137bf0218a",
      "content": "          fetch-depth: 0  # Fetch full history for proper commits",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.uses_19": {
      "name": "jobs.update-schema.steps.uses",
      "type": "key",
      "start_line": 19,
      "end_line": 19,
      "content_hash": "05b0244fd93e9087c2e2e88d2cc8b0d20e67e115",
      "content": "      - uses: actions/setup-go@v5",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with_20": {
      "name": "jobs.update-schema.steps.with",
      "type": "key",
      "start_line": 20,
      "end_line": 21,
      "content_hash": "acbe2b249c2c5af466413bcc1e24d82c00deb054",
      "content": "        with:\n          go-version-file: go.mod",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.go-version-file_21": {
      "name": "jobs.update-schema.steps.with.go-version-file",
      "type": "key",
      "start_line": 21,
      "end_line": 21,
      "content_hash": "31f447a891523a37f1074c91e02638aea6c6140d",
      "content": "          go-version-file: go.mod",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.name_22": {
      "name": "jobs.update-schema.steps.name",
      "type": "key",
      "start_line": 22,
      "end_line": 22,
      "content_hash": "7f72db0ba408cac9189253406bc3bc8ed5459213",
      "content": "      - name: Generate schema with auto-fix",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.run_23": {
      "name": "jobs.update-schema.steps.run",
      "type": "key",
      "start_line": 23,
      "end_line": 60,
      "content_hash": "e822c0ea3a7897132e6710e0c061c7efdbdde6e7",
      "content": "        run: |\n          echo \"\ud83d\udd0d Generating schema...\"\n          \n          # Try to generate schema with error handling\n          set +e\n          SCHEMA_OUTPUT=$(go run . schema 2>&1)\n          SCHEMA_EXIT_CODE=$?\n          \n          if [ $SCHEMA_EXIT_CODE -ne 0 ]; then\n            echo \"\ud83d\udca5 Schema generation failed, attempting auto-fixes...\"\n            echo \"$SCHEMA_OUTPUT\"\n            \n            # Try common fixes for schema generation issues\n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"cannot find\"; then\n              echo \"\ud83d\udd27 Tidying modules...\"\n              go mod tidy\n              go mod download\n            fi\n            \n            if echo \"$SCHEMA_OUTPUT\" | grep -q \"build constraints\"; then\n              echo \"\ud83d\udd27 Fixing build constraints...\"\n              go mod tidy\n            fi\n            \n            # Retry schema generation\n            echo \"\ud83d\udd04 Retrying schema generation...\"\n            go run . schema > ./schema.json 2>/dev/null || {\n              echo \"\u274c Schema generation still failed after auto-fixes\"\n              exit 1\n            }\n          else\n            echo \"$SCHEMA_OUTPUT\" > ./schema.json\n          fi\n          \n          git config user.name \"Charm\"\n          git config user.email \"124303983+charmcli@users.noreply.github.com\"\n          \n          echo \"\u2705 Schema generated successfully\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.uses_61": {
      "name": "jobs.update-schema.steps.uses",
      "type": "key",
      "start_line": 61,
      "end_line": 61,
      "content_hash": "eff3f059e441ffe32c10b296efd41325f12d6795",
      "content": "      - uses: stefanzweifel/git-auto-commit-action@v5",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with_62": {
      "name": "jobs.update-schema.steps.with",
      "type": "key",
      "start_line": 62,
      "end_line": 69,
      "content_hash": "76be6688c08f9c34ef65bb8b2df59d4c6490539b",
      "content": "        with:\n          commit_message: \"chore: auto-update generated files\"\n          branch: main\n          commit_user_name: Charm\n          commit_user_email: 124303983+charmcli@users.noreply.github.com\n          commit_author: Charm <124303983+charmcli@users.noreply.github.com>\n          create_branch: false\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.commit_message_63": {
      "name": "jobs.update-schema.steps.with.commit_message",
      "type": "key",
      "start_line": 63,
      "end_line": 63,
      "content_hash": "acf85618bc5859237899ddbef487921a11507595",
      "content": "          commit_message: \"chore: auto-update generated files\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.branch_64": {
      "name": "jobs.update-schema.steps.with.branch",
      "type": "key",
      "start_line": 64,
      "end_line": 64,
      "content_hash": "a684fea8df96e98fc577610231bee91a96cce519",
      "content": "          branch: main",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.commit_user_name_65": {
      "name": "jobs.update-schema.steps.with.commit_user_name",
      "type": "key",
      "start_line": 65,
      "end_line": 65,
      "content_hash": "482b9c879b1d16ab53dad3208aaa2844d388fe52",
      "content": "          commit_user_name: Charm",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.commit_user_email_66": {
      "name": "jobs.update-schema.steps.with.commit_user_email",
      "type": "key",
      "start_line": 66,
      "end_line": 66,
      "content_hash": "6b14325a4e1f5a8be41530fbb1263d0dbddb3fc0",
      "content": "          commit_user_email: 124303983+charmcli@users.noreply.github.com",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.commit_author_67": {
      "name": "jobs.update-schema.steps.with.commit_author",
      "type": "key",
      "start_line": 67,
      "end_line": 67,
      "content_hash": "9d1a38274404f927ddbf6e5e76e30baab3b2947c",
      "content": "          commit_author: Charm <124303983+charmcli@users.noreply.github.com>",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.update-schema.steps.with.create_branch_68": {
      "name": "jobs.update-schema.steps.with.create_branch",
      "type": "key",
      "start_line": 68,
      "end_line": 68,
      "content_hash": "8d1f41452cac999b90e7f6af8e7c24c69cb6f97d",
      "content": "          create_branch: false",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}