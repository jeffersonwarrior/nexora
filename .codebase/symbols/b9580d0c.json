{
  "file_path": "/work/external-deps/helix-db/helix-db/src/helix_engine/traversal_core/ops/util/drop.rs",
  "file_hash": "ff9200f7604921a9ee1c928f440be4b1b892cb5c",
  "updated_at": "2025-12-26T17:34:21.346349",
  "symbols": {
    "struct_Drop_9": {
      "name": "Drop",
      "type": "struct",
      "start_line": 9,
      "end_line": 12,
      "content_hash": "ef523269d8980b1d5e88497487ddeaa69423c017",
      "content": "pub struct Drop<I> {\n    pub iter: I,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Drop_13": {
      "name": "Drop",
      "type": "impl",
      "start_line": 13,
      "end_line": 16,
      "content_hash": "02cf8ed8faa98d6cdcbea0b1091d3b36cc91bb6a",
      "content": "impl<'db, 'arena, 'txn, I> Drop<I>\nwhere\n    I: Iterator<Item = Result<TraversalValue<'arena>, GraphError>>,\n{",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_drop_traversal_17": {
      "name": "drop_traversal",
      "type": "method",
      "start_line": 17,
      "end_line": 59,
      "content_hash": "715384417a49959b7bd0268626b4d83c329e63e3",
      "content": "    pub fn drop_traversal(\n        iter: I,\n        storage: &'db HelixGraphStorage,\n        txn: &'txn mut RwTxn<'db>,\n    ) -> Result<(), GraphError> {\n        iter.into_iter().filter_map(|item| item.ok()).try_for_each(\n            |item| -> Result<(), GraphError> {\n                match item {\n                    TraversalValue::Node(node) => match storage.drop_node(txn, &node.id) {\n                        Ok(_) => {\n                            if let Some(bm25) = &storage.bm25\n                                && let Err(e) = bm25.delete_doc(txn, node.id)\n                            {\n                                println!(\"failed to delete doc from bm25: {e}\");\n                            }\n                            println!(\"Dropped node: {:?}\", node.id);\n                            Ok(())\n                        }\n                        Err(e) => Err(e),\n                    },\n                    TraversalValue::Edge(edge) => match storage.drop_edge(txn, &edge.id) {\n                        Ok(_) => Ok(()),\n                        Err(e) => Err(e),\n                    },\n                    TraversalValue::Vector(vector) => match storage.drop_vector(txn, &vector.id) {\n                        Ok(_) => Ok(()),\n                        Err(e) => Err(e),\n                    },\n                    TraversalValue::VectorNodeWithoutVectorData(vector) => {\n                        match storage.drop_vector(txn, &vector.id) {\n                            Ok(_) => Ok(()),\n                            Err(e) => Err(e),\n                        }\n                    }\n                    TraversalValue::Empty => Ok(()),\n                    _ => Err(GraphError::ConversionError(format!(\n                        \"Incorrect Type: {item:?}\"\n                    ))),\n                }\n            },\n        )\n    }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}