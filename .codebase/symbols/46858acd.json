{
  "file_path": "/work/internal/tui/components/chat/messages/messages_p1_test.go",
  "file_hash": "488432a20a973c6d9b372be5c7ea99f68b578f83",
  "updated_at": "2025-12-26T17:34:25.067586",
  "symbols": {
    "function_TestEmptyReasoningContentShowsAnimation_11": {
      "name": "TestEmptyReasoningContentShowsAnimation",
      "type": "function",
      "start_line": 11,
      "end_line": 20,
      "content_hash": "dcde66c45d8490fe90ecf1abdfe719012e71f6bc",
      "content": "func TestEmptyReasoningContentShowsAnimation(t *testing.T) {\n\t// Based on fix at messages.go:303-307\n\t// Logic: if strings.TrimSpace(m.message.ReasoningContent().Thinking) == \"\" then show animation\n\treasoning := &message.ReasoningContent{Thinking: \"\"}\n\tif strings.TrimSpace(reasoning.Thinking) == \"\" {\n\t\tt.Log(\"Empty reasoning content: animation should display\")\n\t}\n}\n\n// TestNonEmptyReasoningContentHidesAnimation verifies animation hidden when reasoning exists",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestNonEmptyReasoningContentHidesAnimation_21": {
      "name": "TestNonEmptyReasoningContentHidesAnimation",
      "type": "function",
      "start_line": 21,
      "end_line": 29,
      "content_hash": "b61ba498a928afbb2c2c24770a5a78987c6acdb1",
      "content": "func TestNonEmptyReasoningContentHidesAnimation(t *testing.T) {\n\t// Prevents the random characters bug (like \"F)@%5.!bc@\u00a3=EbA\")\n\treasoning := &message.ReasoningContent{Thinking: \"Let me analyze this...\"}\n\tif strings.TrimSpace(reasoning.Thinking) != \"\" {\n\t\tt.Log(\"Non-empty reasoning content: animation should be hidden\")\n\t}\n}\n\n// TestCanceledReasoningShowsText verifies \"*Canceled*\" text for canceled reason",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestCanceledReasoningShowsText_30": {
      "name": "TestCanceledReasoningShowsText",
      "type": "function",
      "start_line": 30,
      "end_line": 38,
      "content_hash": "ded4bab98695508bcb24666b3e3845680e221d5c",
      "content": "func TestCanceledReasoningShowsText(t *testing.T) {\n\t// Check FinishReasonCanceled handling\n\tfinishReason := message.FinishReasonCanceled\n\tif finishReason == message.FinishReasonCanceled {\n\t\tt.Log(\"Canceled reason should show '*Canceled*' text\")\n\t}\n}\n\n// TestMessageFooterStateTransitions tests footer states",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestMessageFooterStateTransitions_39": {
      "name": "TestMessageFooterStateTransitions",
      "type": "function",
      "start_line": 39,
      "end_line": 48,
      "content_hash": "1432ba67d7c96d729a23a3627d924d4d78b51edb",
      "content": "func TestMessageFooterStateTransitions(t *testing.T) {\n\tstates := []string{\"Thinking\", \"StreamingResponse\", \"ExecutingTool\", \"Idle\"}\n\tfor _, state := range states {\n\t\tt.Run(state, func(t *testing.T) {\n\t\t\tt.Logf(\"Testing footer state: %s\", state)\n\t\t})\n\t}\n}\n\n// TestThinkingAnimationLogic verifies the complete animation decision logic",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestThinkingAnimationLogic_49": {
      "name": "TestThinkingAnimationLogic",
      "type": "function",
      "start_line": 49,
      "end_line": 75,
      "content_hash": "7c67ac24c33853410c788382a27a1d7113cd66a4",
      "content": "func TestThinkingAnimationLogic(t *testing.T) {\n\ttests := []struct {\n\t\tname       string\n\t\treasoning  string\n\t\tshowAnim   bool\n\t\tshowCancel bool\n\t}{\n\t\t{\"Empty reasoning\", \"\", true, false},\n\t\t{\"Non-empty reasoning\", \"Analyzing...\", false, false},\n\t\t{\"Canceled\", \"\", false, true},\n\t\t{\"Whitespace only\", \"   \", true, false},\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\thasThinking := strings.TrimSpace(tt.reasoning) != \"\"\n\t\t\tisCanceled := tt.showCancel\n\n\t\t\t// Logic from messages.go:303-307\n\t\t\tshowAnimation := !hasThinking && !isCanceled\n\n\t\t\tif showAnimation != tt.showAnim {\n\t\t\t\tt.Errorf(\"Animation decision mismatch: expected %v, got %v\", tt.showAnim, showAnimation)\n\t\t\t}\n\t\t})\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}