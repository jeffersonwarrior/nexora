{
  "file_path": "/work/external-deps/helix-db/helix-db/src/helix_engine/traversal_core/ops/util/group_by.rs",
  "file_hash": "6ef5e81c3fef579f55c9babf4b2522a9ecd3fd71",
  "updated_at": "2025-12-26T17:34:22.025155",
  "symbols": {
    "trait_GroupByAdapter_10": {
      "name": "GroupByAdapter",
      "type": "trait",
      "start_line": 10,
      "end_line": 10,
      "content_hash": "1b16e4be6587fce8639bc944a6a7f1c0593a70c2",
      "content": "pub trait GroupByAdapter: Iterator {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_group_by_11": {
      "name": "group_by",
      "type": "function",
      "start_line": 11,
      "end_line": 17,
      "content_hash": "738b37bef1ef781e61a1e56ef09a0f51bdee11c4",
      "content": "    fn group_by(self, properties: &[String], should_count: bool) -> Result<GroupBy, GraphError>;\n}\n\nimpl<'db, 'arena, 'txn, I: Iterator<Item = Result<TraversalValue<'arena>, GraphError>>>\n    GroupByAdapter for RoTraversalIterator<'db, 'arena, 'txn, I>\n{\n    // TODO: optimize this",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_group_by_18": {
      "name": "group_by",
      "type": "function",
      "start_line": 18,
      "end_line": 54,
      "content_hash": "0fb86f0ca18465cc94892c38dddbd2976afef592",
      "content": "    fn group_by(self, properties: &[String], should_count: bool) -> Result<GroupBy, GraphError> {\n        let mut groups: HashMap<String, GroupByItem> = HashMap::new();\n\n        let properties_len = properties.len();\n\n        for item in self.inner {\n            let item = item?;\n\n            // TODO HANDLE COUNT\n            let mut kvs = Vec::with_capacity(properties_len);\n            let mut key_parts = Vec::with_capacity(properties_len);\n\n            for property in properties {\n                match item.get_property(property) {\n                    Some(val) => {\n                        key_parts.push(val.inner_stringify());\n                        kvs.push((property.to_string(), val.clone()));\n                    }\n                    None => {\n                        key_parts.push(\"null\".to_string());\n                    }\n                }\n            }\n            let key = key_parts.join(\"_\");\n\n            let group = groups.entry(key).or_default();\n            group.values.extend(kvs);\n            group.count += 1;\n        }\n\n        if should_count {\n            Ok(GroupBy::Count(groups))\n        } else {\n            Ok(GroupBy::Group(groups))\n        }\n    }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}