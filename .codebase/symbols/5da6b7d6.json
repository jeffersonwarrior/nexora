{
  "file_path": "/work/internal/tui/exp/diffview/chroma.go",
  "file_hash": "2ff92db03f3ccef6c2ce9d763a128ffbacc10096",
  "updated_at": "2025-12-26T17:34:24.426787",
  "symbols": {
    "struct_chromaFormatter_18": {
      "name": "chromaFormatter",
      "type": "struct",
      "start_line": 18,
      "end_line": 22,
      "content_hash": "a3601992bbfcd273748d12cf01b16353df1de6b1",
      "content": "type chromaFormatter struct {\n\tbgColor color.Color\n}\n\n// Format implements the chroma.Formatter interface.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Format_23": {
      "name": "Format",
      "type": "method",
      "start_line": 23,
      "end_line": 57,
      "content_hash": "5b45b37dff1ce5b0472d99329bdd91d0e9f6346d",
      "content": "func (c chromaFormatter) Format(w io.Writer, style *chroma.Style, it chroma.Iterator) error {\n\tfor token := it(); token != chroma.EOF; token = it() {\n\t\tvalue := strings.TrimRight(token.Value, \"\\n\")\n\t\tvalue = ansiext.Escape(value)\n\n\t\tentry := style.Get(token.Type)\n\t\tif entry.IsZero() {\n\t\t\tif _, err := fmt.Fprint(w, value); err != nil {\n\t\t\t\treturn err\n\t\t\t}\n\t\t\tcontinue\n\t\t}\n\n\t\ts := lipgloss.NewStyle().\n\t\t\tBackground(c.bgColor)\n\n\t\tif entry.Bold == chroma.Yes {\n\t\t\ts = s.Bold(true)\n\t\t}\n\t\tif entry.Underline == chroma.Yes {\n\t\t\ts = s.Underline(true)\n\t\t}\n\t\tif entry.Italic == chroma.Yes {\n\t\t\ts = s.Italic(true)\n\t\t}\n\t\tif entry.Colour.IsSet() {\n\t\t\ts = s.Foreground(lipgloss.Color(entry.Colour.String()))\n\t\t}\n\n\t\tif _, err := fmt.Fprint(w, s.Render(value)); err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\treturn nil\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}