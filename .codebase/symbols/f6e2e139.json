{
  "file_path": "/work/internal/format/spinner.go",
  "file_hash": "314e09228747650d242ebf7b18282b53029c75d0",
  "updated_at": "2025-12-26T17:34:23.018158",
  "symbols": {
    "struct_Spinner_15": {
      "name": "Spinner",
      "type": "struct",
      "start_line": 15,
      "end_line": 19,
      "content_hash": "87e28d9fdddccc332265cc049bba04b9fe82d7f4",
      "content": "type Spinner struct {\n\tdone chan struct{}\n\tprog *tea.Program\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_model_20": {
      "name": "model",
      "type": "struct",
      "start_line": 20,
      "end_line": 24,
      "content_hash": "564768b6e78bf45ac6c6e6e5828d542dd4ce96a0",
      "content": "type model struct {\n\tcancel context.CancelFunc\n\tanim   *anim.Anim\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Init_25": {
      "name": "Init",
      "type": "method",
      "start_line": 25,
      "end_line": 25,
      "content_hash": "cb5e32e67ef9a8038d5edf8b2fdbf17a5e1fb20c",
      "content": "func (m model) Init() tea.Cmd  { return m.anim.Init() }",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_View_26": {
      "name": "View",
      "type": "method",
      "start_line": 26,
      "end_line": 28,
      "content_hash": "af680a73c2c951f12b9518557bfcf2afde96cf1b",
      "content": "func (m model) View() tea.View { return tea.NewView(m.anim.View()) }\n\n// Update implements tea.Model.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Update_29": {
      "name": "Update",
      "type": "method",
      "start_line": 29,
      "end_line": 43,
      "content_hash": "6dbc0d3222c30ab05a05fa69796327d3576f262d",
      "content": "func (m model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {\n\tswitch msg := msg.(type) {\n\tcase tea.KeyPressMsg:\n\t\tswitch msg.String() {\n\t\tcase \"ctrl+c\", \"esc\":\n\t\t\tm.cancel()\n\t\t\treturn m, tea.Quit\n\t\t}\n\t}\n\tmm, cmd := m.anim.Update(msg)\n\tm.anim = mm.(*anim.Anim)\n\treturn m, cmd\n}\n\n// NewSpinner creates a new spinner with the given message",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewSpinner_44": {
      "name": "NewSpinner",
      "type": "function",
      "start_line": 44,
      "end_line": 58,
      "content_hash": "b3f4f07edf19abdbb4068ec23cb30cc5568f42db",
      "content": "func NewSpinner(ctx context.Context, cancel context.CancelFunc, animSettings anim.Settings) *Spinner {\n\tm := model{\n\t\tanim:   anim.New(animSettings),\n\t\tcancel: cancel,\n\t}\n\n\tp := tea.NewProgram(m, tea.WithOutput(os.Stderr), tea.WithContext(ctx))\n\n\treturn &Spinner{\n\t\tprog: p,\n\t\tdone: make(chan struct{}, 1),\n\t}\n}\n\n// Start begins the spinner animation",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Start_59": {
      "name": "Start",
      "type": "method",
      "start_line": 59,
      "end_line": 71,
      "content_hash": "6e52ecf8c357adcc9ca89d01183bf2d9a847d3ce",
      "content": "func (s *Spinner) Start() {\n\tgo func() {\n\t\tdefer close(s.done)\n\t\t_, err := s.prog.Run()\n\t\t// ensures line is cleared\n\t\tfmt.Fprint(os.Stderr, ansi.EraseEntireLine)\n\t\tif err != nil && !errors.Is(err, context.Canceled) && !errors.Is(err, tea.ErrInterrupted) {\n\t\t\tfmt.Fprintf(os.Stderr, \"Error running spinner: %v\\n\", err)\n\t\t}\n\t}()\n}\n\n// Stop ends the spinner animation",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Stop_72": {
      "name": "Stop",
      "type": "method",
      "start_line": 72,
      "end_line": 77,
      "content_hash": "f5a99cc96e109082d6dc995e70bbecb546f2845a",
      "content": "func (s *Spinner) Stop() {\n\ts.prog.Quit()\n\t<-s.done\n}\n\n// SetLabel updates the spinner label (stub for interface compatibility)",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetLabel_78": {
      "name": "SetLabel",
      "type": "method",
      "start_line": 78,
      "end_line": 82,
      "content_hash": "68978028b28c3fbddc56e3e69dd62557593f1040",
      "content": "func (s *Spinner) SetLabel(label string) {\n\t// Legacy charm spinner doesn't support label updates\n}\n\n// Settings defines settings for the animation.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_Settings_83": {
      "name": "Settings",
      "type": "struct",
      "start_line": 83,
      "end_line": 91,
      "content_hash": "18eb432d79fcf8005ebdb3e21dbe478352954f19",
      "content": "type Settings struct {\n\tSize       int\n\tLabel      string\n\tLabelColor string\n\tColorStart string\n\tColorEnd   string\n}\n\n// SpinnerInterface defines the interface for spinner implementations",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "interface_SpinnerInterface_92": {
      "name": "SpinnerInterface",
      "type": "interface",
      "start_line": 92,
      "end_line": 98,
      "content_hash": "4a88429253a675b4dd58ddf595636f1460ae96ae",
      "content": "type SpinnerInterface interface {\n\tStart()\n\tStop()\n\tSetLabel(label string)\n}\n\n// NewSpinnerInterface creates a new spinner using the native implementation by default",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewSpinnerInterface_99": {
      "name": "NewSpinnerInterface",
      "type": "function",
      "start_line": 99,
      "end_line": 108,
      "content_hash": "36bf1e873313fd26b0bd5c15c34c1f4cc6a5b34e",
      "content": "func NewSpinnerInterface(ctx context.Context, cancel context.CancelFunc, settings Settings) SpinnerInterface {\n\tnativeSettings := NativeSettings{\n\t\tSize:       settings.Size,\n\t\tLabel:      settings.Label,\n\t\tLabelColor: settings.LabelColor,\n\t\tColorStart: settings.ColorStart,\n\t\tColorEnd:   settings.ColorEnd,\n\t}\n\treturn NewNativeSpinner(ctx, cancel, nativeSettings)\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}