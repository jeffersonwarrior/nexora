{
  "file_path": "/work/internal/db/files.sql.go",
  "file_hash": "666d9dd19c7928a812981726f7fc0f32db0a7921",
  "updated_at": "2025-12-26T17:34:23.609578",
  "symbols": {
    "struct_CreateFileParams_27": {
      "name": "CreateFileParams",
      "type": "struct",
      "start_line": 27,
      "end_line": 34,
      "content_hash": "2a2b16960b147e5f9829d02ee65319f20a18eb99",
      "content": "type CreateFileParams struct {\n\tID        string `json:\"id\"`\n\tSessionID string `json:\"session_id\"`\n\tPath      string `json:\"path\"`\n\tContent   string `json:\"content\"`\n\tVersion   int64  `json:\"version\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_CreateFile_35": {
      "name": "CreateFile",
      "type": "method",
      "start_line": 35,
      "end_line": 60,
      "content_hash": "b8cfc6ef6a71f3582482fe94cdf7fb7b8f1b2a4a",
      "content": "func (q *Queries) CreateFile(ctx context.Context, arg CreateFileParams) (File, error) {\n\trow := q.queryRow(ctx, q.createFileStmt, createFile,\n\t\targ.ID,\n\t\targ.SessionID,\n\t\targ.Path,\n\t\targ.Content,\n\t\targ.Version,\n\t)\n\tvar i File\n\terr := row.Scan(\n\t\t&i.ID,\n\t\t&i.SessionID,\n\t\t&i.Path,\n\t\t&i.Content,\n\t\t&i.Version,\n\t\t&i.CreatedAt,\n\t\t&i.UpdatedAt,\n\t)\n\treturn i, err\n}\n\nconst deleteFile = `-- name: DeleteFile :exec\nDELETE FROM files\nWHERE id = ?\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_DeleteFile_61": {
      "name": "DeleteFile",
      "type": "method",
      "start_line": 61,
      "end_line": 70,
      "content_hash": "350a4147001e1a790a119d18373c3e0be70d23d6",
      "content": "func (q *Queries) DeleteFile(ctx context.Context, id string) error {\n\t_, err := q.exec(ctx, q.deleteFileStmt, deleteFile, id)\n\treturn err\n}\n\nconst deleteSessionFiles = `-- name: DeleteSessionFiles :exec\nDELETE FROM files\nWHERE session_id = ?\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_DeleteSessionFiles_71": {
      "name": "DeleteSessionFiles",
      "type": "method",
      "start_line": 71,
      "end_line": 81,
      "content_hash": "8bf00786d45bd34b0c9fc2f94d4cd63bb175b996",
      "content": "func (q *Queries) DeleteSessionFiles(ctx context.Context, sessionID string) error {\n\t_, err := q.exec(ctx, q.deleteSessionFilesStmt, deleteSessionFiles, sessionID)\n\treturn err\n}\n\nconst getFile = `-- name: GetFile :one\nSELECT id, session_id, path, content, version, created_at, updated_at\nFROM files\nWHERE id = ? LIMIT 1\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_GetFile_82": {
      "name": "GetFile",
      "type": "method",
      "start_line": 82,
      "end_line": 104,
      "content_hash": "2ef585bcccb4b0ba3cdebbf9875818d285ee5e36",
      "content": "func (q *Queries) GetFile(ctx context.Context, id string) (File, error) {\n\trow := q.queryRow(ctx, q.getFileStmt, getFile, id)\n\tvar i File\n\terr := row.Scan(\n\t\t&i.ID,\n\t\t&i.SessionID,\n\t\t&i.Path,\n\t\t&i.Content,\n\t\t&i.Version,\n\t\t&i.CreatedAt,\n\t\t&i.UpdatedAt,\n\t)\n\treturn i, err\n}\n\nconst getFileByPathAndSession = `-- name: GetFileByPathAndSession :one\nSELECT id, session_id, path, content, version, created_at, updated_at\nFROM files\nWHERE path = ? AND session_id = ?\nORDER BY version DESC, created_at DESC\nLIMIT 1\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_GetFileByPathAndSessionParams_105": {
      "name": "GetFileByPathAndSessionParams",
      "type": "struct",
      "start_line": 105,
      "end_line": 109,
      "content_hash": "003bc6e2926521df433919ff13761df7bd922023",
      "content": "type GetFileByPathAndSessionParams struct {\n\tPath      string `json:\"path\"`\n\tSessionID string `json:\"session_id\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_GetFileByPathAndSession_110": {
      "name": "GetFileByPathAndSession",
      "type": "method",
      "start_line": 110,
      "end_line": 131,
      "content_hash": "910c81593442d3378244fcd2a7e8bef3b2c299ac",
      "content": "func (q *Queries) GetFileByPathAndSession(ctx context.Context, arg GetFileByPathAndSessionParams) (File, error) {\n\trow := q.queryRow(ctx, q.getFileByPathAndSessionStmt, getFileByPathAndSession, arg.Path, arg.SessionID)\n\tvar i File\n\terr := row.Scan(\n\t\t&i.ID,\n\t\t&i.SessionID,\n\t\t&i.Path,\n\t\t&i.Content,\n\t\t&i.Version,\n\t\t&i.CreatedAt,\n\t\t&i.UpdatedAt,\n\t)\n\treturn i, err\n}\n\nconst listFilesByPath = `-- name: ListFilesByPath :many\nSELECT id, session_id, path, content, version, created_at, updated_at\nFROM files\nWHERE path = ?\nORDER BY version DESC, created_at DESC\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ListFilesByPath_132": {
      "name": "ListFilesByPath",
      "type": "method",
      "start_line": 132,
      "end_line": 169,
      "content_hash": "e77d634e24045cb2c888ecf896a90cf4b8524e4e",
      "content": "func (q *Queries) ListFilesByPath(ctx context.Context, path string) ([]File, error) {\n\trows, err := q.query(ctx, q.listFilesByPathStmt, listFilesByPath, path)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer rows.Close()\n\titems := []File{}\n\tfor rows.Next() {\n\t\tvar i File\n\t\tif err := rows.Scan(\n\t\t\t&i.ID,\n\t\t\t&i.SessionID,\n\t\t\t&i.Path,\n\t\t\t&i.Content,\n\t\t\t&i.Version,\n\t\t\t&i.CreatedAt,\n\t\t\t&i.UpdatedAt,\n\t\t); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\titems = append(items, i)\n\t}\n\tif err := rows.Close(); err != nil {\n\t\treturn nil, err\n\t}\n\tif err := rows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\treturn items, nil\n}\n\nconst listFilesBySession = `-- name: ListFilesBySession :many\nSELECT id, session_id, path, content, version, created_at, updated_at\nFROM files\nWHERE session_id = ?\nORDER BY version ASC, created_at ASC\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ListFilesBySession_170": {
      "name": "ListFilesBySession",
      "type": "method",
      "start_line": 170,
      "end_line": 212,
      "content_hash": "87843f107be2406071d4a3e6ad091b5b62357020",
      "content": "func (q *Queries) ListFilesBySession(ctx context.Context, sessionID string) ([]File, error) {\n\trows, err := q.query(ctx, q.listFilesBySessionStmt, listFilesBySession, sessionID)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer rows.Close()\n\titems := []File{}\n\tfor rows.Next() {\n\t\tvar i File\n\t\tif err := rows.Scan(\n\t\t\t&i.ID,\n\t\t\t&i.SessionID,\n\t\t\t&i.Path,\n\t\t\t&i.Content,\n\t\t\t&i.Version,\n\t\t\t&i.CreatedAt,\n\t\t\t&i.UpdatedAt,\n\t\t); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\titems = append(items, i)\n\t}\n\tif err := rows.Close(); err != nil {\n\t\treturn nil, err\n\t}\n\tif err := rows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\treturn items, nil\n}\n\nconst listLatestSessionFiles = `-- name: ListLatestSessionFiles :many\nSELECT f.id, f.session_id, f.path, f.content, f.version, f.created_at, f.updated_at\nFROM files f\nINNER JOIN (\n    SELECT path, MAX(version) as max_version, MAX(created_at) as max_created_at\n    FROM files\n    GROUP BY path\n) latest ON f.path = latest.path AND f.version = latest.max_version AND f.created_at = latest.max_created_at\nWHERE f.session_id = ?\nORDER BY f.path\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ListLatestSessionFiles_213": {
      "name": "ListLatestSessionFiles",
      "type": "method",
      "start_line": 213,
      "end_line": 250,
      "content_hash": "7835089b039944e0d129d230242f00a1bbf75f02",
      "content": "func (q *Queries) ListLatestSessionFiles(ctx context.Context, sessionID string) ([]File, error) {\n\trows, err := q.query(ctx, q.listLatestSessionFilesStmt, listLatestSessionFiles, sessionID)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer rows.Close()\n\titems := []File{}\n\tfor rows.Next() {\n\t\tvar i File\n\t\tif err := rows.Scan(\n\t\t\t&i.ID,\n\t\t\t&i.SessionID,\n\t\t\t&i.Path,\n\t\t\t&i.Content,\n\t\t\t&i.Version,\n\t\t\t&i.CreatedAt,\n\t\t\t&i.UpdatedAt,\n\t\t); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\titems = append(items, i)\n\t}\n\tif err := rows.Close(); err != nil {\n\t\treturn nil, err\n\t}\n\tif err := rows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\treturn items, nil\n}\n\nconst listNewFiles = `-- name: ListNewFiles :many\nSELECT id, session_id, path, content, version, created_at, updated_at\nFROM files\nWHERE is_new = 1\nORDER BY version DESC, created_at DESC\n`\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ListNewFiles_251": {
      "name": "ListNewFiles",
      "type": "method",
      "start_line": 251,
      "end_line": 280,
      "content_hash": "1fc6d119fbf0d8bf62d8cc36016e2d360be2d253",
      "content": "func (q *Queries) ListNewFiles(ctx context.Context) ([]File, error) {\n\trows, err := q.query(ctx, q.listNewFilesStmt, listNewFiles)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer rows.Close()\n\titems := []File{}\n\tfor rows.Next() {\n\t\tvar i File\n\t\tif err := rows.Scan(\n\t\t\t&i.ID,\n\t\t\t&i.SessionID,\n\t\t\t&i.Path,\n\t\t\t&i.Content,\n\t\t\t&i.Version,\n\t\t\t&i.CreatedAt,\n\t\t\t&i.UpdatedAt,\n\t\t); err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\titems = append(items, i)\n\t}\n\tif err := rows.Close(); err != nil {\n\t\treturn nil, err\n\t}\n\tif err := rows.Err(); err != nil {\n\t\treturn nil, err\n\t}\n\treturn items, nil\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}