{
  "file_path": "/work/external-deps/Context-Engine/tests/test_workspace_state_repo_detection.py",
  "file_hash": "e10cb87fddffc549c664ee27216e013462658a20",
  "updated_at": "2025-12-26T17:34:22.738836",
  "symbols": {
    "function_test_extract_repo_name_uses_workspace_relative_leaf_8": {
      "name": "test_extract_repo_name_uses_workspace_relative_leaf",
      "type": "function",
      "start_line": 8,
      "end_line": 24,
      "content_hash": "5604e5fd1addb310470b64fca4020d70dc92a406",
      "content": "def test_extract_repo_name_uses_workspace_relative_leaf(monkeypatch, tmp_path):\n    ws_root = tmp_path / \"work\"\n    ws_root.mkdir(parents=True, exist_ok=True)\n\n    monkeypatch.setenv(\"WORKSPACE_PATH\", str(ws_root))\n\n    ws = importlib.import_module(\"scripts.workspace_state\")\n    ws = importlib.reload(ws)\n\n    def _no_git(*_args, **_kwargs):\n        raise AssertionError(\"git detection should not run for workspace-root-relative paths\")\n\n    monkeypatch.setattr(ws.subprocess, \"run\", _no_git, raising=True)\n\n    repo_path = ws_root / \"Context-Engine\"\n    assert not repo_path.exists()\n    assert ws._extract_repo_name_from_path(str(repo_path)) == \"Context-Engine\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function__no_git_17": {
      "name": "_no_git",
      "type": "function",
      "start_line": 17,
      "end_line": 18,
      "content_hash": "f2cda1bc5812c1c674fcbcde98101deac13325aa",
      "content": "    def _no_git(*_args, **_kwargs):\n        raise AssertionError(\"git detection should not run for workspace-root-relative paths\")",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}