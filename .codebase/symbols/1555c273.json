{
  "file_path": "/work/internal/lsp/client_test.go",
  "file_hash": "0d4bbc611bafc240b7588c8991ab9a7d3b922c1a",
  "updated_at": "2025-12-26T17:34:22.851296",
  "symbols": {
    "function_TestClient_11": {
      "name": "TestClient",
      "type": "function",
      "start_line": 11,
      "end_line": 57,
      "content_hash": "935f1f376260406eed7100d45df4cd6a65647da4",
      "content": "func TestClient(t *testing.T) {\n\tctx := context.Background()\n\n\t// Create a simple config for testing\n\tcfg := config.LSPConfig{\n\t\tCommand:   \"$THE_CMD\", // Use echo as a dummy command that won't fail\n\t\tArgs:      []string{\"hello\"},\n\t\tFileTypes: []string{\"go\"},\n\t\tEnv:       map[string]string{},\n\t}\n\n\t// Test creating a powernap client - this will likely fail with echo\n\t// but we can still test the basic structure\n\tclient, err := New(ctx, \"test\", cfg, config.NewEnvironmentVariableResolver(env.NewFromMap(map[string]string{\n\t\t\"THE_CMD\": \"echo\",\n\t})))\n\tif err != nil {\n\t\t// Expected to fail with echo command, skip the rest\n\t\tt.Skipf(\"Powernap client creation failed as expected with dummy command: %v\", err)\n\t\treturn\n\t}\n\n\t// If we get here, test basic interface methods\n\tif client.GetName() != \"test\" {\n\t\tt.Errorf(\"Expected name 'test', got '%s'\", client.GetName())\n\t}\n\n\tif !client.HandlesFile(\"test.go\") {\n\t\tt.Error(\"Expected client to handle .go files\")\n\t}\n\n\tif client.HandlesFile(\"test.py\") {\n\t\tt.Error(\"Expected client to not handle .py files\")\n\t}\n\n\t// Test server state\n\tclient.SetServerState(StateReady)\n\tif client.GetServerState() != StateReady {\n\t\tt.Error(\"Expected server state to be StateReady\")\n\t}\n\n\t// Clean up - expect this to fail with echo command\n\tif err := client.Close(t.Context()); err != nil {\n\t\t// Expected to fail with echo command\n\t\tt.Logf(\"Close failed as expected with dummy command: %v\", err)\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}