{
  "file_path": "/work/internal/config/providers/mistral_devstral_test.go",
  "file_hash": "e12e2858f979b94cb11fd1f0e8124505cd81fe17",
  "updated_at": "2025-12-26T17:34:23.723854",
  "symbols": {
    "function_TestMistralDevstralProvider_11": {
      "name": "TestMistralDevstralProvider",
      "type": "function",
      "start_line": 11,
      "end_line": 74,
      "content_hash": "f602b889c2894a2b547dffabf705569490f1ea0f",
      "content": "func TestMistralDevstralProvider(t *testing.T) {\n\tt.Run(\"creates provider with correct basic info\", func(t *testing.T) {\n\t\tprovider := MistralDevstralProvider([]catwalk.Provider{})\n\n\t\trequire.NotNil(t, provider)\n\t\tassert.Equal(t, \"mistral-devstral\", string(provider.ID))\n\t\tassert.Equal(t, \"Mistral (Devstral)\", provider.Name)\n\t\tassert.Equal(t, \"openai-compat\", string(provider.Type))\n\t\tassert.Equal(t, \"$MISTRAL_API_KEY\", provider.APIKey)\n\t\tassert.Equal(t, \"https://api.mistral.ai/v1\", provider.APIEndpoint)\n\t})\n\n\tt.Run(\"creates provider with devstral models\", func(t *testing.T) {\n\t\tprovider := MistralDevstralProvider([]catwalk.Provider{})\n\n\t\trequire.NotNil(t, provider)\n\t\trequire.Len(t, provider.Models, 2)\n\t\tassert.Equal(t, \"devstral-2512\", provider.DefaultLargeModelID)\n\t\tassert.Equal(t, \"devstral-small-2512\", provider.DefaultSmallModelID)\n\t})\n\n\tt.Run(\"does not create if already exists\", func(t *testing.T) {\n\t\texistingProvider := catwalk.Provider{ID: \"mistral-devstral\"}\n\t\tprovider := MistralDevstralProvider([]catwalk.Provider{existingProvider})\n\n\t\tassert.Equal(t, \"\", string(provider.ID))\n\t})\n\n\tt.Run(\"has devstral-2 model marked as FREE\", func(t *testing.T) {\n\t\tprovider := MistralDevstralProvider([]catwalk.Provider{})\n\n\t\tvar devstral2Model *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"devstral-2512\" {\n\t\t\t\tdevstral2Model = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, devstral2Model)\n\t\tassert.Equal(t, \"Devstral 2 (123B)\", devstral2Model.Name)\n\t\tassert.Equal(t, 0.0, devstral2Model.CostPer1MIn)\n\t\tassert.Equal(t, 0.0, devstral2Model.CostPer1MOut)\n\t\tassert.True(t, devstral2Model.CanReason)\n\t\tassert.False(t, devstral2Model.SupportsImages)\n\t})\n\n\tt.Run(\"has devstral-small-2 model\", func(t *testing.T) {\n\t\tprovider := MistralDevstralProvider([]catwalk.Provider{})\n\n\t\tvar smallModel *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"devstral-small-2512\" {\n\t\t\t\tsmallModel = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, smallModel)\n\t\tassert.Equal(t, \"Devstral Small 2 (24B)\", smallModel.Name)\n\t\tassert.Equal(t, 0.0, smallModel.CostPer1MIn)\n\t\tassert.Equal(t, 0.0, smallModel.CostPer1MOut)\n\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}