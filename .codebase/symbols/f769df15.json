{
  "file_path": "/work/internal/config/providers/openai_test.go",
  "file_hash": "5d9f80ee916ffc222790561c3bdc36322de4c109",
  "updated_at": "2025-12-26T17:34:23.818816",
  "symbols": {
    "function_TestOpenAIProvider_11": {
      "name": "TestOpenAIProvider",
      "type": "function",
      "start_line": 11,
      "end_line": 106,
      "content_hash": "1714efdf72c2ce3afe02791e7fbf9cbfdbfedb65",
      "content": "func TestOpenAIProvider(t *testing.T) {\n\tt.Run(\"creates provider with correct basic info\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\trequire.NotNil(t, provider)\n\t\tassert.Equal(t, \"openai\", string(provider.ID))\n\t\tassert.Equal(t, \"OpenAI\", provider.Name)\n\t\tassert.Equal(t, \"openai-compat\", string(provider.Type))\n\t\tassert.Equal(t, \"$OPENAI_API_KEY\", provider.APIKey)\n\t\tassert.Equal(t, \"https://api.openai.com/v1\", provider.APIEndpoint)\n\t})\n\n\tt.Run(\"creates provider with default models\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\trequire.NotNil(t, provider)\n\t\tassert.NotEmpty(t, provider.Models)\n\t\tassert.Equal(t, \"gpt-4o\", provider.DefaultLargeModelID)\n\t\tassert.Equal(t, \"gpt-4o-mini\", provider.DefaultSmallModelID)\n\t})\n\n\tt.Run(\"does not create if already exists\", func(t *testing.T) {\n\t\texistingProvider := catwalk.Provider{ID: \"openai\"}\n\t\tprovider := OpenAIProvider([]catwalk.Provider{existingProvider})\n\n\t\tassert.Equal(t, \"\", string(provider.ID))\n\t})\n\n\tt.Run(\"has gpt-4o model\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\tvar gpt4oModel *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"gpt-4o\" {\n\t\t\t\tgpt4oModel = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, gpt4oModel)\n\t\tassert.Equal(t, \"GPT-4o\", gpt4oModel.Name)\n\t\tassert.Equal(t, 2.5, gpt4oModel.CostPer1MIn)\n\t\tassert.Equal(t, 10.0, gpt4oModel.CostPer1MOut)\n\t\tassert.True(t, gpt4oModel.SupportsImages)\n\t})\n\n\tt.Run(\"has gpt-4o-mini model\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\tvar miniModel *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"gpt-4o-mini\" {\n\t\t\t\tminiModel = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, miniModel)\n\t\tassert.Equal(t, \"GPT-4o Mini\", miniModel.Name)\n\t\tassert.Equal(t, 0.15, miniModel.CostPer1MIn)\n\t\tassert.Equal(t, 0.6, miniModel.CostPer1MOut)\n\t})\n\n\tt.Run(\"has gpt-5-2 model\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\tvar gpt52Model *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"gpt-5-2\" {\n\t\t\t\tgpt52Model = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, gpt52Model)\n\t\tassert.Equal(t, \"GPT-5.2\", gpt52Model.Name)\n\t\tassert.Equal(t, 1.75, gpt52Model.CostPer1MIn)\n\t\tassert.Equal(t, 7.0, gpt52Model.CostPer1MOut)\n\t})\n\n\tt.Run(\"has o1 reasoning model\", func(t *testing.T) {\n\t\tprovider := OpenAIProvider([]catwalk.Provider{})\n\n\t\tvar o1Model *catwalk.Model\n\t\tfor i := range provider.Models {\n\t\t\tif provider.Models[i].ID == \"o1\" {\n\t\t\t\to1Model = &provider.Models[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\trequire.NotNil(t, o1Model)\n\t\tassert.True(t, o1Model.CanReason)\n\t\tassert.Equal(t, 15.0, o1Model.CostPer1MIn)\n\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}