{
  "file_path": "/work/internal/agent/prompt/prompt_benchmark_test.go",
  "file_hash": "d69d4f7e65a32d5856457697f320cab5cfaf19fd",
  "updated_at": "2025-12-26T17:34:25.016018",
  "symbols": {
    "function_BenchmarkPromptBuild_12": {
      "name": "BenchmarkPromptBuild",
      "type": "function",
      "start_line": 12,
      "end_line": 38,
      "content_hash": "7a64a7173361c398df1a839528c3b59811a9edea",
      "content": "func BenchmarkPromptBuild(b *testing.B) {\n\ttempDir := b.TempDir()\n\tcfg, err := config.Load(tempDir, tempDir, false)\n\tif err != nil {\n\t\tb.Fatalf(\"Failed to load config: %v\", err)\n\t}\n\n\tfixedTime := time.Date(2025, 12, 18, 12, 0, 0, 0, time.UTC)\n\tp, err := NewPrompt(\"benchmark\", \"{{.DateTime}} {{.Platform}} {{.CurrentUser}}\", WithTimeFunc(func() time.Time {\n\t\treturn fixedTime\n\t}), WithWorkingDir(tempDir))\n\tif err != nil {\n\t\tb.Fatalf(\"Failed to create prompt: %v\", err)\n\t}\n\n\tctx := context.Background()\n\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_, err := p.Build(ctx, \"openai\", \"gpt-4\", *cfg)\n\t\tif err != nil {\n\t\t\tb.Fatalf(\"Build failed: %v\", err)\n\t\t}\n\t}\n}\n\n// BenchmarkEnvironmentDetection measures environment detection (uncached)",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkEnvironmentDetection_39": {
      "name": "BenchmarkEnvironmentDetection",
      "type": "function",
      "start_line": 39,
      "end_line": 54,
      "content_hash": "3f71e23e61b496954d63be18ebda3530cd8a3c2c",
      "content": "func BenchmarkEnvironmentDetection(b *testing.B) {\n\tctx := context.Background()\n\tworkingDir := b.TempDir()\n\n\t// Force cache invalidation for each iteration\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\tenvCache.Invalidate()\n\t\t_, err := envCache.Get(ctx, workingDir, false)\n\t\tif err != nil {\n\t\t\tb.Fatalf(\"Environment detection failed: %v\", err)\n\t\t}\n\t}\n}\n\n// BenchmarkEnvironmentDetectionCached measures cached environment lookups",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkEnvironmentDetectionCached_55": {
      "name": "BenchmarkEnvironmentDetectionCached",
      "type": "function",
      "start_line": 55,
      "end_line": 71,
      "content_hash": "6c08b7eb9620474b95d3f05e0b2bd4a7536a4fe3",
      "content": "func BenchmarkEnvironmentDetectionCached(b *testing.B) {\n\tctx := context.Background()\n\tworkingDir := b.TempDir()\n\n\t// Prime the cache\n\t_, _ = envCache.Get(ctx, workingDir, false)\n\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_, err := envCache.Get(ctx, workingDir, false)\n\t\tif err != nil {\n\t\t\tb.Fatalf(\"Environment detection failed: %v\", err)\n\t\t}\n\t}\n}\n\n// BenchmarkGetMemoryInfo measures memory info detection",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkGetMemoryInfo_72": {
      "name": "BenchmarkGetMemoryInfo",
      "type": "function",
      "start_line": 72,
      "end_line": 80,
      "content_hash": "38d95ec84ea260ddb49517b9c2024d89922c68ed",
      "content": "func BenchmarkGetMemoryInfo(b *testing.B) {\n\tctx := context.Background()\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_ = getMemoryInfo(ctx)\n\t}\n}\n\n// BenchmarkGetDiskInfo measures disk info detection",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkGetDiskInfo_81": {
      "name": "BenchmarkGetDiskInfo",
      "type": "function",
      "start_line": 81,
      "end_line": 90,
      "content_hash": "650e9a91ae3ff1c7f5a05ddaee08d840a37ab142",
      "content": "func BenchmarkGetDiskInfo(b *testing.B) {\n\tctx := context.Background()\n\tworkingDir := b.TempDir()\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_ = getDiskInfo(ctx, workingDir)\n\t}\n}\n\n// BenchmarkDetectContainer measures container detection",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkDetectContainer_91": {
      "name": "BenchmarkDetectContainer",
      "type": "function",
      "start_line": 91,
      "end_line": 99,
      "content_hash": "a839338b7af0de0f4e12d36684a60247fd06bd14",
      "content": "func BenchmarkDetectContainer(b *testing.B) {\n\tctx := context.Background()\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_ = detectContainer(ctx)\n\t}\n}\n\n// BenchmarkGetNetworkStatus measures network status detection",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkGetNetworkStatus_100": {
      "name": "BenchmarkGetNetworkStatus",
      "type": "function",
      "start_line": 100,
      "end_line": 108,
      "content_hash": "c475f6701f45b500c0a474cdc373e666ede733c6",
      "content": "func BenchmarkGetNetworkStatus(b *testing.B) {\n\tctx := context.Background()\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_ = getNetworkStatus(ctx)\n\t}\n}\n\n// BenchmarkPromptDataFull measures full prompt data collection",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_BenchmarkPromptDataFull_109": {
      "name": "BenchmarkPromptDataFull",
      "type": "function",
      "start_line": 109,
      "end_line": 133,
      "content_hash": "1d5c56d35571ea1997c4bae772db46f85d4dd73f",
      "content": "func BenchmarkPromptDataFull(b *testing.B) {\n\ttempDir := b.TempDir()\n\tcfg, err := config.Load(tempDir, tempDir, false)\n\tif err != nil {\n\t\tb.Fatalf(\"Failed to load config: %v\", err)\n\t}\n\n\tfixedTime := time.Date(2025, 12, 18, 12, 0, 0, 0, time.UTC)\n\tp, err := NewPrompt(\"benchmark\", \"{{.DateTime}}\", WithTimeFunc(func() time.Time {\n\t\treturn fixedTime\n\t}), WithWorkingDir(tempDir))\n\tif err != nil {\n\t\tb.Fatalf(\"Failed to create prompt: %v\", err)\n\t}\n\n\tctx := context.Background()\n\n\tb.ResetTimer()\n\tfor i := 0; i < b.N; i++ {\n\t\t_, err := p.promptData(ctx, \"openai\", \"gpt-4\", *cfg)\n\t\tif err != nil {\n\t\t\tb.Fatalf(\"promptData failed: %v\", err)\n\t\t}\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}