{
  "file_path": "/work/.github/workflows/ai-enhanced-autofix.yml",
  "file_hash": "9fd4044b35f4a6abb066d20a1283f5cf5219ef2f",
  "updated_at": "2025-12-26T17:34:23.859986",
  "symbols": {
    "key_name_1": {
      "name": "name",
      "type": "key",
      "start_line": 1,
      "end_line": 1,
      "content_hash": "0252f708ea11c3ae81abad7b4420bfacad1a77f2",
      "content": "name: AI-Enhanced Auto-Fix",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on_3": {
      "name": "on",
      "type": "key",
      "start_line": 3,
      "end_line": 10,
      "content_hash": "f1d385d27ef04e04097c49de095d4c1de1866e74",
      "content": "on:\n  workflow_run:\n    workflows: [\"lint\", \"build\"]\n    types:\n      - completed\n  issue_comment:\n    types: [created]\n  workflow_dispatch:",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.workflow_run_4": {
      "name": "on.workflow_run",
      "type": "key",
      "start_line": 4,
      "end_line": 7,
      "content_hash": "a75a95cb55d9b8b653d6f0c144a679a0a170d648",
      "content": "  workflow_run:\n    workflows: [\"lint\", \"build\"]\n    types:\n      - completed",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.workflow_run.workflows_5": {
      "name": "on.workflow_run.workflows",
      "type": "key",
      "start_line": 5,
      "end_line": 5,
      "content_hash": "3acffc653752d5103e1d3ce321c550643a3ead74",
      "content": "    workflows: [\"lint\", \"build\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.workflow_run.types_6": {
      "name": "on.workflow_run.types",
      "type": "key",
      "start_line": 6,
      "end_line": 7,
      "content_hash": "f605f479922d57a8e37ee5bc3c027cfbf069b23f",
      "content": "    types:\n      - completed",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.issue_comment_8": {
      "name": "on.issue_comment",
      "type": "key",
      "start_line": 8,
      "end_line": 9,
      "content_hash": "6b7dbd9cfe066671fe7d1b93edcfa7afb60bd117",
      "content": "  issue_comment:\n    types: [created]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.issue_comment.types_9": {
      "name": "on.issue_comment.types",
      "type": "key",
      "start_line": 9,
      "end_line": 9,
      "content_hash": "b55c067dd0679d982efb9b6a7c3d1fcbab1308c9",
      "content": "    types: [created]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_on.workflow_dispatch_10": {
      "name": "on.workflow_dispatch",
      "type": "key",
      "start_line": 10,
      "end_line": 10,
      "content_hash": "9d55e62244dd2e683f9f9153af7efd66d4894293",
      "content": "  workflow_dispatch:",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_permissions_12": {
      "name": "permissions",
      "type": "key",
      "start_line": 12,
      "end_line": 15,
      "content_hash": "bb9ef90be704210a90032cc4182ab867ff86366d",
      "content": "permissions:\n  contents: write\n  issues: write\n  pull-requests: write",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_permissions.contents_13": {
      "name": "permissions.contents",
      "type": "key",
      "start_line": 13,
      "end_line": 13,
      "content_hash": "b644604fc073674b19df700b21cc97981ea6a230",
      "content": "  contents: write",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_permissions.issues_14": {
      "name": "permissions.issues",
      "type": "key",
      "start_line": 14,
      "end_line": 14,
      "content_hash": "031bf5f315b87b4590942c80893b25ff4def832e",
      "content": "  issues: write",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_permissions.pull-requests_15": {
      "name": "permissions.pull-requests",
      "type": "key",
      "start_line": 15,
      "end_line": 15,
      "content_hash": "80329738cc990f1860d013ef6bf3fbf91304666c",
      "content": "  pull-requests: write",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs_17": {
      "name": "jobs",
      "type": "key",
      "start_line": 17,
      "end_line": 270,
      "content_hash": "36e838703d4bdd4a0d3afb8ad15cb98e168d1bb6",
      "content": "jobs:\n  analyze-and-fix:\n    runs-on: ubuntu-latest\n    if: |\n      (github.event.workflow_run && github.event.workflow_run.conclusion == 'failure') ||\n      (github.event.comment && contains(github.event.comment.body, '/ai-fix')) ||\n      github.event_name == 'workflow_dispatch'\n    \n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n          token: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Setup Go\n        uses: actions/setup-go@v5\n        with:\n          go-version: '1.25.5'\n          cache: true\n      \n      - name: Get workflow failure details\n        id: get-details\n        run: |\n          # Initialize variables\n          WORKFLOW_NAME=\"\"\n          WORKFLOW_URL=\"\"\n          FAILED_JOB=\"\"\n          ERROR_DETAILS=\"\"\n          \n          if [[ \"${{ github.event_name }}\" == \"workflow_run\" ]]; then\n            WORKFLOW_NAME=\"${{ github.event.workflow_run.name }}\"\n            WORKFLOW_URL=\"${{ github.event.workflow_run.html_url }}\"\n            \n            # Get the failed jobs from the workflow API\n            JOBS=$(gh api \"repos/${{ github.repository }}/actions/runs/${{ github.event.workflow_run.id }}/jobs\" --jq '.jobs[] | select(.conclusion == \"failure\") | {name: .name, steps: [.steps[] | select(.conclusion == \"failure\") | {name: .name, conclusion: .conclusion}]}' || echo \"[]\")\n            \n            # Extract error details\n            FAILED_JOB=$(echo \"$JOBS\" | jq -r '.[0].name // \"unknown\"')\n            ERROR_DETAILS=$(echo \"$JOBS\" | jq -r '.[0].steps | map(.name) | join(\", \") // \"unknown steps\"')\n          elif [[ \"${{ github.event_name }}\" == \"issue_comment\" ]]; then\n            WORKFLOW_NAME=\"Manual Request\"\n            WORKFLOW_URL=\"${{ github.event.issue.html_url }}\"\n            FAILED_JOB=\"Manual Trigger\"\n            ERROR_DETAILS=\"User requested AI fix\"\n          else\n            WORKFLOW_NAME=\"Manual Trigger\"\n            FAILED_JOB=\"Manual\"\n            ERROR_DETAILS=\"Manual workflow dispatch\"\n          fi\n          \n          echo \"workflow_name=$WORKFLOW_NAME\" >> $GITHUB_OUTPUT\n          echo \"workflow_url=$WORKFLOW_URL\" >> $GITHUB_OUTPUT\n          echo \"failed_job=$FAILED_JOB\" >> $GITHUB_OUTPUT\n          echo \"error_details=$ERROR_DETAILS\" >> $GITHUB_OUTPUT\n          echo \"issue_number=${{ github.event.issue.number || 0 }}\" >> $GITHUB_OUTPUT\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Run comprehensive auto-fix\n        id: autofix\n        run: |\n          echo \"\ud83e\udd16 Running AI-enhanced auto-fix for: ${{ steps.get-details.outputs.workflow_name }}\"\n          echo \"Failed job: ${{ steps.get-details.outputs.failed_job }}\"\n          echo \"Error details: ${{ steps.get-details.outputs.error_details }}\"\n          echo \"Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\"\n          \n          # Make script executable\n          chmod +x scripts/autofix.sh\n          \n          # Run auto-fix for all types (comprehensive fix)\n          if ./scripts/autofix.sh all /tmp/autofix-detailed.log; then\n            echo \"changes=true\" >> $GITHUB_OUTPUT\n            echo \"\u2705 Auto-fix applied successfully\"\n          else\n            echo \"changes=false\" >> $GITHUB_OUTPUT\n            echo \"\u2139\ufe0f No changes needed by auto-fix\"\n          fi\n          \n          # Display what was fixed\n          echo -e \"\\n=== AUTOFIX LOG ===\"\n          cat /tmp/autofix-detailed.log || echo \"No log file\"\n          echo -e \"\\n=== END LOG ===\"\n      \n      - name: Analyze remaining issues with AI\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udd0d No auto-fixes applied, analyzing with AI...\"\n          \n          # Try to run tests to get more detailed error info\n          echo \"Running tests to identify issues...\"\n          timeout 5m go test ./... 2>&1 | tee /tmp/test-errors.log || true\n          echo \"Running build to identify issues...\"\n          go build -v ./... 2>&1 | tee /tmp/build-errors.log || true\n          echo \"Running lint to identify issues...\"\n          golangci-lint run --max-issues-per-linter 0 --max-same-issues 0 2>&1 | tee /tmp/lint-errors.log || true\n          \n          # Create detailed error report\n          cat > /tmp/error-report.txt << EOF\n          Repository: ${{ github.repository }}\n          Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          Branch: ${{ github.ref_name }}\n          Commit: ${{ github.sha }}\n          \n          === TEST ERRORS ===\n          $(cat /tmp/test-errors.log | head -50)\n          \n          === BUILD ERRORS ===\n          $(cat /tmp/build-errors.log | head -50)\n          \n          === LINT ERRORS ===\n          $(cat /tmp/lint-errors.log | head -50)\n          EOF\n          \n          echo \"Error report created\"\n        continue-on-error: true\n      \n      - name: Create PR for auto-fixes\n        if: steps.autofix.outputs.changes == 'true'\n        run: |\n          echo \"\ud83d\udd17 Creating PR for auto-fixes...\"\n          \n          # Configure git\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"41898282+github-actions[bot]@users.noreply.github.com\"\n          \n          # Create branch\n          BRANCH_NAME=\"ai-autofix/${{ steps.get-details.outputs.workflow_name }}-$(date +%s)\"\n          git checkout -b \"$BRANCH_NAME\"\n          \n          # Add all changes\n          git add .\n          \n          # Commit with AI-enhanced message\n          git commit -m \"AI-auto-fix: resolve ${{ steps.get-details.outputs.workflow_name }} failures\n\n          Auto-generated fix for CI failure in: ${{ steps.get-details.outputs.failed_job }}\n          Error details: ${{ steps.get-details.outputs.error_details }}\n          Workflow: ${{ steps.get-details.outputs.workflow_url }}\n          \n          Fixes applied:\n          - Updated Go dependencies\n          - Fixed code formatting issues\n          - Resolved linting problems\n          - Fixed import organization\n          - Addressed build issues\n          \n          \ud83d\udc98 Generated with AI Auto-Fix System\n          \n          Assisted-by: Z.ai GLM 4.6 via Crush <crush@charm.land>\"\n          \n          # Push branch\n          git push origin \"$BRANCH_NAME\"\n          \n          # Create PR with detailed description\n          if command -v gh &> /dev/null; then\n            PR_BODY=\"This PR was auto-generated by the AI-enhanced auto-fix system to resolve CI failures.\n\n            **Failure Details:**\n            - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n            - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n            - Error: ${{ steps.get-details.outputs.error_details }}\n            - Branch: ${{ github.ref_name }}\n            - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n            **Auto-Fixes Applied:**\n            \u2705 Go dependency updates and cleanup\n            \u2705 Code formatting with gofmt\n            \u2705 Import organization with goimports\n            \u2705 Linting fixes with golangci-lint\n            \u2705 Build error resolution\n            \u2705 Test failure fixes (if applicable)\n\n            **Next Steps:**\n            1. Review the changes in this PR\n            2. Check that all fixes are appropriate\n            3. Merge if the fixes resolve the issues\n            4. Monitor CI to ensure success\n\n            ---\n            *Generated by AI Auto-Fix on $(date)*\"\n            \n            PR_URL=$(gh pr create \\\n              --title \"\ud83e\udd16 AI Auto-Fix: ${{ steps.get-details.outputs.workflow_name }} Failures\" \\\n              --body \"$PR_BODY\" \\\n              --label \"ai-autofix,ci-failure\" \\\n              --assignee ${{ github.actor }} || echo \"PR already exists\")\n            \n            echo \"\ud83d\udd17 AI Auto-Fix PR created: $PR_URL\"\n            \n            # Comment on triggering issue if applicable\n            if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n              gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\ud83e\udd16 I've automatically created a fix PR for the CI failure: $PR_URL\n\n              The AI auto-fix system has analyzed the failure and applied comprehensive fixes. Please review the PR and merge if the changes look correct.\"\n            fi\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Request detailed analysis (if no fixes)\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udcdd Creating issue for detailed analysis...\"\n          \n          # Create issue with error details\n          ISSUE_BODY=\"## CI Failure Needs Manual Review\n\n          **Failure Details:**\n          - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          - Error: ${{ steps.get-details.outputs.error_details }}\n          - Branch: ${{ github.ref_name }}\n          - Commit: ${{ github.sha }}\n          - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n          ## Issue Information\n          The AI auto-fix system ran but couldn't automatically resolve the issues. This requires manual investigation.\n\n          ## Steps Taken\n          \u2705 Ran comprehensive auto-fix script\n          \u2705 Fixed formatting and import issues\n          \u2705 Updated dependencies\n          \u274c Issues still persist\n\n          ## Manual Fix Required\n          Please review the workflow logs and apply manual fixes:\n          1. [View Workflow Logs](${{ steps.get-details.outputs.workflow_url }})\n          2. Check the specific error messages\n          3. Apply targeted fixes\n          4. Test locally with: \\`go test ./...\\` and \\`go build ./...\\`\n\n          ## Common Manual Fixes\n          - **Missing dependencies:** \\`go get <package>\\`\n          - **Type errors:** Check type mismatches in code\n          - **Import errors:** Verify all imports are correct\n          - **Test failures:** Check test logic and mocks\n\n          ---\n          *Created by AI Auto-Fix system on $(date)*\"\n          \n          if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n            gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\u274c AI auto-fix couldn't resolve all issues automatically. Manual review needed.\n\n          $ISSUE_BODY\"\n          else\n            gh issue create \\\n              --title \"\ud83d\udd0d Manual Review Needed: ${{ steps.get-details.outputs.workflow_name }} CI Failure\" \\\n              --body \"$ISSUE_BODY\" \\\n              --label \"needs-manual-fix,ci-failure\" || echo \"Issue already exists\"\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix_18": {
      "name": "jobs.analyze-and-fix",
      "type": "key",
      "start_line": 18,
      "end_line": 270,
      "content_hash": "8a964ca4a4a0c4e2b1f60a77b6646a361240393e",
      "content": "  analyze-and-fix:\n    runs-on: ubuntu-latest\n    if: |\n      (github.event.workflow_run && github.event.workflow_run.conclusion == 'failure') ||\n      (github.event.comment && contains(github.event.comment.body, '/ai-fix')) ||\n      github.event_name == 'workflow_dispatch'\n    \n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n          token: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Setup Go\n        uses: actions/setup-go@v5\n        with:\n          go-version: '1.25.5'\n          cache: true\n      \n      - name: Get workflow failure details\n        id: get-details\n        run: |\n          # Initialize variables\n          WORKFLOW_NAME=\"\"\n          WORKFLOW_URL=\"\"\n          FAILED_JOB=\"\"\n          ERROR_DETAILS=\"\"\n          \n          if [[ \"${{ github.event_name }}\" == \"workflow_run\" ]]; then\n            WORKFLOW_NAME=\"${{ github.event.workflow_run.name }}\"\n            WORKFLOW_URL=\"${{ github.event.workflow_run.html_url }}\"\n            \n            # Get the failed jobs from the workflow API\n            JOBS=$(gh api \"repos/${{ github.repository }}/actions/runs/${{ github.event.workflow_run.id }}/jobs\" --jq '.jobs[] | select(.conclusion == \"failure\") | {name: .name, steps: [.steps[] | select(.conclusion == \"failure\") | {name: .name, conclusion: .conclusion}]}' || echo \"[]\")\n            \n            # Extract error details\n            FAILED_JOB=$(echo \"$JOBS\" | jq -r '.[0].name // \"unknown\"')\n            ERROR_DETAILS=$(echo \"$JOBS\" | jq -r '.[0].steps | map(.name) | join(\", \") // \"unknown steps\"')\n          elif [[ \"${{ github.event_name }}\" == \"issue_comment\" ]]; then\n            WORKFLOW_NAME=\"Manual Request\"\n            WORKFLOW_URL=\"${{ github.event.issue.html_url }}\"\n            FAILED_JOB=\"Manual Trigger\"\n            ERROR_DETAILS=\"User requested AI fix\"\n          else\n            WORKFLOW_NAME=\"Manual Trigger\"\n            FAILED_JOB=\"Manual\"\n            ERROR_DETAILS=\"Manual workflow dispatch\"\n          fi\n          \n          echo \"workflow_name=$WORKFLOW_NAME\" >> $GITHUB_OUTPUT\n          echo \"workflow_url=$WORKFLOW_URL\" >> $GITHUB_OUTPUT\n          echo \"failed_job=$FAILED_JOB\" >> $GITHUB_OUTPUT\n          echo \"error_details=$ERROR_DETAILS\" >> $GITHUB_OUTPUT\n          echo \"issue_number=${{ github.event.issue.number || 0 }}\" >> $GITHUB_OUTPUT\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Run comprehensive auto-fix\n        id: autofix\n        run: |\n          echo \"\ud83e\udd16 Running AI-enhanced auto-fix for: ${{ steps.get-details.outputs.workflow_name }}\"\n          echo \"Failed job: ${{ steps.get-details.outputs.failed_job }}\"\n          echo \"Error details: ${{ steps.get-details.outputs.error_details }}\"\n          echo \"Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\"\n          \n          # Make script executable\n          chmod +x scripts/autofix.sh\n          \n          # Run auto-fix for all types (comprehensive fix)\n          if ./scripts/autofix.sh all /tmp/autofix-detailed.log; then\n            echo \"changes=true\" >> $GITHUB_OUTPUT\n            echo \"\u2705 Auto-fix applied successfully\"\n          else\n            echo \"changes=false\" >> $GITHUB_OUTPUT\n            echo \"\u2139\ufe0f No changes needed by auto-fix\"\n          fi\n          \n          # Display what was fixed\n          echo -e \"\\n=== AUTOFIX LOG ===\"\n          cat /tmp/autofix-detailed.log || echo \"No log file\"\n          echo -e \"\\n=== END LOG ===\"\n      \n      - name: Analyze remaining issues with AI\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udd0d No auto-fixes applied, analyzing with AI...\"\n          \n          # Try to run tests to get more detailed error info\n          echo \"Running tests to identify issues...\"\n          timeout 5m go test ./... 2>&1 | tee /tmp/test-errors.log || true\n          echo \"Running build to identify issues...\"\n          go build -v ./... 2>&1 | tee /tmp/build-errors.log || true\n          echo \"Running lint to identify issues...\"\n          golangci-lint run --max-issues-per-linter 0 --max-same-issues 0 2>&1 | tee /tmp/lint-errors.log || true\n          \n          # Create detailed error report\n          cat > /tmp/error-report.txt << EOF\n          Repository: ${{ github.repository }}\n          Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          Branch: ${{ github.ref_name }}\n          Commit: ${{ github.sha }}\n          \n          === TEST ERRORS ===\n          $(cat /tmp/test-errors.log | head -50)\n          \n          === BUILD ERRORS ===\n          $(cat /tmp/build-errors.log | head -50)\n          \n          === LINT ERRORS ===\n          $(cat /tmp/lint-errors.log | head -50)\n          EOF\n          \n          echo \"Error report created\"\n        continue-on-error: true\n      \n      - name: Create PR for auto-fixes\n        if: steps.autofix.outputs.changes == 'true'\n        run: |\n          echo \"\ud83d\udd17 Creating PR for auto-fixes...\"\n          \n          # Configure git\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"41898282+github-actions[bot]@users.noreply.github.com\"\n          \n          # Create branch\n          BRANCH_NAME=\"ai-autofix/${{ steps.get-details.outputs.workflow_name }}-$(date +%s)\"\n          git checkout -b \"$BRANCH_NAME\"\n          \n          # Add all changes\n          git add .\n          \n          # Commit with AI-enhanced message\n          git commit -m \"AI-auto-fix: resolve ${{ steps.get-details.outputs.workflow_name }} failures\n\n          Auto-generated fix for CI failure in: ${{ steps.get-details.outputs.failed_job }}\n          Error details: ${{ steps.get-details.outputs.error_details }}\n          Workflow: ${{ steps.get-details.outputs.workflow_url }}\n          \n          Fixes applied:\n          - Updated Go dependencies\n          - Fixed code formatting issues\n          - Resolved linting problems\n          - Fixed import organization\n          - Addressed build issues\n          \n          \ud83d\udc98 Generated with AI Auto-Fix System\n          \n          Assisted-by: Z.ai GLM 4.6 via Crush <crush@charm.land>\"\n          \n          # Push branch\n          git push origin \"$BRANCH_NAME\"\n          \n          # Create PR with detailed description\n          if command -v gh &> /dev/null; then\n            PR_BODY=\"This PR was auto-generated by the AI-enhanced auto-fix system to resolve CI failures.\n\n            **Failure Details:**\n            - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n            - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n            - Error: ${{ steps.get-details.outputs.error_details }}\n            - Branch: ${{ github.ref_name }}\n            - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n            **Auto-Fixes Applied:**\n            \u2705 Go dependency updates and cleanup\n            \u2705 Code formatting with gofmt\n            \u2705 Import organization with goimports\n            \u2705 Linting fixes with golangci-lint\n            \u2705 Build error resolution\n            \u2705 Test failure fixes (if applicable)\n\n            **Next Steps:**\n            1. Review the changes in this PR\n            2. Check that all fixes are appropriate\n            3. Merge if the fixes resolve the issues\n            4. Monitor CI to ensure success\n\n            ---\n            *Generated by AI Auto-Fix on $(date)*\"\n            \n            PR_URL=$(gh pr create \\\n              --title \"\ud83e\udd16 AI Auto-Fix: ${{ steps.get-details.outputs.workflow_name }} Failures\" \\\n              --body \"$PR_BODY\" \\\n              --label \"ai-autofix,ci-failure\" \\\n              --assignee ${{ github.actor }} || echo \"PR already exists\")\n            \n            echo \"\ud83d\udd17 AI Auto-Fix PR created: $PR_URL\"\n            \n            # Comment on triggering issue if applicable\n            if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n              gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\ud83e\udd16 I've automatically created a fix PR for the CI failure: $PR_URL\n\n              The AI auto-fix system has analyzed the failure and applied comprehensive fixes. Please review the PR and merge if the changes look correct.\"\n            fi\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Request detailed analysis (if no fixes)\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udcdd Creating issue for detailed analysis...\"\n          \n          # Create issue with error details\n          ISSUE_BODY=\"## CI Failure Needs Manual Review\n\n          **Failure Details:**\n          - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          - Error: ${{ steps.get-details.outputs.error_details }}\n          - Branch: ${{ github.ref_name }}\n          - Commit: ${{ github.sha }}\n          - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n          ## Issue Information\n          The AI auto-fix system ran but couldn't automatically resolve the issues. This requires manual investigation.\n\n          ## Steps Taken\n          \u2705 Ran comprehensive auto-fix script\n          \u2705 Fixed formatting and import issues\n          \u2705 Updated dependencies\n          \u274c Issues still persist\n\n          ## Manual Fix Required\n          Please review the workflow logs and apply manual fixes:\n          1. [View Workflow Logs](${{ steps.get-details.outputs.workflow_url }})\n          2. Check the specific error messages\n          3. Apply targeted fixes\n          4. Test locally with: \\`go test ./...\\` and \\`go build ./...\\`\n\n          ## Common Manual Fixes\n          - **Missing dependencies:** \\`go get <package>\\`\n          - **Type errors:** Check type mismatches in code\n          - **Import errors:** Verify all imports are correct\n          - **Test failures:** Check test logic and mocks\n\n          ---\n          *Created by AI Auto-Fix system on $(date)*\"\n          \n          if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n            gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\u274c AI auto-fix couldn't resolve all issues automatically. Manual review needed.\n\n          $ISSUE_BODY\"\n          else\n            gh issue create \\\n              --title \"\ud83d\udd0d Manual Review Needed: ${{ steps.get-details.outputs.workflow_name }} CI Failure\" \\\n              --body \"$ISSUE_BODY\" \\\n              --label \"needs-manual-fix,ci-failure\" || echo \"Issue already exists\"\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.runs-on_19": {
      "name": "jobs.analyze-and-fix.runs-on",
      "type": "key",
      "start_line": 19,
      "end_line": 19,
      "content_hash": "af41e65e8de6d5fac9a3ffe97c9153f19e320298",
      "content": "    runs-on: ubuntu-latest",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.if_20": {
      "name": "jobs.analyze-and-fix.if",
      "type": "key",
      "start_line": 20,
      "end_line": 23,
      "content_hash": "383441947695252536b8e8f5ddcda3948b221db5",
      "content": "    if: |\n      (github.event.workflow_run && github.event.workflow_run.conclusion == 'failure') ||\n      (github.event.comment && contains(github.event.comment.body, '/ai-fix')) ||\n      github.event_name == 'workflow_dispatch'",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps_25": {
      "name": "jobs.analyze-and-fix.steps",
      "type": "key",
      "start_line": 25,
      "end_line": 270,
      "content_hash": "2e593a29a64b849bee6add864af81e90186099c0",
      "content": "    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n          token: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Setup Go\n        uses: actions/setup-go@v5\n        with:\n          go-version: '1.25.5'\n          cache: true\n      \n      - name: Get workflow failure details\n        id: get-details\n        run: |\n          # Initialize variables\n          WORKFLOW_NAME=\"\"\n          WORKFLOW_URL=\"\"\n          FAILED_JOB=\"\"\n          ERROR_DETAILS=\"\"\n          \n          if [[ \"${{ github.event_name }}\" == \"workflow_run\" ]]; then\n            WORKFLOW_NAME=\"${{ github.event.workflow_run.name }}\"\n            WORKFLOW_URL=\"${{ github.event.workflow_run.html_url }}\"\n            \n            # Get the failed jobs from the workflow API\n            JOBS=$(gh api \"repos/${{ github.repository }}/actions/runs/${{ github.event.workflow_run.id }}/jobs\" --jq '.jobs[] | select(.conclusion == \"failure\") | {name: .name, steps: [.steps[] | select(.conclusion == \"failure\") | {name: .name, conclusion: .conclusion}]}' || echo \"[]\")\n            \n            # Extract error details\n            FAILED_JOB=$(echo \"$JOBS\" | jq -r '.[0].name // \"unknown\"')\n            ERROR_DETAILS=$(echo \"$JOBS\" | jq -r '.[0].steps | map(.name) | join(\", \") // \"unknown steps\"')\n          elif [[ \"${{ github.event_name }}\" == \"issue_comment\" ]]; then\n            WORKFLOW_NAME=\"Manual Request\"\n            WORKFLOW_URL=\"${{ github.event.issue.html_url }}\"\n            FAILED_JOB=\"Manual Trigger\"\n            ERROR_DETAILS=\"User requested AI fix\"\n          else\n            WORKFLOW_NAME=\"Manual Trigger\"\n            FAILED_JOB=\"Manual\"\n            ERROR_DETAILS=\"Manual workflow dispatch\"\n          fi\n          \n          echo \"workflow_name=$WORKFLOW_NAME\" >> $GITHUB_OUTPUT\n          echo \"workflow_url=$WORKFLOW_URL\" >> $GITHUB_OUTPUT\n          echo \"failed_job=$FAILED_JOB\" >> $GITHUB_OUTPUT\n          echo \"error_details=$ERROR_DETAILS\" >> $GITHUB_OUTPUT\n          echo \"issue_number=${{ github.event.issue.number || 0 }}\" >> $GITHUB_OUTPUT\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Run comprehensive auto-fix\n        id: autofix\n        run: |\n          echo \"\ud83e\udd16 Running AI-enhanced auto-fix for: ${{ steps.get-details.outputs.workflow_name }}\"\n          echo \"Failed job: ${{ steps.get-details.outputs.failed_job }}\"\n          echo \"Error details: ${{ steps.get-details.outputs.error_details }}\"\n          echo \"Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\"\n          \n          # Make script executable\n          chmod +x scripts/autofix.sh\n          \n          # Run auto-fix for all types (comprehensive fix)\n          if ./scripts/autofix.sh all /tmp/autofix-detailed.log; then\n            echo \"changes=true\" >> $GITHUB_OUTPUT\n            echo \"\u2705 Auto-fix applied successfully\"\n          else\n            echo \"changes=false\" >> $GITHUB_OUTPUT\n            echo \"\u2139\ufe0f No changes needed by auto-fix\"\n          fi\n          \n          # Display what was fixed\n          echo -e \"\\n=== AUTOFIX LOG ===\"\n          cat /tmp/autofix-detailed.log || echo \"No log file\"\n          echo -e \"\\n=== END LOG ===\"\n      \n      - name: Analyze remaining issues with AI\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udd0d No auto-fixes applied, analyzing with AI...\"\n          \n          # Try to run tests to get more detailed error info\n          echo \"Running tests to identify issues...\"\n          timeout 5m go test ./... 2>&1 | tee /tmp/test-errors.log || true\n          echo \"Running build to identify issues...\"\n          go build -v ./... 2>&1 | tee /tmp/build-errors.log || true\n          echo \"Running lint to identify issues...\"\n          golangci-lint run --max-issues-per-linter 0 --max-same-issues 0 2>&1 | tee /tmp/lint-errors.log || true\n          \n          # Create detailed error report\n          cat > /tmp/error-report.txt << EOF\n          Repository: ${{ github.repository }}\n          Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          Branch: ${{ github.ref_name }}\n          Commit: ${{ github.sha }}\n          \n          === TEST ERRORS ===\n          $(cat /tmp/test-errors.log | head -50)\n          \n          === BUILD ERRORS ===\n          $(cat /tmp/build-errors.log | head -50)\n          \n          === LINT ERRORS ===\n          $(cat /tmp/lint-errors.log | head -50)\n          EOF\n          \n          echo \"Error report created\"\n        continue-on-error: true\n      \n      - name: Create PR for auto-fixes\n        if: steps.autofix.outputs.changes == 'true'\n        run: |\n          echo \"\ud83d\udd17 Creating PR for auto-fixes...\"\n          \n          # Configure git\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"41898282+github-actions[bot]@users.noreply.github.com\"\n          \n          # Create branch\n          BRANCH_NAME=\"ai-autofix/${{ steps.get-details.outputs.workflow_name }}-$(date +%s)\"\n          git checkout -b \"$BRANCH_NAME\"\n          \n          # Add all changes\n          git add .\n          \n          # Commit with AI-enhanced message\n          git commit -m \"AI-auto-fix: resolve ${{ steps.get-details.outputs.workflow_name }} failures\n\n          Auto-generated fix for CI failure in: ${{ steps.get-details.outputs.failed_job }}\n          Error details: ${{ steps.get-details.outputs.error_details }}\n          Workflow: ${{ steps.get-details.outputs.workflow_url }}\n          \n          Fixes applied:\n          - Updated Go dependencies\n          - Fixed code formatting issues\n          - Resolved linting problems\n          - Fixed import organization\n          - Addressed build issues\n          \n          \ud83d\udc98 Generated with AI Auto-Fix System\n          \n          Assisted-by: Z.ai GLM 4.6 via Crush <crush@charm.land>\"\n          \n          # Push branch\n          git push origin \"$BRANCH_NAME\"\n          \n          # Create PR with detailed description\n          if command -v gh &> /dev/null; then\n            PR_BODY=\"This PR was auto-generated by the AI-enhanced auto-fix system to resolve CI failures.\n\n            **Failure Details:**\n            - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n            - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n            - Error: ${{ steps.get-details.outputs.error_details }}\n            - Branch: ${{ github.ref_name }}\n            - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n            **Auto-Fixes Applied:**\n            \u2705 Go dependency updates and cleanup\n            \u2705 Code formatting with gofmt\n            \u2705 Import organization with goimports\n            \u2705 Linting fixes with golangci-lint\n            \u2705 Build error resolution\n            \u2705 Test failure fixes (if applicable)\n\n            **Next Steps:**\n            1. Review the changes in this PR\n            2. Check that all fixes are appropriate\n            3. Merge if the fixes resolve the issues\n            4. Monitor CI to ensure success\n\n            ---\n            *Generated by AI Auto-Fix on $(date)*\"\n            \n            PR_URL=$(gh pr create \\\n              --title \"\ud83e\udd16 AI Auto-Fix: ${{ steps.get-details.outputs.workflow_name }} Failures\" \\\n              --body \"$PR_BODY\" \\\n              --label \"ai-autofix,ci-failure\" \\\n              --assignee ${{ github.actor }} || echo \"PR already exists\")\n            \n            echo \"\ud83d\udd17 AI Auto-Fix PR created: $PR_URL\"\n            \n            # Comment on triggering issue if applicable\n            if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n              gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\ud83e\udd16 I've automatically created a fix PR for the CI failure: $PR_URL\n\n              The AI auto-fix system has analyzed the failure and applied comprehensive fixes. Please review the PR and merge if the changes look correct.\"\n            fi\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n      \n      - name: Request detailed analysis (if no fixes)\n        if: steps.autofix.outputs.changes == 'false'\n        run: |\n          echo \"\ud83d\udcdd Creating issue for detailed analysis...\"\n          \n          # Create issue with error details\n          ISSUE_BODY=\"## CI Failure Needs Manual Review\n\n          **Failure Details:**\n          - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          - Error: ${{ steps.get-details.outputs.error_details }}\n          - Branch: ${{ github.ref_name }}\n          - Commit: ${{ github.sha }}\n          - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n          ## Issue Information\n          The AI auto-fix system ran but couldn't automatically resolve the issues. This requires manual investigation.\n\n          ## Steps Taken\n          \u2705 Ran comprehensive auto-fix script\n          \u2705 Fixed formatting and import issues\n          \u2705 Updated dependencies\n          \u274c Issues still persist\n\n          ## Manual Fix Required\n          Please review the workflow logs and apply manual fixes:\n          1. [View Workflow Logs](${{ steps.get-details.outputs.workflow_url }})\n          2. Check the specific error messages\n          3. Apply targeted fixes\n          4. Test locally with: \\`go test ./...\\` and \\`go build ./...\\`\n\n          ## Common Manual Fixes\n          - **Missing dependencies:** \\`go get <package>\\`\n          - **Type errors:** Check type mismatches in code\n          - **Import errors:** Verify all imports are correct\n          - **Test failures:** Check test logic and mocks\n\n          ---\n          *Created by AI Auto-Fix system on $(date)*\"\n          \n          if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n            gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\u274c AI auto-fix couldn't resolve all issues automatically. Manual review needed.\n\n          $ISSUE_BODY\"\n          else\n            gh issue create \\\n              --title \"\ud83d\udd0d Manual Review Needed: ${{ steps.get-details.outputs.workflow_name }} CI Failure\" \\\n              --body \"$ISSUE_BODY\" \\\n              --label \"needs-manual-fix,ci-failure\" || echo \"Issue already exists\"\n          fi\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_26": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 26,
      "end_line": 26,
      "content_hash": "34459d1f1131615ad3ed75da1b85fdb2e1bf0f30",
      "content": "      - name: Checkout repository",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.uses_27": {
      "name": "jobs.analyze-and-fix.steps.uses",
      "type": "key",
      "start_line": 27,
      "end_line": 27,
      "content_hash": "d7f1119ee118e6481c5dfff4c75c00d9d907227d",
      "content": "        uses: actions/checkout@v4",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with_28": {
      "name": "jobs.analyze-and-fix.steps.with",
      "type": "key",
      "start_line": 28,
      "end_line": 30,
      "content_hash": "023296d2aff6d0099899d911b3867caaf9769e4f",
      "content": "        with:\n          fetch-depth: 0\n          token: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with.fetch-depth_29": {
      "name": "jobs.analyze-and-fix.steps.with.fetch-depth",
      "type": "key",
      "start_line": 29,
      "end_line": 29,
      "content_hash": "687e678a957c0b91b601014b0e772738670300ff",
      "content": "          fetch-depth: 0",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with.token_30": {
      "name": "jobs.analyze-and-fix.steps.with.token",
      "type": "key",
      "start_line": 30,
      "end_line": 30,
      "content_hash": "56d847a4f7fdb39995a32290dc0c587bbdfef1e5",
      "content": "          token: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_32": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 32,
      "end_line": 32,
      "content_hash": "93f4dd4f1dd1548ecb37ebb7af9bf040d9cffe58",
      "content": "      - name: Setup Go",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.uses_33": {
      "name": "jobs.analyze-and-fix.steps.uses",
      "type": "key",
      "start_line": 33,
      "end_line": 33,
      "content_hash": "e33f1ceb982011bfd67014e5b803e3463ac6e856",
      "content": "        uses: actions/setup-go@v5",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with_34": {
      "name": "jobs.analyze-and-fix.steps.with",
      "type": "key",
      "start_line": 34,
      "end_line": 36,
      "content_hash": "9f0e24648bf99308f5982cc42bc1438d422593bd",
      "content": "        with:\n          go-version: '1.25.5'\n          cache: true",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with.go-version_35": {
      "name": "jobs.analyze-and-fix.steps.with.go-version",
      "type": "key",
      "start_line": 35,
      "end_line": 35,
      "content_hash": "d76c729dea5d9d41bc2de471229f1218592c6c6b",
      "content": "          go-version: '1.25.5'",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.with.cache_36": {
      "name": "jobs.analyze-and-fix.steps.with.cache",
      "type": "key",
      "start_line": 36,
      "end_line": 36,
      "content_hash": "77c6a1d310fca3b1f8c15b126e0a6ce8906824aa",
      "content": "          cache: true",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_38": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 38,
      "end_line": 38,
      "content_hash": "5522506e6247629e901f5e327d432adaf10761dd",
      "content": "      - name: Get workflow failure details",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.id_39": {
      "name": "jobs.analyze-and-fix.steps.id",
      "type": "key",
      "start_line": 39,
      "end_line": 39,
      "content_hash": "1acaa7f828d98cdb77e6387b86117596c6fa3d3d",
      "content": "        id: get-details",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.run_40": {
      "name": "jobs.analyze-and-fix.steps.run",
      "type": "key",
      "start_line": 40,
      "end_line": 72,
      "content_hash": "d503797f0e64a4efe572052531312bb837db75a0",
      "content": "        run: |\n          # Initialize variables\n          WORKFLOW_NAME=\"\"\n          WORKFLOW_URL=\"\"\n          FAILED_JOB=\"\"\n          ERROR_DETAILS=\"\"\n          \n          if [[ \"${{ github.event_name }}\" == \"workflow_run\" ]]; then\n            WORKFLOW_NAME=\"${{ github.event.workflow_run.name }}\"\n            WORKFLOW_URL=\"${{ github.event.workflow_run.html_url }}\"\n            \n            # Get the failed jobs from the workflow API\n            JOBS=$(gh api \"repos/${{ github.repository }}/actions/runs/${{ github.event.workflow_run.id }}/jobs\" --jq '.jobs[] | select(.conclusion == \"failure\") | {name: .name, steps: [.steps[] | select(.conclusion == \"failure\") | {name: .name, conclusion: .conclusion}]}' || echo \"[]\")\n            \n            # Extract error details\n            FAILED_JOB=$(echo \"$JOBS\" | jq -r '.[0].name // \"unknown\"')\n            ERROR_DETAILS=$(echo \"$JOBS\" | jq -r '.[0].steps | map(.name) | join(\", \") // \"unknown steps\"')\n          elif [[ \"${{ github.event_name }}\" == \"issue_comment\" ]]; then\n            WORKFLOW_NAME=\"Manual Request\"\n            WORKFLOW_URL=\"${{ github.event.issue.html_url }}\"\n            FAILED_JOB=\"Manual Trigger\"\n            ERROR_DETAILS=\"User requested AI fix\"\n          else\n            WORKFLOW_NAME=\"Manual Trigger\"\n            FAILED_JOB=\"Manual\"\n            ERROR_DETAILS=\"Manual workflow dispatch\"\n          fi\n          \n          echo \"workflow_name=$WORKFLOW_NAME\" >> $GITHUB_OUTPUT\n          echo \"workflow_url=$WORKFLOW_URL\" >> $GITHUB_OUTPUT\n          echo \"failed_job=$FAILED_JOB\" >> $GITHUB_OUTPUT\n          echo \"error_details=$ERROR_DETAILS\" >> $GITHUB_OUTPUT\n          echo \"issue_number=${{ github.event.issue.number || 0 }}\" >> $GITHUB_OUTPUT",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env_73": {
      "name": "jobs.analyze-and-fix.steps.env",
      "type": "key",
      "start_line": 73,
      "end_line": 74,
      "content_hash": "0a3e555b0db133463b7efb6dfacae930ad307581",
      "content": "        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env.GITHUB_TOKEN_74": {
      "name": "jobs.analyze-and-fix.steps.env.GITHUB_TOKEN",
      "type": "key",
      "start_line": 74,
      "end_line": 74,
      "content_hash": "ebae77721bd29fb2060bec6816e3da31156c51fd",
      "content": "          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_76": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 76,
      "end_line": 76,
      "content_hash": "b2f64e10301bf20bc3c74df44562a35d9d163187",
      "content": "      - name: Run comprehensive auto-fix",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.id_77": {
      "name": "jobs.analyze-and-fix.steps.id",
      "type": "key",
      "start_line": 77,
      "end_line": 77,
      "content_hash": "9b407307253f5a053fd2180be0dc389524454d18",
      "content": "        id: autofix",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.run_78": {
      "name": "jobs.analyze-and-fix.steps.run",
      "type": "key",
      "start_line": 78,
      "end_line": 99,
      "content_hash": "badd99a8dfc36fb719378e55e627cea1c941b302",
      "content": "        run: |\n          echo \"\ud83e\udd16 Running AI-enhanced auto-fix for: ${{ steps.get-details.outputs.workflow_name }}\"\n          echo \"Failed job: ${{ steps.get-details.outputs.failed_job }}\"\n          echo \"Error details: ${{ steps.get-details.outputs.error_details }}\"\n          echo \"Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\"\n          \n          # Make script executable\n          chmod +x scripts/autofix.sh\n          \n          # Run auto-fix for all types (comprehensive fix)\n          if ./scripts/autofix.sh all /tmp/autofix-detailed.log; then\n            echo \"changes=true\" >> $GITHUB_OUTPUT\n            echo \"\u2705 Auto-fix applied successfully\"\n          else\n            echo \"changes=false\" >> $GITHUB_OUTPUT\n            echo \"\u2139\ufe0f No changes needed by auto-fix\"\n          fi\n          \n          # Display what was fixed\n          echo -e \"\\n=== AUTOFIX LOG ===\"\n          cat /tmp/autofix-detailed.log || echo \"No log file\"\n          echo -e \"\\n=== END LOG ===\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_101": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 101,
      "end_line": 101,
      "content_hash": "8ccef46b5e6ffd69ed2474ff31d134c7e82736e6",
      "content": "      - name: Analyze remaining issues with AI",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.if_102": {
      "name": "jobs.analyze-and-fix.steps.if",
      "type": "key",
      "start_line": 102,
      "end_line": 102,
      "content_hash": "956b2a3cd6a28708d9f09a35be9ffb6211703ca9",
      "content": "        if: steps.autofix.outputs.changes == 'false'",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.run_103": {
      "name": "jobs.analyze-and-fix.steps.run",
      "type": "key",
      "start_line": 103,
      "end_line": 132,
      "content_hash": "682b173f449b911bbc089e097eac9ef03a7b9f63",
      "content": "        run: |\n          echo \"\ud83d\udd0d No auto-fixes applied, analyzing with AI...\"\n          \n          # Try to run tests to get more detailed error info\n          echo \"Running tests to identify issues...\"\n          timeout 5m go test ./... 2>&1 | tee /tmp/test-errors.log || true\n          echo \"Running build to identify issues...\"\n          go build -v ./... 2>&1 | tee /tmp/build-errors.log || true\n          echo \"Running lint to identify issues...\"\n          golangci-lint run --max-issues-per-linter 0 --max-same-issues 0 2>&1 | tee /tmp/lint-errors.log || true\n          \n          # Create detailed error report\n          cat > /tmp/error-report.txt << EOF\n          Repository: ${{ github.repository }}\n          Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          Branch: ${{ github.ref_name }}\n          Commit: ${{ github.sha }}\n          \n          === TEST ERRORS ===\n          $(cat /tmp/test-errors.log | head -50)\n          \n          === BUILD ERRORS ===\n          $(cat /tmp/build-errors.log | head -50)\n          \n          === LINT ERRORS ===\n          $(cat /tmp/lint-errors.log | head -50)\n          EOF\n          \n          echo \"Error report created\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.continue-on-error_133": {
      "name": "jobs.analyze-and-fix.steps.continue-on-error",
      "type": "key",
      "start_line": 133,
      "end_line": 133,
      "content_hash": "e38e54027c2a50ebf41028f99f1e53bf613b005f",
      "content": "        continue-on-error: true",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_135": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 135,
      "end_line": 135,
      "content_hash": "e5b2f4e70cc3a11f6e5aa7927f3da8b3ef50584d",
      "content": "      - name: Create PR for auto-fixes",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.if_136": {
      "name": "jobs.analyze-and-fix.steps.if",
      "type": "key",
      "start_line": 136,
      "end_line": 136,
      "content_hash": "bf747b76b3e14a1c12efbf0aeb014f9f87ae4600",
      "content": "        if: steps.autofix.outputs.changes == 'true'",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.run_137": {
      "name": "jobs.analyze-and-fix.steps.run",
      "type": "key",
      "start_line": 137,
      "end_line": 214,
      "content_hash": "daa08582d377cd95c64667720358ed9454c5ff63",
      "content": "        run: |\n          echo \"\ud83d\udd17 Creating PR for auto-fixes...\"\n          \n          # Configure git\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"41898282+github-actions[bot]@users.noreply.github.com\"\n          \n          # Create branch\n          BRANCH_NAME=\"ai-autofix/${{ steps.get-details.outputs.workflow_name }}-$(date +%s)\"\n          git checkout -b \"$BRANCH_NAME\"\n          \n          # Add all changes\n          git add .\n          \n          # Commit with AI-enhanced message\n          git commit -m \"AI-auto-fix: resolve ${{ steps.get-details.outputs.workflow_name }} failures\n\n          Auto-generated fix for CI failure in: ${{ steps.get-details.outputs.failed_job }}\n          Error details: ${{ steps.get-details.outputs.error_details }}\n          Workflow: ${{ steps.get-details.outputs.workflow_url }}\n          \n          Fixes applied:\n          - Updated Go dependencies\n          - Fixed code formatting issues\n          - Resolved linting problems\n          - Fixed import organization\n          - Addressed build issues\n          \n          \ud83d\udc98 Generated with AI Auto-Fix System\n          \n          Assisted-by: Z.ai GLM 4.6 via Crush <crush@charm.land>\"\n          \n          # Push branch\n          git push origin \"$BRANCH_NAME\"\n          \n          # Create PR with detailed description\n          if command -v gh &> /dev/null; then\n            PR_BODY=\"This PR was auto-generated by the AI-enhanced auto-fix system to resolve CI failures.\n\n            **Failure Details:**\n            - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n            - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n            - Error: ${{ steps.get-details.outputs.error_details }}\n            - Branch: ${{ github.ref_name }}\n            - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n            **Auto-Fixes Applied:**\n            \u2705 Go dependency updates and cleanup\n            \u2705 Code formatting with gofmt\n            \u2705 Import organization with goimports\n            \u2705 Linting fixes with golangci-lint\n            \u2705 Build error resolution\n            \u2705 Test failure fixes (if applicable)\n\n            **Next Steps:**\n            1. Review the changes in this PR\n            2. Check that all fixes are appropriate\n            3. Merge if the fixes resolve the issues\n            4. Monitor CI to ensure success\n\n            ---\n            *Generated by AI Auto-Fix on $(date)*\"\n            \n            PR_URL=$(gh pr create \\\n              --title \"\ud83e\udd16 AI Auto-Fix: ${{ steps.get-details.outputs.workflow_name }} Failures\" \\\n              --body \"$PR_BODY\" \\\n              --label \"ai-autofix,ci-failure\" \\\n              --assignee ${{ github.actor }} || echo \"PR already exists\")\n            \n            echo \"\ud83d\udd17 AI Auto-Fix PR created: $PR_URL\"\n            \n            # Comment on triggering issue if applicable\n            if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n              gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\ud83e\udd16 I've automatically created a fix PR for the CI failure: $PR_URL\n\n              The AI auto-fix system has analyzed the failure and applied comprehensive fixes. Please review the PR and merge if the changes look correct.\"\n            fi\n          fi",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env_215": {
      "name": "jobs.analyze-and-fix.steps.env",
      "type": "key",
      "start_line": 215,
      "end_line": 216,
      "content_hash": "0a3e555b0db133463b7efb6dfacae930ad307581",
      "content": "        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env.GITHUB_TOKEN_216": {
      "name": "jobs.analyze-and-fix.steps.env.GITHUB_TOKEN",
      "type": "key",
      "start_line": 216,
      "end_line": 216,
      "content_hash": "ebae77721bd29fb2060bec6816e3da31156c51fd",
      "content": "          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.name_218": {
      "name": "jobs.analyze-and-fix.steps.name",
      "type": "key",
      "start_line": 218,
      "end_line": 218,
      "content_hash": "a92a40beaee40250c0fccfdae41b2fecf8aeaaca",
      "content": "      - name: Request detailed analysis (if no fixes)",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.if_219": {
      "name": "jobs.analyze-and-fix.steps.if",
      "type": "key",
      "start_line": 219,
      "end_line": 219,
      "content_hash": "956b2a3cd6a28708d9f09a35be9ffb6211703ca9",
      "content": "        if: steps.autofix.outputs.changes == 'false'",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.run_220": {
      "name": "jobs.analyze-and-fix.steps.run",
      "type": "key",
      "start_line": 220,
      "end_line": 268,
      "content_hash": "79dd4c9db7c67b0fb80ccc00531d5f3e68ff7e10",
      "content": "        run: |\n          echo \"\ud83d\udcdd Creating issue for detailed analysis...\"\n          \n          # Create issue with error details\n          ISSUE_BODY=\"## CI Failure Needs Manual Review\n\n          **Failure Details:**\n          - Workflow: ${{ steps.get-details.outputs.workflow_name }}\n          - Failed Job: ${{ steps.get-details.outputs.failed_job }}\n          - Error: ${{ steps.get-details.outputs.error_details }}\n          - Branch: ${{ github.ref_name }}\n          - Commit: ${{ github.sha }}\n          - Workflow URL: ${{ steps.get-details.outputs.workflow_url }}\n\n          ## Issue Information\n          The AI auto-fix system ran but couldn't automatically resolve the issues. This requires manual investigation.\n\n          ## Steps Taken\n          \u2705 Ran comprehensive auto-fix script\n          \u2705 Fixed formatting and import issues\n          \u2705 Updated dependencies\n          \u274c Issues still persist\n\n          ## Manual Fix Required\n          Please review the workflow logs and apply manual fixes:\n          1. [View Workflow Logs](${{ steps.get-details.outputs.workflow_url }})\n          2. Check the specific error messages\n          3. Apply targeted fixes\n          4. Test locally with: \\`go test ./...\\` and \\`go build ./...\\`\n\n          ## Common Manual Fixes\n          - **Missing dependencies:** \\`go get <package>\\`\n          - **Type errors:** Check type mismatches in code\n          - **Import errors:** Verify all imports are correct\n          - **Test failures:** Check test logic and mocks\n\n          ---\n          *Created by AI Auto-Fix system on $(date)*\"\n          \n          if [[ \"${{ steps.get-details.outputs.issue_number }}\" != \"0\" ]]; then\n            gh issue comment ${{ steps.get-details.outputs.issue_number }} --body \"\u274c AI auto-fix couldn't resolve all issues automatically. Manual review needed.\n\n          $ISSUE_BODY\"\n          else\n            gh issue create \\\n              --title \"\ud83d\udd0d Manual Review Needed: ${{ steps.get-details.outputs.workflow_name }} CI Failure\" \\\n              --body \"$ISSUE_BODY\" \\\n              --label \"needs-manual-fix,ci-failure\" || echo \"Issue already exists\"\n          fi",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env_269": {
      "name": "jobs.analyze-and-fix.steps.env",
      "type": "key",
      "start_line": 269,
      "end_line": 270,
      "content_hash": "0a3e555b0db133463b7efb6dfacae930ad307581",
      "content": "        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_jobs.analyze-and-fix.steps.env.GITHUB_TOKEN_270": {
      "name": "jobs.analyze-and-fix.steps.env.GITHUB_TOKEN",
      "type": "key",
      "start_line": 270,
      "end_line": 270,
      "content_hash": "ebae77721bd29fb2060bec6816e3da31156c51fd",
      "content": "          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}