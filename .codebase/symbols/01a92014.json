{
  "file_path": "/work/external-deps/Context-Engine/tests/test_symbol_filename_boost.py",
  "file_hash": "a793c66c91df27892be83a8f4cdfd92a99c20cf2",
  "updated_at": "2025-12-26T17:34:23.830038",
  "symbols": {
    "class_TestSplitIdent_10": {
      "name": "TestSplitIdent",
      "type": "class",
      "start_line": 10,
      "end_line": 45,
      "content_hash": "7b027bd698d185958ee5d19fbdbdfdede49369f7",
      "content": "class TestSplitIdent:\n    \"\"\"Test identifier splitting for camelCase/snake_case.\"\"\"\n\n    def test_snake_case(self):\n        assert _split_ident(\"user_auth_handler\") == [\"user\", \"auth\", \"handler\"]\n\n    def test_camel_case(self):\n        assert _split_ident(\"userAuthHandler\") == [\"user\", \"auth\", \"handler\"]\n\n    def test_pascal_case(self):\n        assert _split_ident(\"UserAuthHandler\") == [\"user\", \"auth\", \"handler\"]\n\n    def test_acronym_handling(self):\n        # XMLParser -> xml, parser\n        result = _split_ident(\"XMLParser\")\n        assert \"xml\" in result\n        assert \"parser\" in result\n\n    def test_mixed_separators(self):\n        result = _split_ident(\"user_authHandler\")\n        assert \"user\" in result\n        assert \"auth\" in result\n        assert \"handler\" in result\n\n    def test_filters_stopwords(self):\n        # 'the' should be filtered\n        result = _split_ident(\"getTheValue\")\n        assert \"the\" not in result\n        assert \"get\" in result\n        assert \"value\" in result\n\n    def test_empty_string(self):\n        assert _split_ident(\"\") == []\n\n    def test_single_word(self):\n        assert _split_ident(\"handler\") == [\"handler\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_snake_case_13": {
      "name": "test_snake_case",
      "type": "method",
      "start_line": 13,
      "end_line": 14,
      "content_hash": "a81bf5eaed13affe5bbfb102e16b536c08bd80d7",
      "content": "    def test_snake_case(self):\n        assert _split_ident(\"user_auth_handler\") == [\"user\", \"auth\", \"handler\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_camel_case_16": {
      "name": "test_camel_case",
      "type": "method",
      "start_line": 16,
      "end_line": 17,
      "content_hash": "a073b7b72dba90f965e0ff5411506184d842c4c3",
      "content": "    def test_camel_case(self):\n        assert _split_ident(\"userAuthHandler\") == [\"user\", \"auth\", \"handler\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_pascal_case_19": {
      "name": "test_pascal_case",
      "type": "method",
      "start_line": 19,
      "end_line": 20,
      "content_hash": "be173ebf7649f6347ef6d2567206260e3aa242c5",
      "content": "    def test_pascal_case(self):\n        assert _split_ident(\"UserAuthHandler\") == [\"user\", \"auth\", \"handler\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_acronym_handling_22": {
      "name": "test_acronym_handling",
      "type": "method",
      "start_line": 22,
      "end_line": 26,
      "content_hash": "4f9f8df2d0d79a648787e25dbca89cab5431a5f5",
      "content": "    def test_acronym_handling(self):\n        # XMLParser -> xml, parser\n        result = _split_ident(\"XMLParser\")\n        assert \"xml\" in result\n        assert \"parser\" in result",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_mixed_separators_28": {
      "name": "test_mixed_separators",
      "type": "method",
      "start_line": 28,
      "end_line": 32,
      "content_hash": "04cd992e1d9d2738c0f54e58691b3d6bd040f248",
      "content": "    def test_mixed_separators(self):\n        result = _split_ident(\"user_authHandler\")\n        assert \"user\" in result\n        assert \"auth\" in result\n        assert \"handler\" in result",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_filters_stopwords_34": {
      "name": "test_filters_stopwords",
      "type": "method",
      "start_line": 34,
      "end_line": 39,
      "content_hash": "9a101aad3ba8d01eec08b1576a1c4b15c1eb052d",
      "content": "    def test_filters_stopwords(self):\n        # 'the' should be filtered\n        result = _split_ident(\"getTheValue\")\n        assert \"the\" not in result\n        assert \"get\" in result\n        assert \"value\" in result",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_empty_string_41": {
      "name": "test_empty_string",
      "type": "method",
      "start_line": 41,
      "end_line": 42,
      "content_hash": "0e6b677465930bcb1c54595d149609169fbe7883",
      "content": "    def test_empty_string(self):\n        assert _split_ident(\"\") == []",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_single_word_44": {
      "name": "test_single_word",
      "type": "method",
      "start_line": 44,
      "end_line": 45,
      "content_hash": "eac9e281d2ef415fdd8ff980194609fa47dc8006",
      "content": "    def test_single_word(self):\n        assert _split_ident(\"handler\") == [\"handler\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "class_TestSymbolPartMatching_48": {
      "name": "TestSymbolPartMatching",
      "type": "class",
      "start_line": 48,
      "end_line": 65,
      "content_hash": "79796d8f6dba71a4ff93c770b81f88cdc20f12a6",
      "content": "class TestSymbolPartMatching:\n    \"\"\"Test that symbol parts are correctly matched against queries.\"\"\"\n\n    def test_symbol_parts_extracted(self):\n        \"\"\"Verify split parts can match query tokens.\"\"\"\n        symbol = \"getUserById\"\n        parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        assert \"get\" in parts\n        assert \"user\" in parts\n        # \"by\" is filtered as stopword, \"id\" should remain\n        assert \"id\" in parts\n\n    def test_symbol_parts_from_snake_case(self):\n        symbol = \"calculate_total_price\"\n        parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        assert \"calculate\" in parts\n        assert \"total\" in parts\n        assert \"price\" in parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_symbol_parts_extracted_51": {
      "name": "test_symbol_parts_extracted",
      "type": "method",
      "start_line": 51,
      "end_line": 58,
      "content_hash": "c48420dacb7227aa19199bad17acc1687269b79d",
      "content": "    def test_symbol_parts_extracted(self):\n        \"\"\"Verify split parts can match query tokens.\"\"\"\n        symbol = \"getUserById\"\n        parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        assert \"get\" in parts\n        assert \"user\" in parts\n        # \"by\" is filtered as stopword, \"id\" should remain\n        assert \"id\" in parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_symbol_parts_from_snake_case_60": {
      "name": "test_symbol_parts_from_snake_case",
      "type": "method",
      "start_line": 60,
      "end_line": 65,
      "content_hash": "3b64d63a5fdda52890b87214c16c24acf8bdf9de",
      "content": "    def test_symbol_parts_from_snake_case(self):\n        symbol = \"calculate_total_price\"\n        parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        assert \"calculate\" in parts\n        assert \"total\" in parts\n        assert \"price\" in parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "class_TestFilenameBoostLogic_68": {
      "name": "TestFilenameBoostLogic",
      "type": "class",
      "start_line": 68,
      "end_line": 115,
      "content_hash": "7a4a9eefd429b4b0a60b77df8a24c0831af0a27d",
      "content": "class TestFilenameBoostLogic:\n    \"\"\"Test filename/stem matching boost logic.\"\"\"\n\n    def test_stem_extraction(self):\n        \"\"\"Verify stem is correctly extracted from path.\"\"\"\n        path = \"scripts/hybrid_search.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0] if \".\" in basename else basename\n        assert basename == \"hybrid_search.py\"\n        assert stem == \"hybrid_search\"\n\n    def test_stem_parts_extracted(self):\n        \"\"\"Verify stem parts match query tokens.\"\"\"\n        stem = \"hybrid_search\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"hybrid\" in stem_parts\n        assert \"search\" in stem_parts\n\n    def test_camelcase_filename_parts(self):\n        \"\"\"CamelCase filenames should be tokenized.\"\"\"\n        stem = \"UserAuthService\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"user\" in stem_parts\n        assert \"auth\" in stem_parts\n        assert \"service\" in stem_parts\n\n    def test_query_matches_stem(self):\n        \"\"\"Direct stem match should work.\"\"\"\n        path = \"utils/config_manager.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0]\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        # Query \"config\" should match\n        query = \"config\"\n        assert query == stem or query in stem_parts or query in basename\n\n    def test_query_matches_stem_part(self):\n        \"\"\"Query matching a stem part should boost.\"\"\"\n        stem = \"DatabaseConnection\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"database\" in stem_parts\n        assert \"connection\" in stem_parts\n\n    def test_short_query_filtered(self):\n        \"\"\"Queries < 3 chars should not trigger filename boost.\"\"\"\n        query = \"db\"\n        assert len(query) < 3  # Should be filtered in boost logic",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_stem_extraction_71": {
      "name": "test_stem_extraction",
      "type": "method",
      "start_line": 71,
      "end_line": 77,
      "content_hash": "b40e10dc99f6681095a469acd9ff583b0d960105",
      "content": "    def test_stem_extraction(self):\n        \"\"\"Verify stem is correctly extracted from path.\"\"\"\n        path = \"scripts/hybrid_search.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0] if \".\" in basename else basename\n        assert basename == \"hybrid_search.py\"\n        assert stem == \"hybrid_search\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_stem_parts_extracted_79": {
      "name": "test_stem_parts_extracted",
      "type": "method",
      "start_line": 79,
      "end_line": 84,
      "content_hash": "e593ae02d48c4a8a1e503137600a6aec135c14f5",
      "content": "    def test_stem_parts_extracted(self):\n        \"\"\"Verify stem parts match query tokens.\"\"\"\n        stem = \"hybrid_search\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"hybrid\" in stem_parts\n        assert \"search\" in stem_parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_camelcase_filename_parts_86": {
      "name": "test_camelcase_filename_parts",
      "type": "method",
      "start_line": 86,
      "end_line": 92,
      "content_hash": "b27a4ed82314bdc2f9d677ff84f7df8470223835",
      "content": "    def test_camelcase_filename_parts(self):\n        \"\"\"CamelCase filenames should be tokenized.\"\"\"\n        stem = \"UserAuthService\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"user\" in stem_parts\n        assert \"auth\" in stem_parts\n        assert \"service\" in stem_parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_query_matches_stem_94": {
      "name": "test_query_matches_stem",
      "type": "method",
      "start_line": 94,
      "end_line": 103,
      "content_hash": "15b5519257c60fef9209e414c8a655d75212b75a",
      "content": "    def test_query_matches_stem(self):\n        \"\"\"Direct stem match should work.\"\"\"\n        path = \"utils/config_manager.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0]\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        # Query \"config\" should match\n        query = \"config\"\n        assert query == stem or query in stem_parts or query in basename",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_query_matches_stem_part_105": {
      "name": "test_query_matches_stem_part",
      "type": "method",
      "start_line": 105,
      "end_line": 110,
      "content_hash": "ad533662223797dbaa08d9efb881fb6d12e8b506",
      "content": "    def test_query_matches_stem_part(self):\n        \"\"\"Query matching a stem part should boost.\"\"\"\n        stem = \"DatabaseConnection\"\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        assert \"database\" in stem_parts\n        assert \"connection\" in stem_parts",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_short_query_filtered_112": {
      "name": "test_short_query_filtered",
      "type": "method",
      "start_line": 112,
      "end_line": 115,
      "content_hash": "e6ab6464ced675b870c6941c96ca06efe5c757cf",
      "content": "    def test_short_query_filtered(self):\n        \"\"\"Queries < 3 chars should not trigger filename boost.\"\"\"\n        query = \"db\"\n        assert len(query) < 3  # Should be filtered in boost logic",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "class_TestBoostIntegration_118": {
      "name": "TestBoostIntegration",
      "type": "class",
      "start_line": 118,
      "end_line": 163,
      "content_hash": "393415bf1ff125bdfe201afea25f1a7ada148408",
      "content": "class TestBoostIntegration:\n    \"\"\"Integration tests for the boost logic patterns.\"\"\"\n\n    def test_pattern_symbol_equality_boost(self):\n        \"\"\"Test the pattern used in hybrid_search for symbol equality.\"\"\"\n        symbol = \"processUserData\"\n        sym = symbol.lower()\n        sym_parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        \n        # Query \"user\" should match via sym_parts\n        query = \"user\"\n        ql = query.lower()\n        matches = ql == sym or ql in sym_parts\n        assert matches, \"Query 'user' should match symbol part\"\n\n    def test_pattern_filename_boost(self):\n        \"\"\"Test the pattern used in hybrid_search for filename boost.\"\"\"\n        path = \"services/AuthenticationService.ts\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0] if \".\" in basename else basename\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        # Query \"authentication\" should trigger boost\n        query = \"authentication\"\n        ql = query.lower()\n        matches = (\n            len(ql) >= 3 and \n            (ql == stem or ql in stem_parts or ql in basename)\n        )\n        assert matches, \"Query 'authentication' should match filename\"\n\n    def test_pattern_no_boost_short_query(self):\n        \"\"\"Short queries should not get filename boost.\"\"\"\n        path = \"lib/db.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0]\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        query = \"db\"\n        ql = query.lower()\n        # This should NOT match due to len(ql) < 3 check\n        matches = (\n            len(ql) >= 3 and \n            (ql == stem or ql in stem_parts or ql in basename)\n        )\n        assert not matches, \"Short query should not trigger boost\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_pattern_symbol_equality_boost_121": {
      "name": "test_pattern_symbol_equality_boost",
      "type": "method",
      "start_line": 121,
      "end_line": 131,
      "content_hash": "4309424bd1a7e111513d86c87e4c97ee89792742",
      "content": "    def test_pattern_symbol_equality_boost(self):\n        \"\"\"Test the pattern used in hybrid_search for symbol equality.\"\"\"\n        symbol = \"processUserData\"\n        sym = symbol.lower()\n        sym_parts = set(p.lower() for p in _split_ident(symbol) if len(p) >= 2)\n        \n        # Query \"user\" should match via sym_parts\n        query = \"user\"\n        ql = query.lower()\n        matches = ql == sym or ql in sym_parts\n        assert matches, \"Query 'user' should match symbol part\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_pattern_filename_boost_133": {
      "name": "test_pattern_filename_boost",
      "type": "method",
      "start_line": 133,
      "end_line": 147,
      "content_hash": "505cee1681d2b675436ce9cbc31aa4bd628796dc",
      "content": "    def test_pattern_filename_boost(self):\n        \"\"\"Test the pattern used in hybrid_search for filename boost.\"\"\"\n        path = \"services/AuthenticationService.ts\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0] if \".\" in basename else basename\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        # Query \"authentication\" should trigger boost\n        query = \"authentication\"\n        ql = query.lower()\n        matches = (\n            len(ql) >= 3 and \n            (ql == stem or ql in stem_parts or ql in basename)\n        )\n        assert matches, \"Query 'authentication' should match filename\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_test_pattern_no_boost_short_query_149": {
      "name": "test_pattern_no_boost_short_query",
      "type": "method",
      "start_line": 149,
      "end_line": 163,
      "content_hash": "905e0b6055b033de3cefb45c784384595d873f3d",
      "content": "    def test_pattern_no_boost_short_query(self):\n        \"\"\"Short queries should not get filename boost.\"\"\"\n        path = \"lib/db.py\"\n        basename = path.rsplit(\"/\", 1)[-1].lower()\n        stem = basename.rsplit(\".\", 1)[0]\n        stem_parts = set(p.lower() for p in _split_ident(stem) if len(p) >= 2)\n        \n        query = \"db\"\n        ql = query.lower()\n        # This should NOT match due to len(ql) < 3 check\n        matches = (\n            len(ql) >= 3 and \n            (ql == stem or ql in stem_parts or ql in basename)\n        )\n        assert not matches, \"Short query should not trigger boost\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}