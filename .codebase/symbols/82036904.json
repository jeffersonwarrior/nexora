{
  "file_path": "/work/external-deps/claude-mem/scripts/translate-readme/cli.ts",
  "file_hash": "90e3d439f62c1ae4c111d482a8fe2aa5d7bc1729",
  "updated_at": "2025-12-26T17:34:20.722714",
  "symbols": {
    "function_printHelp_19": {
      "name": "printHelp",
      "type": "function",
      "start_line": 19,
      "end_line": 64,
      "content_hash": "333ea2082d2cc98af610eaf30b485a29316f92b3",
      "content": "function printHelp(): void {\n  console.log(`\nreadme-translator - Translate README.md files using Claude Agent SDK\n\nAUTHENTICATION:\n  If Claude Code is installed and authenticated (Pro/Max subscription),\n  no API key is needed. Otherwise, set ANTHROPIC_API_KEY environment variable.\n\nUSAGE:\n  translate-readme [options] <source> <languages...>\n  translate-readme --help\n  translate-readme --list-languages\n\nARGUMENTS:\n  source          Path to the source README.md file\n  languages       Target language codes (e.g., es fr de ja zh)\n\nOPTIONS:\n  -o, --output <dir>      Output directory (default: same as source)\n  -p, --pattern <pat>     Output filename pattern (default: README.{lang}.md)\n  --no-preserve-code      Translate code blocks too (not recommended)\n  -m, --model <model>     Claude model to use (default: sonnet)\n  --max-budget <usd>      Maximum budget in USD\n  -v, --verbose           Show detailed progress\n  -f, --force             Force re-translation ignoring cache\n  -h, --help              Show this help message\n  --list-languages        List all supported language codes\n\nEXAMPLES:\n  # Translate to Spanish and French (runs in parallel automatically)\n  translate-readme README.md es fr\n\n  # Translate to multiple languages with custom output\n  translate-readme -v -o ./i18n --pattern docs.{lang}.md README.md de ja ko zh\n\n  # Use in npm scripts\n  # package.json: \"translate\": \"translate-readme README.md es fr de\"\n\nPERFORMANCE:\n  All translations run in parallel automatically (up to 10 concurrent).\n  Cache prevents re-translating unchanged files.\n\nSUPPORTED LANGUAGES:\n  Run with --list-languages to see all supported language codes\n`);\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_printLanguages_66": {
      "name": "printLanguages",
      "type": "function",
      "start_line": 66,
      "end_line": 119,
      "content_hash": "3a128b42e10f5fe16c2ecf66ddcb2210073bf741",
      "content": "function printLanguages(): void {\n  const LANGUAGE_NAMES: Record<string, string> = {\n    // Tier 1 - No-brainers\n    zh: \"Chinese (Simplified)\",\n    ja: \"Japanese\",\n    \"pt-br\": \"Brazilian Portuguese\",\n    ko: \"Korean\",\n    es: \"Spanish\",\n    de: \"German\",\n    fr: \"French\",\n    // Tier 2 - Strong tech scenes\n    he: \"Hebrew\",\n    ar: \"Arabic\",\n    ru: \"Russian\",\n    pl: \"Polish\",\n    cs: \"Czech\",\n    nl: \"Dutch\",\n    tr: \"Turkish\",\n    uk: \"Ukrainian\",\n    // Tier 3 - Emerging/Growing fast\n    vi: \"Vietnamese\",\n    id: \"Indonesian\",\n    th: \"Thai\",\n    hi: \"Hindi\",\n    bn: \"Bengali\",\n    ro: \"Romanian\",\n    sv: \"Swedish\",\n    // Tier 4 - Why not\n    it: \"Italian\",\n    el: \"Greek\",\n    hu: \"Hungarian\",\n    fi: \"Finnish\",\n    da: \"Danish\",\n    no: \"Norwegian\",\n    // Other supported\n    bg: \"Bulgarian\",\n    et: \"Estonian\",\n    lt: \"Lithuanian\",\n    lv: \"Latvian\",\n    pt: \"Portuguese\",\n    sk: \"Slovak\",\n    sl: \"Slovenian\",\n    \"zh-tw\": \"Chinese (Traditional)\",\n  };\n\n  console.log(\"\\nSupported Language Codes:\\n\");\n  const sorted = Object.entries(LANGUAGE_NAMES).sort((a, b) =>\n    a[1].localeCompare(b[1])\n  );\n  for (const [code, name] of sorted) {\n    console.log(`  ${code.padEnd(8)} ${name}`);\n  }\n  console.log(\"\");\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_parseArgs_121": {
      "name": "parseArgs",
      "type": "function",
      "start_line": 121,
      "end_line": 188,
      "content_hash": "950cda4586a68fb039f682102a0d37709ca88092",
      "content": "function parseArgs(argv: string[]): CliArgs {\n  const args: CliArgs = {\n    source: \"\",\n    languages: [],\n    preserveCode: true,\n    verbose: false,\n    force: false,\n    help: false,\n    listLanguages: false,\n  };\n\n  const positional: string[] = [];\n  let i = 2; // Skip node and script path\n\n  while (i < argv.length) {\n    const arg = argv[i];\n\n    switch (arg) {\n      case \"-h\":\n      case \"--help\":\n        args.help = true;\n        break;\n      case \"--list-languages\":\n        args.listLanguages = true;\n        break;\n      case \"-v\":\n      case \"--verbose\":\n        args.verbose = true;\n        break;\n      case \"-f\":\n      case \"--force\":\n        args.force = true;\n        break;\n      case \"--no-preserve-code\":\n        args.preserveCode = false;\n        break;\n      case \"-o\":\n      case \"--output\":\n        args.outputDir = argv[++i];\n        break;\n      case \"-p\":\n      case \"--pattern\":\n        args.pattern = argv[++i];\n        break;\n      case \"-m\":\n      case \"--model\":\n        args.model = argv[++i];\n        break;\n      case \"--max-budget\":\n        args.maxBudget = parseFloat(argv[++i]);\n        break;\n      default:\n        if (arg.startsWith(\"-\")) {\n          console.error(`Unknown option: ${arg}`);\n          process.exit(1);\n        }\n        positional.push(arg);\n    }\n    i++;\n  }\n\n  if (positional.length > 0) {\n    args.source = positional[0];\n    args.languages = positional.slice(1);\n  }\n\n  return args;\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_main_190": {
      "name": "main",
      "type": "function",
      "start_line": 190,
      "end_line": 249,
      "content_hash": "eef30d183ec420964c3d777f2749ee923ae48706",
      "content": "async function main(): Promise<void> {\n  const args = parseArgs(process.argv);\n\n  if (args.help) {\n    printHelp();\n    process.exit(0);\n  }\n\n  if (args.listLanguages) {\n    printLanguages();\n    process.exit(0);\n  }\n\n  if (!args.source) {\n    console.error(\"Error: No source file specified\");\n    console.error(\"Run with --help for usage information\");\n    process.exit(1);\n  }\n\n  if (args.languages.length === 0) {\n    console.error(\"Error: No target languages specified\");\n    console.error(\"Run with --help for usage information\");\n    process.exit(1);\n  }\n\n  // Validate language codes\n  const invalidLangs = args.languages.filter(\n    (lang) => !SUPPORTED_LANGUAGES.includes(lang.toLowerCase())\n  );\n  if (invalidLangs.length > 0) {\n    console.error(`Error: Unknown language codes: ${invalidLangs.join(\", \")}`);\n    console.error(\"Run with --list-languages to see supported codes\");\n    process.exit(1);\n  }\n\n  try {\n    const result = await translateReadme({\n      source: args.source,\n      languages: args.languages,\n      outputDir: args.outputDir,\n      pattern: args.pattern,\n      preserveCode: args.preserveCode,\n      model: args.model,\n      maxBudgetUsd: args.maxBudget,\n      verbose: args.verbose,\n      force: args.force,\n    });\n\n    // Exit with error code if any translations failed\n    if (result.failed > 0) {\n      process.exit(1);\n    }\n  } catch (error) {\n    console.error(\n      \"Translation failed:\",\n      error instanceof Error ? error.message : error\n    );\n    process.exit(1);\n  }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}