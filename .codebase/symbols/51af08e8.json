{
  "file_path": "/work/external-deps/Context-Engine/scripts/mcp_impl/search_specialized.py",
  "file_hash": "6e772e69a45782785ccce49fc9428c0ffcfa6d3d",
  "updated_at": "2025-12-26T17:34:24.044138",
  "symbols": {
    "function__search_tests_for_impl_85": {
      "name": "_search_tests_for_impl",
      "type": "function",
      "start_line": 85,
      "end_line": 136,
      "content_hash": "f1c4dfa86b9e9de11ea22ed342ddcbf151f8a77b",
      "content": "async def _search_tests_for_impl(\n    query: Any = None,\n    limit: Any = None,\n    include_snippet: Any = None,\n    context_lines: Any = None,\n    under: Any = None,\n    language: Any = None,\n    session: Any = None,\n    compact: Any = None,\n    kwargs: Any = None,\n    ctx: Any = None,\n    repo_search_fn=None,\n) -> Dict[str, Any]:\n    \"\"\"Find test files related to a query.\n\n    What it does:\n    - Presets common test file globs and forwards to repo_search\n    - Accepts extra filters via kwargs (e.g., language, under, case)\n\n    Parameters:\n    - query: str or list[str]; limit; include_snippet/context_lines; under; language; compact\n\n    Returns: repo_search result shape.\n    \"\"\"\n    globs = list(TEST_GLOBS)\n    # Allow caller to add more with path_glob kwarg\n    # Handle kwargs being passed as a string by some MCP clients\n    _kwargs = _extract_kwargs_payload(kwargs) if kwargs else {}\n    extra_glob = _kwargs.get(\"path_glob\")\n    if extra_glob:\n        if isinstance(extra_glob, (list, tuple)):\n            globs.extend([str(x) for x in extra_glob])\n        else:\n            globs.append(str(extra_glob))\n    \n    if repo_search_fn is None:\n        from scripts.mcp_impl.search import _repo_search_impl\n        repo_search_fn = _repo_search_impl\n    \n    return await repo_search_fn(\n        query=query,\n        limit=limit,\n        include_snippet=include_snippet,\n        context_lines=context_lines,\n        under=under,\n        language=language,\n        path_glob=globs,\n        session=session,\n        compact=compact,\n        ctx=ctx,\n        kwargs={k: v for k, v in _kwargs.items() if k not in {\"path_glob\"}},\n    )",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function__search_config_for_impl_139": {
      "name": "_search_config_for_impl",
      "type": "function",
      "start_line": 139,
      "end_line": 184,
      "content_hash": "440a8b7fba41a9cb0bc515a55a3f75591f4d24a9",
      "content": "async def _search_config_for_impl(\n    query: Any = None,\n    limit: Any = None,\n    include_snippet: Any = None,\n    context_lines: Any = None,\n    under: Any = None,\n    session: Any = None,\n    compact: Any = None,\n    kwargs: Any = None,\n    ctx: Any = None,\n    repo_search_fn=None,\n) -> Dict[str, Any]:\n    \"\"\"Find likely configuration files for a service/query.\n\n    What it does:\n    - Presets config file globs (yaml/json/toml/etc.) and forwards to repo_search\n    - Accepts extra filters via kwargs\n\n    Returns: repo_search result shape.\n    \"\"\"\n    globs = list(CONFIG_GLOBS)\n    # Handle kwargs being passed as a string by some MCP clients\n    _kwargs = _extract_kwargs_payload(kwargs) if kwargs else {}\n    extra_glob = _kwargs.get(\"path_glob\")\n    if extra_glob:\n        if isinstance(extra_glob, (list, tuple)):\n            globs.extend([str(x) for x in extra_glob])\n        else:\n            globs.append(str(extra_glob))\n    \n    if repo_search_fn is None:\n        from scripts.mcp_impl.search import _repo_search_impl\n        repo_search_fn = _repo_search_impl\n    \n    return await repo_search_fn(\n        query=query,\n        limit=limit,\n        include_snippet=include_snippet,\n        context_lines=context_lines,\n        under=under,\n        session=session,\n        path_glob=globs,\n        compact=compact,\n        ctx=ctx,\n        kwargs={k: v for k, v in _kwargs.items() if k not in {\"path_glob\"}},\n    )",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function__search_callers_for_impl_187": {
      "name": "_search_callers_for_impl",
      "type": "function",
      "start_line": 187,
      "end_line": 216,
      "content_hash": "39c7b1b8d73f9962de5f0bd8a79d1819ac6cfb7f",
      "content": "async def _search_callers_for_impl(\n    query: Any = None,\n    limit: Any = None,\n    language: Any = None,\n    session: Any = None,\n    kwargs: Any = None,\n    ctx: Any = None,\n    repo_search_fn=None,\n) -> Dict[str, Any]:\n    \"\"\"Heuristic search for callers/usages of a symbol.\n\n    When to use:\n    - You want files that reference/invoke a function/class\n\n    Notes:\n    - Thin wrapper over repo_search today; pass language or path_glob to narrow\n    - Returns repo_search result shape\n    \"\"\"\n    if repo_search_fn is None:\n        from scripts.mcp_impl.search import _repo_search_impl\n        repo_search_fn = _repo_search_impl\n\n    return await repo_search_fn(\n        query=query,\n        limit=limit,\n        language=language,\n        session=session,\n        ctx=ctx,\n        kwargs=kwargs,\n    )",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function__search_importers_for_impl_219": {
      "name": "_search_importers_for_impl",
      "type": "function",
      "start_line": 219,
      "end_line": 259,
      "content_hash": "8df4aff92caaa9851705d9b4a6947fe084ec9acc",
      "content": "async def _search_importers_for_impl(\n    query: Any = None,\n    limit: Any = None,\n    language: Any = None,\n    session: Any = None,\n    kwargs: Any = None,\n    ctx: Any = None,\n    repo_search_fn=None,\n) -> Dict[str, Any]:\n    \"\"\"Find files likely importing or referencing a module/symbol.\n\n    What it does:\n    - Presets code globs across common languages; forwards to repo_search\n    - Accepts additional filters via kwargs (e.g., under, case)\n\n    Returns: repo_search result shape.\n    \"\"\"\n    globs = list(CODE_GLOBS)\n    # Handle kwargs being passed as a string by some MCP clients\n    _kwargs = _extract_kwargs_payload(kwargs) if kwargs else {}\n    extra_glob = _kwargs.get(\"path_glob\")\n    if extra_glob:\n        if isinstance(extra_glob, (list, tuple)):\n            globs.extend([str(x) for x in extra_glob])\n        else:\n            globs.append(str(extra_glob))\n\n    if repo_search_fn is None:\n        from scripts.mcp_impl.search import _repo_search_impl\n        repo_search_fn = _repo_search_impl\n\n    # Forward to repo_search with preset path_glob; caller can still pass other filters\n    return await repo_search_fn(\n        query=query,\n        limit=limit,\n        language=language,\n        path_glob=globs,\n        session=session,\n        ctx=ctx,\n        kwargs={k: v for k, v in _kwargs.items() if k not in {\"path_glob\"}},\n    )",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}