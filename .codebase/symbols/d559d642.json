{
  "file_path": "/work/external-deps/helix-db/helix-db/src/helix_engine/traversal_core/ops/vectors/brute_force_search.rs",
  "file_hash": "84ed467f813485471c3d8e44af66f79642faa322",
  "updated_at": "2025-12-26T17:34:20.371466",
  "symbols": {
    "trait_BruteForceSearchVAdapter_8": {
      "name": "BruteForceSearchVAdapter",
      "type": "trait",
      "start_line": 8,
      "end_line": 18,
      "content_hash": "63e46539417ded18ba641a4f6a8ae7bfb281de3f",
      "content": "pub trait BruteForceSearchVAdapter<'db, 'arena, 'txn>:\n    Iterator<Item = Result<TraversalValue<'arena>, GraphError>>\n{\n    fn brute_force_search_v<K>(\n        self,\n        query: &'arena [f64],\n        k: K,\n    ) -> RoTraversalIterator<\n        'db,\n        'arena,\n        'txn,",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Iterator_19": {
      "name": "Iterator",
      "type": "impl",
      "start_line": 19,
      "end_line": 36,
      "content_hash": "a4534f463c191ca6be9e91eb53f55cb55ce6f20a",
      "content": "        impl Iterator<Item = Result<TraversalValue<'arena>, GraphError>>,\n    >\n    where\n        K: TryInto<usize>,\n        K::Error: std::fmt::Debug;\n}\n\nimpl<'db, 'arena, 'txn, I: Iterator<Item = Result<TraversalValue<'arena>, GraphError>>>\n    BruteForceSearchVAdapter<'db, 'arena, 'txn> for RoTraversalIterator<'db, 'arena, 'txn, I>\n{\n    fn brute_force_search_v<K>(\n        self,\n        query: &'arena [f64],\n        k: K,\n    ) -> RoTraversalIterator<\n        'db,\n        'arena,\n        'txn,",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Iterator_37": {
      "name": "Iterator",
      "type": "impl",
      "start_line": 37,
      "end_line": 82,
      "content_hash": "f27c99fd0d628d4e39b402049b3714eec542c512",
      "content": "        impl Iterator<Item = Result<TraversalValue<'arena>, GraphError>>,\n    >\n    where\n        K: TryInto<usize>,\n        K::Error: std::fmt::Debug,\n    {\n        let iter = self\n            .inner\n            .filter_map(|v| match v {\n                Ok(TraversalValue::Vector(mut v)) => {\n                    let d = cosine_similarity(v.data, query).unwrap();\n                    v.set_distance(d);\n                    Some(v)\n                }\n                _ => None,\n            })\n            .sorted_by(|v1, v2| v1.partial_cmp(v2).unwrap())\n            .take(k.try_into().unwrap())\n            .filter_map(move |mut item| {\n                match self\n                    .storage\n                    .vectors\n                    .get_vector_properties(self.txn, *item.id(), self.arena)\n                {\n                    Ok(Some(vector_without_data)) => {\n                        item.expand_from_vector_without_data(vector_without_data);\n                        Some(item)\n                    }\n\n                    Ok(None) => None, // TODO: maybe should be an error?\n                    Err(e) => {\n                        println!(\"error getting vector data: {e:?}\");\n                        None\n                    }\n                }\n            })\n            .map(|v| Ok(TraversalValue::Vector(v)));\n\n        RoTraversalIterator {\n            storage: self.storage,\n            arena: self.arena,\n            txn: self.txn,\n            inner: iter.into_iter(),\n        }\n    }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}