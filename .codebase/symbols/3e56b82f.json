{
  "file_path": "/work/external-deps/claude-mem/src/ui/viewer/components/TerminalPreview.tsx",
  "file_hash": "00f499e6c9d21d049cd9c62a78fab9c4230505e3",
  "updated_at": "2025-12-26T17:34:23.960571",
  "symbols": {
    "function_TerminalPreview_18": {
      "name": "TerminalPreview",
      "type": "function",
      "start_line": 18,
      "end_line": 136,
      "content_hash": "4a428d39166783afb0e3461e3d32fc1e394e21dc",
      "content": "export function TerminalPreview({ content, isLoading = false, className = '' }: TerminalPreviewProps) {\n  const preRef = useRef<HTMLPreElement>(null);\n  const scrollTopRef = useRef(0);\n  const [wordWrap, setWordWrap] = useState(true);\n\n  const html = useMemo(() => {\n    // Save scroll position before content changes\n    if (preRef.current) {\n      scrollTopRef.current = preRef.current.scrollTop;\n    }\n    if (!content) return '';\n    return ansiConverter.toHtml(content);\n  }, [content]);\n\n  // Restore scroll position after render\n  useLayoutEffect(() => {\n    if (preRef.current && scrollTopRef.current > 0) {\n      preRef.current.scrollTop = scrollTopRef.current;\n    }\n  }, [html]);\n\n  const preStyle: React.CSSProperties = {\n    padding: '16px',\n    margin: 0,\n    fontFamily: 'var(--font-terminal)',\n    fontSize: '12px',\n    lineHeight: '1.6',\n    overflow: 'auto',\n    color: 'var(--color-text-primary)',\n    backgroundColor: 'var(--color-bg-card)',\n    whiteSpace: wordWrap ? 'pre-wrap' : 'pre',\n    wordBreak: wordWrap ? 'break-word' : 'normal',\n    position: 'absolute',\n    inset: 0,\n  };\n\n  return (\n    <div\n      className={className}\n      style={{\n        backgroundColor: 'var(--color-bg-card)',\n        border: '1px solid var(--color-border-primary)',\n        borderRadius: '8px',\n        overflow: 'hidden',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 10px 40px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3)'\n      }}\n    >\n      {/* Window chrome */}\n      <div\n        style={{\n          padding: '12px',\n          borderBottom: '1px solid var(--color-border-primary)',\n          display: 'flex',\n          gap: '6px',\n          alignItems: 'center',\n          backgroundColor: 'var(--color-bg-header)'\n        }}\n      >\n        <div style={{ width: '12px', height: '12px', borderRadius: '50%', backgroundColor: '#ff5f57' }} />\n        <div style={{ width: '12px', height: '12px', borderRadius: '50%', backgroundColor: '#ffbd2e' }} />\n        <div style={{ width: '12px', height: '12px', borderRadius: '50%', backgroundColor: '#28c840' }} />\n\n        <button\n          onClick={() => setWordWrap(!wordWrap)}\n          style={{\n            marginLeft: 'auto',\n            padding: '4px 8px',\n            fontSize: '11px',\n            fontWeight: 500,\n            color: wordWrap ? 'var(--color-text-secondary)' : 'var(--color-accent-primary)',\n            backgroundColor: 'transparent',\n            border: '1px solid',\n            borderColor: wordWrap ? 'var(--color-border-primary)' : 'var(--color-accent-primary)',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            transition: 'all 0.2s',\n            whiteSpace: 'nowrap'\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.borderColor = 'var(--color-accent-primary)';\n            e.currentTarget.style.color = 'var(--color-accent-primary)';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.borderColor = wordWrap ? 'var(--color-border-primary)' : 'var(--color-accent-primary)';\n            e.currentTarget.style.color = wordWrap ? 'var(--color-text-secondary)' : 'var(--color-accent-primary)';\n          }}\n          title={wordWrap ? 'Disable word wrap (scroll horizontally)' : 'Enable word wrap'}\n        >\n          {wordWrap ? '\u2922 Wrap' : '\u21c4 Scroll'}\n        </button>\n      </div>\n\n      {/* Content area */}\n      {isLoading ? (\n        <div\n          style={{\n            padding: '16px',\n            fontFamily: 'var(--font-terminal)',\n            fontSize: '12px',\n            color: 'var(--color-text-secondary)'\n          }}\n        >\n          Loading preview...\n        </div>\n      ) : (\n        <div style={{ position: 'relative', flex: 1, overflow: 'hidden' }}>\n          <pre\n            ref={preRef}\n            style={preStyle}\n            dangerouslySetInnerHTML={{ __html: html }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}