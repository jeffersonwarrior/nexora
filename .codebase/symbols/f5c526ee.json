{
  "file_path": "/work/internal/tui/components/dialogs/permissions/permissions.go",
  "file_hash": "9abaa67a3b1515173c2dfe4e922a919271c5c22f",
  "updated_at": "2025-12-26T17:34:20.466356",
  "symbols": {
    "struct_PermissionResponseMsg_35": {
      "name": "PermissionResponseMsg",
      "type": "struct",
      "start_line": 35,
      "end_line": 40,
      "content_hash": "13fca5226d8406f352fb37aff9eefe2c1cd58c54",
      "content": "type PermissionResponseMsg struct {\n\tPermission permission.PermissionRequest\n\tAction     PermissionAction\n}\n\n// PermissionDialogCmp interface for permission dialog component",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "interface_PermissionDialogCmp_41": {
      "name": "PermissionDialogCmp",
      "type": "interface",
      "start_line": 41,
      "end_line": 45,
      "content_hash": "b2e261614df19e2ee50016c0887d47eebc7f3e13",
      "content": "type PermissionDialogCmp interface {\n\tdialogs.DialogModel\n}\n\n// permissionDialogCmp is the implementation of PermissionDialog",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_permissionDialogCmp_46": {
      "name": "permissionDialogCmp",
      "type": "struct",
      "start_line": 46,
      "end_line": 72,
      "content_hash": "ced12e0a8363ed0075d9bb2e08ff9a33649be5b5",
      "content": "type permissionDialogCmp struct {\n\twWidth          int\n\twHeight         int\n\twidth           int\n\theight          int\n\tpermission      permission.PermissionRequest\n\tcontentViewPort viewport.Model\n\tselectedOption  int // 0: Allow, 1: Allow for session, 2: Deny\n\n\t// Diff view state\n\tdefaultDiffSplitMode bool  // true for split, false for unified\n\tdiffSplitMode        *bool // nil means use defaultDiffSplitMode\n\tdiffXOffset          int   // horizontal scroll offset\n\tdiffYOffset          int   // vertical scroll offset\n\n\t// Caching\n\tcachedContent string\n\tcontentDirty  bool\n\n\tpositionRow int // Row position for dialog\n\tpositionCol int // Column position for dialog\n\n\tfinalDialogHeight int\n\n\tkeyMap KeyMap\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewPermissionDialogCmp_73": {
      "name": "NewPermissionDialogCmp",
      "type": "function",
      "start_line": 73,
      "end_line": 89,
      "content_hash": "5cbaebeb4f38970cfdaf826d5a9a9260d1cbe773",
      "content": "func NewPermissionDialogCmp(permission permission.PermissionRequest, opts *Options) PermissionDialogCmp {\n\tif opts == nil {\n\t\topts = &Options{}\n\t}\n\n\t// Create viewport for content\n\tcontentViewport := viewport.New()\n\treturn &permissionDialogCmp{\n\t\tcontentViewPort: contentViewport,\n\t\tselectedOption:  0, // Default to \"Allow\"\n\t\tpermission:      permission,\n\t\tdiffSplitMode:   opts.isSplitMode(),\n\t\tkeyMap:          DefaultKeyMap(),\n\t\tcontentDirty:    true, // Mark as dirty initially\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Init_90": {
      "name": "Init",
      "type": "method",
      "start_line": 90,
      "end_line": 93,
      "content_hash": "db968465c15c58aa9a9a505646f814f4e0f8471d",
      "content": "func (p *permissionDialogCmp) Init() tea.Cmd {\n\treturn p.contentViewPort.Init()\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_supportsDiffView_94": {
      "name": "supportsDiffView",
      "type": "method",
      "start_line": 94,
      "end_line": 97,
      "content_hash": "73ae9b2e2a1bf8ae94e2ca3038eb9292e48442f5",
      "content": "func (p *permissionDialogCmp) supportsDiffView() bool {\n\treturn p.permission.ToolName == tools.EditToolName || p.permission.ToolName == tools.WriteToolName || p.permission.ToolName == tools.MultiEditToolName\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Update_98": {
      "name": "Update",
      "type": "method",
      "start_line": 98,
      "end_line": 186,
      "content_hash": "84b70029692681e0455978f5115ff403111c2653",
      "content": "func (p *permissionDialogCmp) Update(msg tea.Msg) (util.Model, tea.Cmd) {\n\tvar cmds []tea.Cmd\n\n\tswitch msg := msg.(type) {\n\tcase tea.WindowSizeMsg:\n\t\tp.wWidth = msg.Width\n\t\tp.wHeight = msg.Height\n\t\tp.contentDirty = true // Mark content as dirty on window resize\n\t\tcmd := p.SetSize()\n\t\tcmds = append(cmds, cmd)\n\tcase tea.KeyPressMsg:\n\t\tswitch {\n\t\tcase key.Matches(msg, p.keyMap.Right) || key.Matches(msg, p.keyMap.Tab):\n\t\t\tp.selectedOption = (p.selectedOption + 1) % 3\n\t\t\treturn p, nil\n\t\tcase key.Matches(msg, p.keyMap.Left):\n\t\t\tp.selectedOption = (p.selectedOption + 2) % 3\n\t\tcase key.Matches(msg, p.keyMap.Select):\n\t\t\treturn p, p.selectCurrentOption()\n\t\tcase key.Matches(msg, p.keyMap.Allow):\n\t\t\treturn p, tea.Batch(\n\t\t\t\tutil.CmdHandler(dialogs.CloseDialogMsg{}),\n\t\t\t\tutil.CmdHandler(PermissionResponseMsg{Action: PermissionAllow, Permission: p.permission}),\n\t\t\t)\n\t\tcase key.Matches(msg, p.keyMap.AllowSession):\n\t\t\treturn p, tea.Batch(\n\t\t\t\tutil.CmdHandler(dialogs.CloseDialogMsg{}),\n\t\t\t\tutil.CmdHandler(PermissionResponseMsg{Action: PermissionAllowForSession, Permission: p.permission}),\n\t\t\t)\n\t\tcase key.Matches(msg, p.keyMap.Deny):\n\t\t\treturn p, tea.Batch(\n\t\t\t\tutil.CmdHandler(dialogs.CloseDialogMsg{}),\n\t\t\t\tutil.CmdHandler(PermissionResponseMsg{Action: PermissionDeny, Permission: p.permission}),\n\t\t\t)\n\t\tcase key.Matches(msg, p.keyMap.ToggleDiffMode):\n\t\t\tif p.supportsDiffView() {\n\t\t\t\tif p.diffSplitMode == nil {\n\t\t\t\t\tdiffSplitMode := !p.defaultDiffSplitMode\n\t\t\t\t\tp.diffSplitMode = &diffSplitMode\n\t\t\t\t} else {\n\t\t\t\t\t*p.diffSplitMode = !*p.diffSplitMode\n\t\t\t\t}\n\t\t\t\tp.contentDirty = true // Mark content as dirty when diff mode changes\n\t\t\t\treturn p, nil\n\t\t\t}\n\t\tcase key.Matches(msg, p.keyMap.ScrollDown):\n\t\t\tif p.supportsDiffView() {\n\t\t\t\tp.scrollDown()\n\t\t\t\treturn p, nil\n\t\t\t}\n\t\tcase key.Matches(msg, p.keyMap.ScrollUp):\n\t\t\tif p.supportsDiffView() {\n\t\t\t\tp.scrollUp()\n\t\t\t\treturn p, nil\n\t\t\t}\n\t\tcase key.Matches(msg, p.keyMap.ScrollLeft):\n\t\t\tif p.supportsDiffView() {\n\t\t\t\tp.scrollLeft()\n\t\t\t\treturn p, nil\n\t\t\t}\n\t\tcase key.Matches(msg, p.keyMap.ScrollRight):\n\t\t\tif p.supportsDiffView() {\n\t\t\t\tp.scrollRight()\n\t\t\t\treturn p, nil\n\t\t\t}\n\t\tdefault:\n\t\t\t// Pass other keys to viewport\n\t\t\tviewPort, cmd := p.contentViewPort.Update(msg)\n\t\t\tp.contentViewPort = viewPort\n\t\t\tcmds = append(cmds, cmd)\n\t\t}\n\tcase tea.MouseWheelMsg:\n\t\tif p.supportsDiffView() && p.isMouseOverDialog(msg.Mouse().X, msg.Mouse().Y) {\n\t\t\tswitch msg.Button {\n\t\t\tcase tea.MouseWheelDown:\n\t\t\t\tp.scrollDown()\n\t\t\tcase tea.MouseWheelUp:\n\t\t\t\tp.scrollUp()\n\t\t\tcase tea.MouseWheelLeft:\n\t\t\t\tp.scrollLeft()\n\t\t\tcase tea.MouseWheelRight:\n\t\t\t\tp.scrollRight()\n\t\t\t}\n\t\t}\n\t}\n\n\treturn p, tea.Batch(cmds...)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_scrollDown_187": {
      "name": "scrollDown",
      "type": "method",
      "start_line": 187,
      "end_line": 191,
      "content_hash": "d196393cac92563f083ac094716342a0ebe9b572",
      "content": "func (p *permissionDialogCmp) scrollDown() {\n\tp.diffYOffset += 1\n\tp.contentDirty = true\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_scrollUp_192": {
      "name": "scrollUp",
      "type": "method",
      "start_line": 192,
      "end_line": 196,
      "content_hash": "21973498205b79ef8e9e2d97a372d784d298e17d",
      "content": "func (p *permissionDialogCmp) scrollUp() {\n\tp.diffYOffset = max(0, p.diffYOffset-1)\n\tp.contentDirty = true\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_scrollLeft_197": {
      "name": "scrollLeft",
      "type": "method",
      "start_line": 197,
      "end_line": 201,
      "content_hash": "31b7354b890f7f8f4767076f171582c589f3b9d8",
      "content": "func (p *permissionDialogCmp) scrollLeft() {\n\tp.diffXOffset = max(0, p.diffXOffset-5)\n\tp.contentDirty = true\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_scrollRight_202": {
      "name": "scrollRight",
      "type": "method",
      "start_line": 202,
      "end_line": 208,
      "content_hash": "327406f25dfb4280d5f0e2d64effae7bfb72af43",
      "content": "func (p *permissionDialogCmp) scrollRight() {\n\tp.diffXOffset += 5\n\tp.contentDirty = true\n}\n\n// isMouseOverDialog checks if the given mouse coordinates are within the dialog bounds.\n// Returns true if the mouse is over the dialog area, false otherwise.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_isMouseOverDialog_209": {
      "name": "isMouseOverDialog",
      "type": "method",
      "start_line": 209,
      "end_line": 221,
      "content_hash": "abc80352fad14cd2aabc4e8fcd3abc20044876db",
      "content": "func (p *permissionDialogCmp) isMouseOverDialog(x, y int) bool {\n\tif p.permission.ID == \"\" {\n\t\treturn false\n\t}\n\tvar (\n\t\tdialogX      = p.positionCol\n\t\tdialogY      = p.positionRow\n\t\tdialogWidth  = p.width\n\t\tdialogHeight = p.finalDialogHeight\n\t)\n\treturn x >= dialogX && x < dialogX+dialogWidth && y >= dialogY && y < dialogY+dialogHeight\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_selectCurrentOption_222": {
      "name": "selectCurrentOption",
      "type": "method",
      "start_line": 222,
      "end_line": 239,
      "content_hash": "da11e0a6b91b62e6136936a5696c8a0c4ce6df25",
      "content": "func (p *permissionDialogCmp) selectCurrentOption() tea.Cmd {\n\tvar action PermissionAction\n\n\tswitch p.selectedOption {\n\tcase 0:\n\t\taction = PermissionAllow\n\tcase 1:\n\t\taction = PermissionAllowForSession\n\tcase 2:\n\t\taction = PermissionDeny\n\t}\n\n\treturn tea.Batch(\n\t\tutil.CmdHandler(PermissionResponseMsg{Action: action, Permission: p.permission}),\n\t\tutil.CmdHandler(dialogs.CloseDialogMsg{}),\n\t)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_renderButtons_240": {
      "name": "renderButtons",
      "type": "method",
      "start_line": 240,
      "end_line": 273,
      "content_hash": "f401c021260e788cfd58118d10007c90965e39f8",
      "content": "func (p *permissionDialogCmp) renderButtons() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base\n\n\tbuttons := []core.ButtonOpts{\n\t\t{\n\t\t\tText:           \"Allow\",\n\t\t\tUnderlineIndex: 0, // \"A\"\n\t\t\tSelected:       p.selectedOption == 0,\n\t\t},\n\t\t{\n\t\t\tText:           \"Allow for Session\",\n\t\t\tUnderlineIndex: 10, // \"S\" in \"Session\"\n\t\t\tSelected:       p.selectedOption == 1,\n\t\t},\n\t\t{\n\t\t\tText:           \"Deny\",\n\t\t\tUnderlineIndex: 0, // \"D\"\n\t\t\tSelected:       p.selectedOption == 2,\n\t\t},\n\t}\n\n\tcontent := core.SelectableButtons(buttons, \"  \")\n\tif lipgloss.Width(content) > p.width-4 {\n\t\tcontent = core.SelectableButtonsVertical(buttons, 1)\n\t\treturn baseStyle.AlignVertical(lipgloss.Center).\n\t\t\tAlignHorizontal(lipgloss.Center).\n\t\t\tWidth(p.width - 4).\n\t\t\tRender(content)\n\t}\n\n\treturn baseStyle.AlignHorizontal(lipgloss.Right).Width(p.width - 4).Render(content)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_renderHeader_274": {
      "name": "renderHeader",
      "type": "method",
      "start_line": 274,
      "end_line": 426,
      "content_hash": "27fa756e9179f21e8854e79dd3efbabbfbc1277b",
      "content": "func (p *permissionDialogCmp) renderHeader() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base\n\n\ttoolKey := t.S().Muted.Render(\"Tool\")\n\ttoolValue := t.S().Text.\n\t\tWidth(p.width - lipgloss.Width(toolKey)).\n\t\tRender(fmt.Sprintf(\" %s\", p.permission.ToolName))\n\n\tpathKey := t.S().Muted.Render(\"Path\")\n\tpathValue := t.S().Text.\n\t\tWidth(p.width - lipgloss.Width(pathKey)).\n\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(p.permission.Path)))\n\n\theaderParts := []string{\n\t\tlipgloss.JoinHorizontal(\n\t\t\tlipgloss.Left,\n\t\t\ttoolKey,\n\t\t\ttoolValue,\n\t\t),\n\t\tlipgloss.JoinHorizontal(\n\t\t\tlipgloss.Left,\n\t\t\tpathKey,\n\t\t\tpathValue,\n\t\t),\n\t}\n\n\t// Add tool-specific header information\n\tswitch p.permission.ToolName {\n\tcase tools.BashToolName:\n\t\tparams := p.permission.Params.(tools.BashPermissionsParams)\n\t\tdescKey := t.S().Muted.Render(\"Desc\")\n\t\tdescValue := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(descKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", params.Description))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tdescKey,\n\t\t\t\tdescValue,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t\tt.S().Muted.Width(p.width).Render(\"Command\"),\n\t\t)\n\tcase tools.DownloadToolName:\n\t\tparams := p.permission.Params.(tools.DownloadPermissionsParams)\n\t\turlKey := t.S().Muted.Render(\"URL\")\n\t\turlValue := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(urlKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", params.URL))\n\t\tfileKey := t.S().Muted.Render(\"File\")\n\t\tfilePath := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(fileKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.FilePath)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\turlKey,\n\t\t\t\turlValue,\n\t\t\t),\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tfileKey,\n\t\t\t\tfilePath,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\tcase tools.EditToolName:\n\t\tparams := p.permission.Params.(tools.EditPermissionsParams)\n\t\tfileKey := t.S().Muted.Render(\"File\")\n\t\tfilePath := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(fileKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.FilePath)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tfileKey,\n\t\t\t\tfilePath,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\n\tcase tools.WriteToolName:\n\t\tparams := p.permission.Params.(tools.WritePermissionsParams)\n\t\tfileKey := t.S().Muted.Render(\"File\")\n\t\tfilePath := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(fileKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.FilePath)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tfileKey,\n\t\t\t\tfilePath,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\tcase tools.MultiEditToolName:\n\t\tparams := p.permission.Params.(tools.MultiEditPermissionsParams)\n\t\tfileKey := t.S().Muted.Render(\"File\")\n\t\tfilePath := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(fileKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.FilePath)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tfileKey,\n\t\t\t\tfilePath,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\tcase tools.FetchToolName:\n\t\theaderParts = append(headerParts,\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t\tt.S().Muted.Width(p.width).Bold(true).Render(\"URL\"),\n\t\t)\n\tcase tools.AgenticFetchToolName:\n\t\theaderParts = append(headerParts,\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t\tt.S().Muted.Width(p.width).Bold(true).Render(\"Web\"),\n\t\t)\n\tcase tools.ViewToolName:\n\t\tparams := p.permission.Params.(tools.ViewPermissionsParams)\n\t\tfileKey := t.S().Muted.Render(\"File\")\n\t\tfilePath := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(fileKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.FilePath)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tfileKey,\n\t\t\t\tfilePath,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\tcase tools.LSToolName:\n\t\tparams := p.permission.Params.(tools.LSPermissionsParams)\n\t\tpathKey := t.S().Muted.Render(\"Directory\")\n\t\tpathValue := t.S().Text.\n\t\t\tWidth(p.width - lipgloss.Width(pathKey)).\n\t\t\tRender(fmt.Sprintf(\" %s\", fsext.PrettyPath(params.Path)))\n\t\theaderParts = append(headerParts,\n\t\t\tlipgloss.JoinHorizontal(\n\t\t\t\tlipgloss.Left,\n\t\t\t\tpathKey,\n\t\t\t\tpathValue,\n\t\t\t),\n\t\t\tbaseStyle.Render(strings.Repeat(\" \", p.width)),\n\t\t)\n\t}\n\n\treturn baseStyle.Render(lipgloss.JoinVertical(lipgloss.Left, headerParts...))\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_getOrGenerateContent_427": {
      "name": "getOrGenerateContent",
      "type": "method",
      "start_line": 427,
      "end_line": 464,
      "content_hash": "54132ce46bd7a34d34451b3d2de29e991133c86b",
      "content": "func (p *permissionDialogCmp) getOrGenerateContent() string {\n\t// Return cached content if available and not dirty\n\tif !p.contentDirty && p.cachedContent != \"\" {\n\t\treturn p.cachedContent\n\t}\n\n\t// Generate new content\n\tvar content string\n\tswitch p.permission.ToolName {\n\tcase tools.BashToolName:\n\t\tcontent = p.generateBashContent()\n\tcase tools.DownloadToolName:\n\t\tcontent = p.generateDownloadContent()\n\tcase tools.EditToolName:\n\t\tcontent = p.generateEditContent()\n\tcase tools.WriteToolName:\n\t\tcontent = p.generateWriteContent()\n\tcase tools.MultiEditToolName:\n\t\tcontent = p.generateMultiEditContent()\n\tcase tools.FetchToolName:\n\t\tcontent = p.generateFetchContent()\n\tcase tools.AgenticFetchToolName:\n\t\tcontent = p.generateAgenticFetchContent()\n\tcase tools.ViewToolName:\n\t\tcontent = p.generateViewContent()\n\tcase tools.LSToolName:\n\t\tcontent = p.generateLSContent()\n\tdefault:\n\t\tcontent = p.generateDefaultContent()\n\t}\n\n\t// Cache the result\n\tp.cachedContent = content\n\tp.contentDirty = false\n\n\treturn content\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateBashContent_465": {
      "name": "generateBashContent",
      "type": "method",
      "start_line": 465,
      "end_line": 507,
      "content_hash": "eacc66be443a8fd8eece12f181c9f55b3974f21f",
      "content": "func (p *permissionDialogCmp) generateBashContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.BashPermissionsParams); ok {\n\t\tcontent := pr.Command\n\t\tt := styles.CurrentTheme()\n\t\tcontent = strings.TrimSpace(content)\n\t\tlines := strings.Split(content, \"\\n\")\n\n\t\twidth := p.width - 4\n\t\tvar out []string\n\t\tfor _, ln := range lines {\n\t\t\tout = append(out, t.S().Muted.\n\t\t\t\tWidth(width).\n\t\t\t\tPadding(0, 3).\n\t\t\t\tForeground(t.FgBase).\n\t\t\t\tBackground(t.BgSubtle).\n\t\t\t\tRender(ln))\n\t\t}\n\n\t\t// Ensure minimum of 7 lines for command display\n\t\tminLines := 7\n\t\tfor len(out) < minLines {\n\t\t\tout = append(out, t.S().Muted.\n\t\t\t\tWidth(width).\n\t\t\t\tPadding(0, 3).\n\t\t\t\tForeground(t.FgBase).\n\t\t\t\tBackground(t.BgSubtle).\n\t\t\t\tRender(\"\"))\n\t\t}\n\n\t\t// Use the cache for markdown rendering\n\t\trenderedContent := strings.Join(out, \"\\n\")\n\t\tfinalContent := baseStyle.\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tPadding(1, 0).\n\t\t\tRender(renderedContent)\n\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateEditContent_508": {
      "name": "generateEditContent",
      "type": "method",
      "start_line": 508,
      "end_line": 528,
      "content_hash": "17076475a60fa8db752a3ee0fc53b62dcb1f35a5",
      "content": "func (p *permissionDialogCmp) generateEditContent() string {\n\tif pr, ok := p.permission.Params.(tools.EditPermissionsParams); ok {\n\t\tformatter := core.DiffFormatter().\n\t\t\tBefore(fsext.PrettyPath(pr.FilePath), pr.OldContent).\n\t\t\tAfter(fsext.PrettyPath(pr.FilePath), pr.NewContent).\n\t\t\tHeight(p.contentViewPort.Height()).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tXOffset(p.diffXOffset).\n\t\t\tYOffset(p.diffYOffset)\n\t\tif p.useDiffSplitMode() {\n\t\t\tformatter = formatter.Split()\n\t\t} else {\n\t\t\tformatter = formatter.Unified()\n\t\t}\n\n\t\tdiff := formatter.String()\n\t\treturn diff\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateWriteContent_529": {
      "name": "generateWriteContent",
      "type": "method",
      "start_line": 529,
      "end_line": 550,
      "content_hash": "b131039c19f26961d04cd7e1130ec0e7924faeba",
      "content": "func (p *permissionDialogCmp) generateWriteContent() string {\n\tif pr, ok := p.permission.Params.(tools.WritePermissionsParams); ok {\n\t\t// Use the cache for diff rendering\n\t\tformatter := core.DiffFormatter().\n\t\t\tBefore(fsext.PrettyPath(pr.FilePath), pr.OldContent).\n\t\t\tAfter(fsext.PrettyPath(pr.FilePath), pr.NewContent).\n\t\t\tHeight(p.contentViewPort.Height()).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tXOffset(p.diffXOffset).\n\t\t\tYOffset(p.diffYOffset)\n\t\tif p.useDiffSplitMode() {\n\t\t\tformatter = formatter.Split()\n\t\t} else {\n\t\t\tformatter = formatter.Unified()\n\t\t}\n\n\t\tdiff := formatter.String()\n\t\treturn diff\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateDownloadContent_551": {
      "name": "generateDownloadContent",
      "type": "method",
      "start_line": 551,
      "end_line": 568,
      "content_hash": "cb60893c41f73ac531227eef56cb5ef20f70bc41",
      "content": "func (p *permissionDialogCmp) generateDownloadContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.DownloadPermissionsParams); ok {\n\t\tcontent := fmt.Sprintf(\"URL: %s\\nFile: %s\", pr.URL, fsext.PrettyPath(pr.FilePath))\n\t\tif pr.Timeout > 0 {\n\t\t\tcontent += fmt.Sprintf(\"\\nTimeout: %ds\", pr.Timeout)\n\t\t}\n\n\t\tfinalContent := baseStyle.\n\t\t\tPadding(1, 2).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tRender(content)\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateMultiEditContent_569": {
      "name": "generateMultiEditContent",
      "type": "method",
      "start_line": 569,
      "end_line": 590,
      "content_hash": "95ecf2f9457949bd6cf0a69a039dfc9f8658c6e5",
      "content": "func (p *permissionDialogCmp) generateMultiEditContent() string {\n\tif pr, ok := p.permission.Params.(tools.MultiEditPermissionsParams); ok {\n\t\t// Use the cache for diff rendering\n\t\tformatter := core.DiffFormatter().\n\t\t\tBefore(fsext.PrettyPath(pr.FilePath), pr.OldContent).\n\t\t\tAfter(fsext.PrettyPath(pr.FilePath), pr.NewContent).\n\t\t\tHeight(p.contentViewPort.Height()).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tXOffset(p.diffXOffset).\n\t\t\tYOffset(p.diffYOffset)\n\t\tif p.useDiffSplitMode() {\n\t\t\tformatter = formatter.Split()\n\t\t} else {\n\t\t\tformatter = formatter.Unified()\n\t\t}\n\n\t\tdiff := formatter.String()\n\t\treturn diff\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateFetchContent_591": {
      "name": "generateFetchContent",
      "type": "method",
      "start_line": 591,
      "end_line": 603,
      "content_hash": "862b8f41546bcb2a8a34bbc4bc0642097497dd37",
      "content": "func (p *permissionDialogCmp) generateFetchContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.FetchPermissionsParams); ok {\n\t\tfinalContent := baseStyle.\n\t\t\tPadding(1, 2).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tRender(pr.URL)\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateAgenticFetchContent_604": {
      "name": "generateAgenticFetchContent",
      "type": "method",
      "start_line": 604,
      "end_line": 622,
      "content_hash": "5e90444010495221723ba7932b6f1ef68226cf5f",
      "content": "func (p *permissionDialogCmp) generateAgenticFetchContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.AgenticFetchPermissionsParams); ok {\n\t\tvar content string\n\t\tif pr.URL != \"\" {\n\t\t\tcontent = fmt.Sprintf(\"URL: %s\\n\\nPrompt: %s\", pr.URL, pr.Prompt)\n\t\t} else {\n\t\t\tcontent = fmt.Sprintf(\"Prompt: %s\", pr.Prompt)\n\t\t}\n\t\tfinalContent := baseStyle.\n\t\t\tPadding(1, 2).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tRender(content)\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateViewContent_623": {
      "name": "generateViewContent",
      "type": "method",
      "start_line": 623,
      "end_line": 643,
      "content_hash": "b5335123ab7ada7552984aa4cc3c6310a728dd39",
      "content": "func (p *permissionDialogCmp) generateViewContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.ViewPermissionsParams); ok {\n\t\tcontent := fmt.Sprintf(\"File: %s\", fsext.PrettyPath(pr.FilePath))\n\t\tif pr.Offset > 0 {\n\t\t\tcontent += fmt.Sprintf(\"\\nStarting from line: %d\", pr.Offset+1)\n\t\t}\n\t\tif pr.Limit > 0 && pr.Limit != 2000 { // 2000 is the default limit\n\t\t\tcontent += fmt.Sprintf(\"\\nLines to read: %d\", pr.Limit)\n\t\t}\n\n\t\tfinalContent := baseStyle.\n\t\t\tPadding(1, 2).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tRender(content)\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateLSContent_644": {
      "name": "generateLSContent",
      "type": "method",
      "start_line": 644,
      "end_line": 661,
      "content_hash": "34f24edb06dc7ae5e62aa9ce7e8b46ca507a6b77",
      "content": "func (p *permissionDialogCmp) generateLSContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\tif pr, ok := p.permission.Params.(tools.LSPermissionsParams); ok {\n\t\tcontent := fmt.Sprintf(\"Directory: %s\", fsext.PrettyPath(pr.Path))\n\t\tif len(pr.Ignore) > 0 {\n\t\t\tcontent += fmt.Sprintf(\"\\nIgnore patterns: %s\", strings.Join(pr.Ignore, \", \"))\n\t\t}\n\n\t\tfinalContent := baseStyle.\n\t\t\tPadding(1, 2).\n\t\t\tWidth(p.contentViewPort.Width()).\n\t\t\tRender(content)\n\t\treturn finalContent\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_generateDefaultContent_662": {
      "name": "generateDefaultContent",
      "type": "method",
      "start_line": 662,
      "end_line": 727,
      "content_hash": "13c98b2b202b367370dae5f7474e170d8f830d60",
      "content": "func (p *permissionDialogCmp) generateDefaultContent() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base.Background(t.BgSubtle)\n\n\tcontent := p.permission.Description\n\n\t// Add pretty-printed JSON parameters for MCP tools\n\tif p.permission.Params != nil {\n\t\tvar paramStr string\n\n\t\t// Ensure params is a string\n\t\tif str, ok := p.permission.Params.(string); ok {\n\t\t\tparamStr = str\n\t\t} else {\n\t\t\tparamStr = fmt.Sprintf(\"%v\", p.permission.Params)\n\t\t}\n\n\t\t// Try to parse as JSON for pretty printing\n\t\tvar parsed any\n\t\tif err := json.Unmarshal([]byte(paramStr), &parsed); err == nil {\n\t\t\tif b, err := json.MarshalIndent(parsed, \"\", \"  \"); err == nil {\n\t\t\t\tif content != \"\" {\n\t\t\t\t\tcontent += \"\\n\\n\"\n\t\t\t\t}\n\t\t\t\tcontent += string(b)\n\t\t\t}\n\t\t} else {\n\t\t\t// Not JSON, show as-is\n\t\t\tif content != \"\" {\n\t\t\t\tcontent += \"\\n\\n\"\n\t\t\t}\n\t\t\tcontent += paramStr\n\t\t}\n\t}\n\n\tcontent = strings.TrimSpace(content)\n\tcontent = \"\\n\" + content + \"\\n\"\n\tlines := strings.Split(content, \"\\n\")\n\n\twidth := p.width - 4\n\tvar out []string\n\tfor _, ln := range lines {\n\t\tln = \" \" + ln // left padding\n\t\tif len(ln) > width {\n\t\t\tln = ansi.Truncate(ln, width, \"\u2026\")\n\t\t}\n\t\tout = append(out, t.S().Muted.\n\t\t\tWidth(width).\n\t\t\tForeground(t.FgBase).\n\t\t\tBackground(t.BgSubtle).\n\t\t\tRender(ln))\n\t}\n\n\t// Use the cache for markdown rendering\n\trenderedContent := strings.Join(out, \"\\n\")\n\tfinalContent := baseStyle.\n\t\tWidth(p.contentViewPort.Width()).\n\t\tRender(renderedContent)\n\n\tif renderedContent == \"\" {\n\t\treturn \"\"\n\t}\n\n\treturn finalContent\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_useDiffSplitMode_728": {
      "name": "useDiffSplitMode",
      "type": "method",
      "start_line": 728,
      "end_line": 734,
      "content_hash": "f1e6ca217408486e721c2959b8e7035d0eb61a7b",
      "content": "func (p *permissionDialogCmp) useDiffSplitMode() bool {\n\tif p.diffSplitMode != nil {\n\t\treturn *p.diffSplitMode\n\t}\n\treturn p.defaultDiffSplitMode\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_styleViewport_735": {
      "name": "styleViewport",
      "type": "method",
      "start_line": 735,
      "end_line": 739,
      "content_hash": "e079836747a861da607c78d4d79c1c2336e4ccde",
      "content": "func (p *permissionDialogCmp) styleViewport() string {\n\tt := styles.CurrentTheme()\n\treturn t.S().Base.Render(p.contentViewPort.View())\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_render_740": {
      "name": "render",
      "type": "method",
      "start_line": 740,
      "end_line": 798,
      "content_hash": "b4cb364d62d74617267914a1903e03978399549a",
      "content": "func (p *permissionDialogCmp) render() string {\n\tt := styles.CurrentTheme()\n\tbaseStyle := t.S().Base\n\ttitle := core.Title(\"Permission Required\", p.width-4)\n\t// Render header\n\theaderContent := p.renderHeader()\n\t// Render buttons\n\tbuttons := p.renderButtons()\n\n\tp.contentViewPort.SetWidth(p.width - 4)\n\n\t// Always set viewport content (the caching is handled in getOrGenerateContent)\n\tconst minContentHeight = 9\n\n\tavailableDialogHeight := max(minContentHeight, p.height-minContentHeight)\n\tp.contentViewPort.SetHeight(availableDialogHeight)\n\tcontentFinal := p.getOrGenerateContent()\n\tcontentHeight := min(availableDialogHeight, lipgloss.Height(contentFinal))\n\n\tp.contentViewPort.SetHeight(contentHeight)\n\tp.contentViewPort.SetContent(contentFinal)\n\n\tp.positionRow = p.wHeight / 2\n\tp.positionRow -= (contentHeight + 9) / 2\n\tp.positionRow -= 3 // Move dialog slightly higher than middle\n\n\tvar contentHelp string\n\tif p.supportsDiffView() {\n\t\tcontentHelp = help.New().View(p.keyMap)\n\t}\n\n\t// Calculate content height dynamically based on window size\n\tstrs := []string{\n\t\ttitle,\n\t\t\"\",\n\t\theaderContent,\n\t\t\"\",\n\t\tp.styleViewport(),\n\t\t\"\",\n\t\tbuttons,\n\t\t\"\",\n\t}\n\tif contentHelp != \"\" {\n\t\tstrs = append(strs, \"\", contentHelp)\n\t}\n\tcontent := lipgloss.JoinVertical(lipgloss.Top, strs...)\n\n\tdialog := baseStyle.\n\t\tPadding(0, 1).\n\t\tBorder(lipgloss.RoundedBorder()).\n\t\tBorderForeground(t.BorderFocus).\n\t\tWidth(p.width).\n\t\tRender(\n\t\t\tcontent,\n\t\t)\n\tp.finalDialogHeight = lipgloss.Height(dialog)\n\treturn dialog\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_View_799": {
      "name": "View",
      "type": "method",
      "start_line": 799,
      "end_line": 802,
      "content_hash": "f4f7e3ac771503737b5c00be20c433e8c0233d47",
      "content": "func (p *permissionDialogCmp) View() string {\n\treturn p.render()\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetSize_803": {
      "name": "SetSize",
      "type": "method",
      "start_line": 803,
      "end_line": 860,
      "content_hash": "df807a5cd22a558d11d4142754ab0786996980a6",
      "content": "func (p *permissionDialogCmp) SetSize() tea.Cmd {\n\tif p.permission.ID == \"\" {\n\t\treturn nil\n\t}\n\n\toldWidth, oldHeight := p.width, p.height\n\n\tswitch p.permission.ToolName {\n\tcase tools.BashToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.3)\n\tcase tools.DownloadToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.4)\n\tcase tools.EditToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.8)\n\tcase tools.WriteToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.8)\n\tcase tools.MultiEditToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.8)\n\tcase tools.FetchToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.3)\n\tcase tools.AgenticFetchToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.4)\n\tcase tools.ViewToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.4)\n\tcase tools.LSToolName:\n\t\tp.width = int(float64(p.wWidth) * 0.8)\n\t\tp.height = int(float64(p.wHeight) * 0.4)\n\tdefault:\n\t\tp.width = int(float64(p.wWidth) * 0.7)\n\t\tp.height = int(float64(p.wHeight) * 0.5)\n\t}\n\n\t// Default to diff split mode when dialog is wide enough.\n\tp.defaultDiffSplitMode = p.width >= 140\n\n\t// Set a maximum width for the dialog\n\tp.width = min(p.width, 180)\n\n\t// Mark content as dirty if size changed\n\tif oldWidth != p.width || oldHeight != p.height {\n\t\tp.contentDirty = true\n\t}\n\tp.positionRow = p.wHeight / 2\n\tp.positionRow -= p.height / 2\n\tp.positionRow -= 3 // Move dialog slightly higher than middle\n\tp.positionCol = p.wWidth / 2\n\tp.positionCol -= p.width / 2\n\treturn nil\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_GetOrSetMarkdown_861": {
      "name": "GetOrSetMarkdown",
      "type": "method",
      "start_line": 861,
      "end_line": 870,
      "content_hash": "a66866874f217f28d37505d9e39b713f5b9a82fe",
      "content": "func (c *permissionDialogCmp) GetOrSetMarkdown(key string, generator func() (string, error)) string {\n\tcontent, err := generator()\n\tif err != nil {\n\t\treturn fmt.Sprintf(\"Error rendering markdown: %v\", err)\n\t}\n\n\treturn content\n}\n\n// ID implements PermissionDialogCmp.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ID_871": {
      "name": "ID",
      "type": "method",
      "start_line": 871,
      "end_line": 875,
      "content_hash": "2e3b38926d440b751aaee2e271e9eea1d50dce48",
      "content": "func (p *permissionDialogCmp) ID() dialogs.DialogID {\n\treturn PermissionsDialogID\n}\n\n// Position implements PermissionDialogCmp.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Position_876": {
      "name": "Position",
      "type": "method",
      "start_line": 876,
      "end_line": 880,
      "content_hash": "bdfe47a17e15a0c9b50294226221681534ff249a",
      "content": "func (p *permissionDialogCmp) Position() (int, int) {\n\treturn p.positionRow, p.positionCol\n}\n\n// Options for create a new permission dialog",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_Options_881": {
      "name": "Options",
      "type": "struct",
      "start_line": 881,
      "end_line": 885,
      "content_hash": "5ff2e2cdbb30ae183cc5e0e90c4c83d821a37ef2",
      "content": "type Options struct {\n\tDiffMode string // split or unified, empty means use defaultDiffSplitMode\n}\n\n// isSplitMode returns internal representation of diff mode switch",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_isSplitMode_886": {
      "name": "isSplitMode",
      "type": "method",
      "start_line": 886,
      "end_line": 899,
      "content_hash": "e37d2cb7ae52460e6bcc0e00678cd1c07dba6831",
      "content": "func (o Options) isSplitMode() *bool {\n\tvar split bool\n\n\tswitch o.DiffMode {\n\tcase \"split\":\n\t\tsplit = true\n\tcase \"unified\":\n\t\tsplit = false\n\tdefault:\n\t\treturn nil\n\t}\n\n\treturn &split\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}