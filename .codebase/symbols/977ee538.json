{
  "file_path": "/work/internal/agent/summarizer_test.go",
  "file_hash": "e929b31d769e3a8b952c1bebaab8916a418da293",
  "updated_at": "2025-12-26T17:34:23.379714",
  "symbols": {
    "function_TestDetectFastestSummarizer_10": {
      "name": "TestDetectFastestSummarizer",
      "type": "function",
      "start_line": 10,
      "end_line": 66,
      "content_hash": "e196bee4a696a2e1f6c1f0b65ca81876f677c2ac",
      "content": "func TestDetectFastestSummarizer(t *testing.T) {\n\tt.Run(\"Cerebras prioritized\", func(t *testing.T) {\n\t\tproviders := csync.NewMap[string, config.ProviderConfig]()\n\t\tproviders.Set(\"cerebras\", config.ProviderConfig{\n\t\t\tAPIKey: \"test-key\",\n\t\t})\n\t\tproviders.Set(\"xai\", config.ProviderConfig{\n\t\t\tAPIKey: \"test-key\",\n\t\t})\n\n\t\tcfg := config.Config{\n\t\t\tProviders: providers,\n\t\t}\n\n\t\tresult := DetectFastestSummarizer(cfg)\n\t\tif result.Provider != \"cerebras\" {\n\t\t\tt.Errorf(\"Expected cerebras provider, got: %s\", result.Provider)\n\t\t}\n\t\tif result.Model != \"llama3.1-8b\" {\n\t\t\tt.Errorf(\"Expected llama3.1-8b model, got: %s\", result.Model)\n\t\t}\n\t})\n\n\tt.Run(\"xAI fallback\", func(t *testing.T) {\n\t\tproviders := csync.NewMap[string, config.ProviderConfig]()\n\t\tproviders.Set(\"xai\", config.ProviderConfig{\n\t\t\tAPIKey: \"test-key\",\n\t\t})\n\n\t\tcfg := config.Config{\n\t\t\tProviders: providers,\n\t\t}\n\n\t\tresult := DetectFastestSummarizer(cfg)\n\t\tif result.Provider != \"xai\" {\n\t\t\tt.Errorf(\"Expected xai provider, got: %s\", result.Provider)\n\t\t}\n\t\tif result.Model != \"grok-3-mini\" {\n\t\t\tt.Errorf(\"Expected grok-3-mini model, got: %s\", result.Model)\n\t\t}\n\t})\n\n\tt.Run(\"No fast providers\", func(t *testing.T) {\n\t\tproviders := csync.NewMap[string, config.ProviderConfig]()\n\t\tproviders.Set(\"openai\", config.ProviderConfig{})\n\n\t\tcfg := config.Config{\n\t\t\tProviders: providers,\n\t\t}\n\n\t\tresult := DetectFastestSummarizer(cfg)\n\t\tif result.Provider != \"\" || result.Model != \"\" {\n\t\t\tt.Errorf(\"Expected empty result for non-fast providers, got: %v\", result)\n\t\t}\n\t})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestIsFastSummarizer_67": {
      "name": "TestIsFastSummarizer",
      "type": "function",
      "start_line": 67,
      "end_line": 85,
      "content_hash": "db63c18cefd2d378e8293fa0d03ad6b5744655b7",
      "content": "func TestIsFastSummarizer(t *testing.T) {\n\tt.Run(\"Cerebras llama3.1-8b is fast\", func(t *testing.T) {\n\t\tif !IsFastSummarizer(\"cerebras\", \"llama3.1-8b\") {\n\t\t\tt.Error(\"Expected cerebras llama3.1-8b to be considered fast\")\n\t\t}\n\t})\n\n\tt.Run(\"xAI grok-3-mini is fast\", func(t *testing.T) {\n\t\tif !IsFastSummarizer(\"xai\", \"grok-3-mini\") {\n\t\t\tt.Error(\"Expected xai grok-3-mini to be considered fast\")\n\t\t}\n\t})\n\n\tt.Run(\"OpenAI gpt-4 is not fast\", func(t *testing.T) {\n\t\tif IsFastSummarizer(\"openai\", \"gpt-4\") {\n\t\t\tt.Error(\"Did not expect openai gpt-4 to be considered fast\")\n\t\t}\n\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}