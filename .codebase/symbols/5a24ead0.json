{
  "file_path": "/work/internal/agent/tools/web_search.go",
  "file_hash": "2acdf8450c10a4a229aaad21503a3c9c9eeca4cb",
  "updated_at": "2025-12-26T17:34:23.715095",
  "symbols": {
    "function_NewWebSearchTool_16": {
      "name": "NewWebSearchTool",
      "type": "function",
      "start_line": 16,
      "end_line": 51,
      "content_hash": "04a5c89c2d04888c507f995889c9b23c9b38ca2e",
      "content": "func NewWebSearchTool(client *http.Client) fantasy.AgentTool {\n\tif client == nil {\n\t\tclient = &http.Client{\n\t\t\tTimeout: 30 * time.Second,\n\t\t\tTransport: &http.Transport{\n\t\t\t\tMaxIdleConns:        100,\n\t\t\t\tMaxIdleConnsPerHost: 10,\n\t\t\t\tIdleConnTimeout:     90 * time.Second,\n\t\t\t},\n\t\t}\n\t}\n\n\treturn fantasy.NewParallelAgentTool(\n\t\tWebSearchToolName,\n\t\tstring(webSearchToolDescription),\n\t\tfunc(ctx context.Context, params WebSearchParams, call fantasy.ToolCall) (fantasy.ToolResponse, error) {\n\t\t\tif params.Query == \"\" {\n\t\t\t\treturn fantasy.NewTextErrorResponse(\"query is required\"), nil\n\t\t\t}\n\n\t\t\tmaxResults := params.MaxResults\n\t\t\tif maxResults <= 0 {\n\t\t\t\tmaxResults = 10\n\t\t\t}\n\t\t\tif maxResults > 20 {\n\t\t\t\tmaxResults = 20\n\t\t\t}\n\n\t\t\tresults, err := searchDuckDuckGo(ctx, client, params.Query, maxResults)\n\t\t\tif err != nil {\n\t\t\t\treturn fantasy.NewTextErrorResponse(\"Failed to search: \" + err.Error()), nil\n\t\t\t}\n\n\t\t\treturn fantasy.NewTextResponse(formatSearchResults(results)), nil\n\t\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}