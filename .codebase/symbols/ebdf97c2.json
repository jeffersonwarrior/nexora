{
  "file_path": "/work/internal/format/spinner_test.go",
  "file_hash": "06fde485d8ab8a98429a4be3e4098368ee9246e0",
  "updated_at": "2025-12-26T17:34:20.781967",
  "symbols": {
    "function_TestNewSpinner_14": {
      "name": "TestNewSpinner",
      "type": "function",
      "start_line": 14,
      "end_line": 63,
      "content_hash": "e0d263554baf52d3c89f0695884a9cc3a5323715",
      "content": "func TestNewSpinner(t *testing.T) {\n\tt.Run(\"creates spinner successfully\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithCancel(context.Background())\n\t\tdefer cancel()\n\n\t\tanimSettings := anim.Settings{\n\t\t\tSize:        10,\n\t\t\tLabel:       \"Loading...\",\n\t\t\tLabelColor:  color.White,\n\t\t\tGradColorA:  color.NRGBA{R: 255, G: 0, B: 0, A: 255},\n\t\t\tGradColorB:  color.NRGBA{R: 0, G: 0, B: 255, A: 255},\n\t\t\tCycleColors: true,\n\t\t}\n\n\t\t// Act\n\t\tspinner := NewSpinner(ctx, cancel, animSettings)\n\n\t\t// Assert\n\t\tassert.NotNil(t, spinner)\n\t\tassert.NotNil(t, spinner.prog)\n\t\tassert.NotNil(t, spinner.done)\n\t})\n\n\tt.Run(\"handles context cancellation\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithCancel(context.Background())\n\n\t\tanimSettings := anim.Settings{\n\t\t\tSize:        10,\n\t\t\tLabel:       \"Test\",\n\t\t\tLabelColor:  color.White,\n\t\t\tGradColorA:  color.NRGBA{R: 255, G: 0, B: 0, A: 255},\n\t\t\tGradColorB:  color.NRGBA{R: 0, G: 0, B: 255, A: 255},\n\t\t\tCycleColors: false,\n\t\t}\n\n\t\tspinner := NewSpinner(ctx, cancel, animSettings)\n\n\t\t// Act\n\t\tspinner.Start()\n\t\ttime.Sleep(10 * time.Millisecond) // Brief moment for animation to start\n\t\tcancel()                          // Cancel context\n\t\tspinner.Stop()\n\n\t\t// Assert - should complete without hanging/crashing\n\t\tassert.True(t, true) // If we get here, the test passed\n\t})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestSpinner_StartStop_64": {
      "name": "TestSpinner_StartStop",
      "type": "function",
      "start_line": 64,
      "end_line": 89,
      "content_hash": "2e22b3b6f38f6aa430df98b207df54251167825b",
      "content": "func TestSpinner_StartStop(t *testing.T) {\n\tt.Run(\"starts and stops cleanly\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n\t\tdefer cancel()\n\n\t\tanimSettings := anim.Settings{\n\t\t\tSize:        10,\n\t\t\tLabel:       \"Loading...\",\n\t\t\tLabelColor:  color.White,\n\t\t\tGradColorA:  color.NRGBA{R: 255, G: 0, B: 0, A: 255},\n\t\t\tGradColorB:  color.NRGBA{R: 0, G: 0, B: 255, A: 255},\n\t\t\tCycleColors: false,\n\t\t}\n\n\t\tspinner := NewSpinner(ctx, cancel, animSettings)\n\n\t\t// Act & Assert - should not panic\n\t\tspinner.Start()\n\t\ttime.Sleep(50 * time.Millisecond) // Let it spin briefly\n\t\tspinner.Stop()\n\n\t\tassert.True(t, true) // Test passes if no panic occurs\n\t})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestSpinner_SetLabel_90": {
      "name": "TestSpinner_SetLabel",
      "type": "function",
      "start_line": 90,
      "end_line": 113,
      "content_hash": "0e6208fa42792ebea5d0ec36a08d7398ae58f0a3",
      "content": "func TestSpinner_SetLabel(t *testing.T) {\n\tt.Run(\"setLabel is a no-op stub\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithCancel(context.Background())\n\t\tdefer cancel()\n\n\t\tanimSettings := anim.Settings{\n\t\t\tSize:        10,\n\t\t\tLabel:       \"Loading...\",\n\t\t\tLabelColor:  color.White,\n\t\t\tGradColorA:  color.NRGBA{R: 255, G: 0, B: 0, A: 255},\n\t\t\tGradColorB:  color.NRGBA{R: 0, G: 0, B: 255, A: 255},\n\t\t\tCycleColors: false,\n\t\t}\n\n\t\tspinner := NewSpinner(ctx, cancel, animSettings)\n\n\t\t// Act & Assert - should not panic\n\t\tspinner.SetLabel(\"test label\")\n\n\t\tassert.True(t, true) // Test passes if no panic occurs\n\t})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestNewSpinnerInterface_114": {
      "name": "TestNewSpinnerInterface",
      "type": "function",
      "start_line": 114,
      "end_line": 138,
      "content_hash": "b52b509b72a3da0f98e9b1f0484885a875d86963",
      "content": "func TestNewSpinnerInterface(t *testing.T) {\n\tt.Run(\"creates spinner interface successfully\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithCancel(context.Background())\n\t\tdefer cancel()\n\n\t\tsettings := Settings{\n\t\t\tSize:       1,\n\t\t\tLabel:      \"Loading...\",\n\t\t\tLabelColor: \"blue\",\n\t\t\tColorStart: \"cyan\",\n\t\t\tColorEnd:   \"blue\",\n\t\t}\n\n\t\t// Act\n\t\tspinner := NewSpinnerInterface(ctx, cancel, settings)\n\n\t\t// Assert\n\t\tassert.NotNil(t, spinner)\n\n\t\t// Verify interface compliance\n\t\tassert.Implements(t, (*SpinnerInterface)(nil), spinner)\n\t})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestSpinnerInterface_Lifecycle_139": {
      "name": "TestSpinnerInterface_Lifecycle",
      "type": "function",
      "start_line": 139,
      "end_line": 164,
      "content_hash": "a3a6d32a547f6fb0ed095629bc75e0150bfc6269",
      "content": "func TestSpinnerInterface_Lifecycle(t *testing.T) {\n\tt.Run(\"full lifecycle works\", func(t *testing.T) {\n\t\t// Arrange\n\t\tctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\n\t\tdefer cancel()\n\n\t\tsettings := Settings{\n\t\t\tSize:       1,\n\t\t\tLabel:      \"Test\",\n\t\t\tLabelColor: \"blue\",\n\t\t\tColorStart: \"cyan\",\n\t\t\tColorEnd:   \"blue\",\n\t\t}\n\n\t\tspinner := NewSpinnerInterface(ctx, cancel, settings)\n\n\t\t// Act & Assert - full lifecycle\n\t\tspinner.Start()\n\t\ttime.Sleep(50 * time.Millisecond)\n\t\tspinner.SetLabel(\"Updated Label\")\n\t\ttime.Sleep(50 * time.Millisecond)\n\t\tspinner.Stop()\n\n\t\tassert.True(t, true) // Test passes if no panic occurs\n\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}