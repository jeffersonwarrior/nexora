{
  "file_path": "/work/sdk/openai/examples/basic/main.go",
  "file_hash": "3c361afb7a0239f257c5fcd5ef22c93f4f43cefc",
  "updated_at": "2025-12-26T17:34:21.330600",
  "symbols": {
    "function_main_13": {
      "name": "main",
      "type": "function",
      "start_line": 13,
      "end_line": 90,
      "content_hash": "37f5acc4b98f5df33b078c8257fcd60d356e6be3",
      "content": "func main() {\n\t// Get API key from environment\n\tapiKey := os.Getenv(\"OPENAI_API_KEY\")\n\tif apiKey == \"\" {\n\t\tlog.Fatal(\"Please set OPENAI_API_KEY environment variable\")\n\t}\n\n\t// Create OpenAI client\n\tclient := openai.NewClient(apiKey)\n\n\tctx := context.Background()\n\n\t// Create a simple chat completion request\n\treq := openai.CreateChatCompletionRequest(\n\t\t\"gpt-4\",\n\t\t[]base.Message{\n\t\t\topenai.UserMessage{\n\t\t\t\tContent: \"What is the capital of France? Answer in one word.\",\n\t\t\t\tRole:    \"user\",\n\t\t\t},\n\t\t},\n\t)\n\n\t// Set temperature for focused responses\n\treq.SetTemperature(0.3)\n\n\t// Enable streaming\n\treq.EnableStreaming()\n\n\t// Make the request\n\tchunkCh, err := client.CreateChatCompletionStream(ctx, req)\n\tif err != nil {\n\t\tlog.Fatalf(\"Failed to create chat completion: %v\", err)\n\t}\n\n\tfmt.Println(\"Response:\")\n\tfor chunk := range chunkCh {\n\t\tif len(chunk.Choices) > 0 && chunk.Choices[0].Delta.Content != nil {\n\t\t\tfmt.Print(*chunk.Choices[0].Delta.Content)\n\t\t}\n\t}\n\tfmt.Println()\n\n\t// Example with JSON mode\n\treq2 := openai.CreateChatCompletionRequest(\n\t\t\"gpt-4\",\n\t\t[]base.Message{\n\t\t\topenai.UserMessage{\n\t\t\t\tContent: \"List the first 5 elements as a JSON array\",\n\t\t\t\tRole:    \"user\",\n\t\t\t},\n\t\t},\n\t)\n\n\treq2.EnableJSONSchemaMode(\n\t\t\"capitals\",\n\t\t\"Array of capital cities\",\n\t\tmap[string]interface{}{\n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": map[string]interface{}{\n\t\t\t\t\"type\": \"string\",\n\t\t\t},\n\t\t\t\"minItems\": 1,\n\t\t\t\"maxItems\": 5,\n\t\t},\n\t\ttrue,\n\t)\n\n\tresp2, err := client.CreateChatCompletion(ctx, req2)\n\tif err != nil {\n\t\tlog.Fatalf(\"Failed to create chat completion: %v\", err)\n\t}\n\n\tfmt.Printf(\"JSON Response: %s\\n\", resp2.Choices[0].Message.Content)\n\tfmt.Printf(\"Usage: %+v\\n\", resp2.Usage)\n}\n\n// Advanced example with tool calling",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_exampleWithTools_91": {
      "name": "exampleWithTools",
      "type": "function",
      "start_line": 91,
      "end_line": 154,
      "content_hash": "021d04db62a2cdb38dde06090c092815d7d8db6a",
      "content": "func exampleWithTools() {\n\tapiKey := os.Getenv(\"OPENAI_API_KEY\")\n\tif apiKey == \"\" {\n\t\treturn\n\t}\n\n\tclient := openai.NewClient(apiKey)\n\n\t// Define a calculator tool\n\tcalculatorTool := base.Tool{\n\t\tType: \"function\",\n\t\tFunction: base.Function{\n\t\t\tName:        \"calculator\",\n\t\t\tDescription: \"Perform a calculation\",\n\t\t\tParameters: map[string]interface{}{\n\t\t\t\t\"type\": \"object\",\n\t\t\t\t\"properties\": map[string]interface{}{\n\t\t\t\t\t\"operation\": map[string]interface{}{\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"enum\": []string{\"add\", \"subtract\", \"multiply\", \"divide\"},\n\t\t\t\t\t},\n\t\t\t\t\t\"a\": map[string]interface{}{\n\t\t\t\t\t\t\"type\":        \"number\",\n\t\t\t\t\t\t\"description\": \"First number\",\n\t\t\t\t\t},\n\t\t\t\t\t\"b\": map[string]interface{}{\n\t\t\t\t\t\t\"type\":        \"number\",\n\t\t\t\t\t\t\"description\": \"Second number\",\n\t\t\t\t\t},\n\t\t\t\t\t\"required\": []string{\"operation\", \"a\", \"b\"},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t}\n\n\t// Create request with tool\n\treq := openai.CreateChatCompletionRequest(\n\t\t\"gpt-4\",\n\t\t[]base.Message{\n\t\t\topenai.UserMessage{\n\t\t\t\tContent: \"What is 25 * 17?\",\n\t\t\t\tRole:    \"user\",\n\t\t\t},\n\t\t},\n\t)\n\treq.AddTool(calculatorTool)\n\treq.SetToolChoice(\"auto\")\n\n\tclient := openai.NewClient(apiKey)\n\tctx := context.Background()\n\n\tresp, err := client.CreateChatCompletion(ctx, req)\n\tif err != nil {\n\t\tlog.Fatalf(\"Failed to create chat completion: %v\", err)\n\t}\n\n\tfmt.Printf(\"Response: %s\\n\", resp.Choices[0].Message.Content)\n\n\t// Check if tool was called\n\tif len(resp.Choices[0].Message.ToolCalls) > 0 {\n\t\tfmt.Printf(\"Tool called: %s\\n\", resp.Choices[0].Message.ToolCalls[0].Function.Name)\n\t\tfmt.Printf(\"Arguments: %s\\n\", resp.Choices[0].Message.ToolCalls[0].Function.Arguments)\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}