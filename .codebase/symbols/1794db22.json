{
  "file_path": "/work/internal/filepathext/filepath_test.go",
  "file_hash": "9db611cb75cfa391435df5cba3026af0a2e520e7",
  "updated_at": "2025-12-26T17:34:22.080272",
  "symbols": {
    "function_TestSmartJoin_9": {
      "name": "TestSmartJoin",
      "type": "function",
      "start_line": 9,
      "end_line": 86,
      "content_hash": "2e81d673cb2a54409668a318d6bfcb8462aa7878",
      "content": "func TestSmartJoin(t *testing.T) {\n\ttests := []struct {\n\t\tname     string\n\t\tone      string\n\t\ttwo      string\n\t\texpected string\n\t}{\n\t\t{\n\t\t\tname:     \"both relative paths\",\n\t\t\tone:      \"foo\",\n\t\t\ttwo:      \"bar\",\n\t\t\texpected: filepath.Join(\"foo\", \"bar\"),\n\t\t},\n\t\t{\n\t\t\tname:     \"second path absolute\",\n\t\t\tone:      \"foo\",\n\t\t\ttwo:      \"/absolute/path\",\n\t\t\texpected: \"/absolute/path\",\n\t\t},\n\t\t{\n\t\t\tname:     \"first path absolute, second relative\",\n\t\t\tone:      \"/absolute\",\n\t\t\ttwo:      \"relative\",\n\t\t\texpected: filepath.Join(\"/absolute\", \"relative\"),\n\t\t},\n\t\t{\n\t\t\tname:     \"empty first path\",\n\t\t\tone:      \"\",\n\t\t\ttwo:      \"bar\",\n\t\t\texpected: \"bar\",\n\t\t},\n\t\t{\n\t\t\tname:     \"empty second path\",\n\t\t\tone:      \"foo\",\n\t\t\ttwo:      \"\",\n\t\t\texpected: \"foo\",\n\t\t},\n\t\t{\n\t\t\tname:     \"both empty\",\n\t\t\tone:      \"\",\n\t\t\ttwo:      \"\",\n\t\t\texpected: \"\",\n\t\t},\n\t}\n\n\t// Add Windows-specific tests\n\tif runtime.GOOS == \"windows\" {\n\t\ttests = append(tests, []struct {\n\t\t\tname     string\n\t\t\tone      string\n\t\t\ttwo      string\n\t\t\texpected string\n\t\t}{\n\t\t\t{\n\t\t\t\tname:     \"windows drive letter absolute\",\n\t\t\t\tone:      \"foo\",\n\t\t\t\ttwo:      \"C:\\\\absolute\\\\path\",\n\t\t\t\texpected: \"C:\\\\absolute\\\\path\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:     \"windows UNC path\",\n\t\t\t\tone:      \"foo\",\n\t\t\t\ttwo:      \"\\\\\\\\server\\\\share\",\n\t\t\t\texpected: \"\\\\\\\\server\\\\share\",\n\t\t\t},\n\t\t}...)\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\tresult := SmartJoin(tt.one, tt.two)\n\t\t\tif result != tt.expected {\n\t\t\t\tt.Errorf(\"SmartJoin(%q, %q) = %q, want %q\", tt.one, tt.two, result, tt.expected)\n\t\t\t}\n\t\t})\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestSmartIsAbs_87": {
      "name": "TestSmartIsAbs",
      "type": "function",
      "start_line": 87,
      "end_line": 171,
      "content_hash": "01ad912c2cfe44b4f7e1c35c0a84c03abde5f05b",
      "content": "func TestSmartIsAbs(t *testing.T) {\n\ttests := []struct {\n\t\tname     string\n\t\tpath     string\n\t\texpected bool\n\t}{\n\t\t{\n\t\t\tname:     \"unix absolute path\",\n\t\t\tpath:     \"/absolute/path\",\n\t\t\texpected: true,\n\t\t},\n\t\t{\n\t\t\tname:     \"unix relative path\",\n\t\t\tpath:     \"relative/path\",\n\t\t\texpected: false,\n\t\t},\n\t\t{\n\t\t\tname:     \"unix relative with dots\",\n\t\t\tpath:     \"../relative\",\n\t\t\texpected: false,\n\t\t},\n\t\t{\n\t\t\tname:     \"empty path\",\n\t\t\tpath:     \"\",\n\t\t\texpected: false,\n\t\t},\n\t\t{\n\t\t\tname:     \"single slash\",\n\t\t\tpath:     \"/\",\n\t\t\texpected: true,\n\t\t},\n\t\t{\n\t\t\tname:     \"relative current dir\",\n\t\t\tpath:     \"./foo\",\n\t\t\texpected: false,\n\t\t},\n\t}\n\n\t// Add Windows-specific tests\n\tif runtime.GOOS == \"windows\" {\n\t\ttests = append(tests, []struct {\n\t\t\tname     string\n\t\t\tpath     string\n\t\t\texpected bool\n\t\t}{\n\t\t\t{\n\t\t\t\tname:     \"windows drive letter\",\n\t\t\t\tpath:     \"C:\\\\path\",\n\t\t\t\texpected: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:     \"windows drive letter forward slash\",\n\t\t\t\tpath:     \"C:/path\",\n\t\t\t\texpected: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:     \"windows UNC path\",\n\t\t\t\tpath:     \"\\\\\\\\server\\\\share\",\n\t\t\t\texpected: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:     \"windows relative with backslash\",\n\t\t\t\tpath:     \"relative\\\\path\",\n\t\t\t\texpected: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:     \"unix-style absolute on windows\",\n\t\t\t\tpath:     \"/absolute/path\",\n\t\t\t\texpected: true,\n\t\t\t},\n\t\t}...)\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\tresult := SmartIsAbs(tt.path)\n\t\t\tif result != tt.expected {\n\t\t\t\tt.Errorf(\"SmartIsAbs(%q) = %v, want %v\", tt.path, result, tt.expected)\n\t\t\t}\n\t\t})\n\t}\n}\n\n// TestSmartJoinWithAbsolutePaths tests that SmartJoin correctly handles\n// when the second path is absolute",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestSmartJoinWithAbsolutePaths_172": {
      "name": "TestSmartJoinWithAbsolutePaths",
      "type": "function",
      "start_line": 172,
      "end_line": 201,
      "content_hash": "605774447de76dca41c80a31ceccc03be8b952a1",
      "content": "func TestSmartJoinWithAbsolutePaths(t *testing.T) {\n\ttestCases := []struct {\n\t\tbase     string\n\t\tpath     string\n\t\tabsolute bool\n\t}{\n\t\t{\"/home/user\", \"/etc/config\", true},\n\t\t{\"/home/user\", \"relative/path\", false},\n\t\t{\"relative\", \"/absolute\", true},\n\t\t{\"relative\", \"also/relative\", false},\n\t}\n\n\tfor _, tc := range testCases {\n\t\tresult := SmartJoin(tc.base, tc.path)\n\t\tif tc.absolute {\n\t\t\tif result != tc.path {\n\t\t\t\tt.Errorf(\"SmartJoin(%q, %q) = %q, expected %q (should use absolute path)\",\n\t\t\t\t\ttc.base, tc.path, result, tc.path)\n\t\t\t}\n\t\t} else {\n\t\t\texpected := filepath.Join(tc.base, tc.path)\n\t\t\tif result != expected {\n\t\t\t\tt.Errorf(\"SmartJoin(%q, %q) = %q, expected %q\",\n\t\t\t\t\ttc.base, tc.path, result, expected)\n\t\t\t}\n\t\t}\n\t}\n}\n\n// TestCrossPlatformPaths tests that paths work correctly across platforms",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestCrossPlatformPaths_202": {
      "name": "TestCrossPlatformPaths",
      "type": "function",
      "start_line": 202,
      "end_line": 232,
      "content_hash": "5c6efb6bdea31d916ee6eb90aa96c7c784b97bad",
      "content": "func TestCrossPlatformPaths(t *testing.T) {\n\t// These should work on both Unix and Windows\n\ttestCases := []struct {\n\t\tone        string\n\t\ttwo        string\n\t\tshouldJoin bool\n\t}{\n\t\t{\"base\", \"relative\", true},\n\t\t{\"base\", \"/absolute\", false},\n\t\t{\"/absolute\", \"relative\", true},\n\t\t{\"\", \"path\", true},\n\t}\n\n\tfor _, tc := range testCases {\n\t\tresult := SmartJoin(tc.one, tc.two)\n\t\tisAbs := SmartIsAbs(tc.two)\n\n\t\tif !tc.shouldJoin && !isAbs {\n\t\t\tt.Errorf(\"Expected %q to be absolute, but SmartIsAbs returned false\", tc.two)\n\t\t}\n\n\t\tif tc.shouldJoin && isAbs && tc.two != \"\" {\n\t\t\tt.Errorf(\"Expected %q to be relative, but SmartIsAbs returned true\", tc.two)\n\t\t}\n\n\t\tif !tc.shouldJoin && result != tc.two {\n\t\t\tt.Errorf(\"SmartJoin(%q, %q) = %q, expected absolute path %q\",\n\t\t\t\ttc.one, tc.two, result, tc.two)\n\t\t}\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}