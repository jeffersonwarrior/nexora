{
  "file_path": "/work/external-deps/Context-Engine/docker-compose-bindmount-checkout.yml",
  "file_hash": "7e5c07470a3f4d5bd665deb8ec3d53c7013a444a",
  "updated_at": "2025-12-26T17:34:22.584449",
  "symbols": {
    "key_services_1": {
      "name": "services",
      "type": "key",
      "start_line": 1,
      "end_line": 303,
      "content_hash": "7af78e33148125fca7477698a0d9d693a79f04a7",
      "content": "services:\n  qdrant:\n    image: qdrant/qdrant:latest\n    container_name: qdrant-db\n    # Expose Qdrant database APIs to the host\n    # 6333 = HTTP API, 6334 = gRPC\n    ports:\n      - \"6333:6333\"\n      - \"6334:6334\"\n    volumes:\n      - qdrant_storage:/qdrant/storage\n\n  mcp:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp\n    container_name: mcp-search\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      # Ensure the server binds to all interfaces for container networking\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=${FASTMCP_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n\n    # SSE endpoint for IDE agents at http://localhost:8000/sse\n    ports:\n      - \"18000:18000\"\n\n      - \"8000:8000\"\n\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n\n  mcp_indexer:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer\n    container_name: mcp-indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HEALTH_PORT=18001\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=${FASTMCP_INDEXER_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # SSE endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_PORT:-8001}/sse\n    ports:\n      - \"${FASTMCP_INDEXER_PORT:-8001}:8001\"\n      - \"18001:18001\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work\n\n\n  mcp_http:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp\n    container_name: mcp-search-http\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=8000\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_HTTP_PORT:-8002}/mcp/\n    ports:\n      - \"${FASTMCP_HTTP_HEALTH_PORT:-18002}:18000\"\n      - \"${FASTMCP_HTTP_PORT:-8002}:8000\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n\n  mcp_indexer_http:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer\n    container_name: mcp-indexer-http\n    depends_on:\n      - qdrant\n      - llamacpp\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=8001\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - FASTMCP_HEALTH_PORT=18001\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_HTTP_PORT:-8003}/mcp/\n    ports:\n      - \"${FASTMCP_INDEXER_HTTP_PORT:-8003}:8001\"\n      - \"${FASTMCP_INDEXER_HTTP_HEALTH_PORT:-18003}:18001\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work\n\n  llamacpp:\n    image: ghcr.io/ggml-org/llama.cpp:server\n    container_name: llama-decoder\n    # Optional sidecar providing a text-generation API on :8080\n    # No behavior change unless REFRAG_DECODER=1\n    environment:\n      - LLAMACPP_CTX_SIZE=${LLAMACPP_CTX_SIZE:-8192}\n      - LLAMACPP_HOST=0.0.0.0\n      - LLAMACPP_PORT=8080\n      - LLAMACPP_USE_GPU=${LLAMACPP_USE_GPU:-0}\n      - LLAMACPP_GPU_LAYERS=${LLAMACPP_GPU_LAYERS:-0}\n      - LLAMACPP_GPU_SPLIT=${LLAMACPP_GPU_SPLIT:-}\n      - LLAMACPP_THREADS=${LLAMACPP_THREADS:-}\n      - LLAMACPP_EXTRA_ARGS=${LLAMACPP_EXTRA_ARGS:-}\n      - LLAMACPP_NO_WARMUP=${LLAMACPP_NO_WARMUP:-1}\n      - LLAMACPP_TEMPERATURE=${LLAMACPP_TEMPERATURE:-}\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - ./models:/models:ro\n    entrypoint: [\"/bin/sh\",\"-lc\"]\n    command:\n      - |\n        set -e\n        ARGS=\"--model /models/model.gguf --host ${LLAMACPP_HOST:-0.0.0.0} --port ${LLAMACPP_PORT:-8080} --ctx-size ${LLAMACPP_CTX_SIZE:-8192}\"\n        if [ \"${LLAMACPP_USE_GPU:-0}\" = \"1\" ]; then\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:--1}\"\n        else\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:-0}\"\n        fi\n        ARGS=\"$$ARGS --n-gpu-layers $${LAYERS}\"\n        if [ -n \"${LLAMACPP_GPU_SPLIT:-}\" ]; then\n          ARGS=\"$$ARGS --tensor-split ${LLAMACPP_GPU_SPLIT}\"\n        fi\n        if [ \"${LLAMACPP_NO_WARMUP:-1}\" != \"0\" ]; then\n          ARGS=\"$$ARGS --no-warmup\"\n        fi\n        if [ -n \"${LLAMACPP_THREADS:-}\" ]; then\n          ARGS=\"$$ARGS --threads ${LLAMACPP_THREADS}\"\n        fi\n        if [ -n \"${LLAMACPP_EXTRA_ARGS:-}\" ]; then\n          ARGS=\"$$ARGS ${LLAMACPP_EXTRA_ARGS}\"\n        fi\n        exec /app/llama-server $$ARGS\n\n  indexer:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n\n    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/ingest_code.py\"]\n\n  watcher:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - WATCH_ROOT=/work\n      # Watcher-specific backpressure & timeouts (safer defaults)\n      - QDRANT_TIMEOUT=60\n      - MAX_MICRO_CHUNKS_PER_FILE=${MAX_MICRO_CHUNKS_PER_FILE:-200}\n      - INDEX_UPSERT_BATCH=128\n      - INDEX_UPSERT_RETRIES=5\n      - WATCH_DEBOUNCE_SECS=${WATCH_DEBOUNCE_SECS:-1.5}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/watch_index.py\"]\n\n\n  upload_service:\n    build:\n      context: .\n      dockerfile: Dockerfile.upload-service\n    container_name: upload-service\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - UPLOAD_SERVICE_HOST=0.0.0.0\n      - UPLOAD_SERVICE_PORT=8002\n      - QDRANT_URL=${QDRANT_URL}\n      - WORK_DIR=/work\n      - CTXCE_ADMIN_COLLECTION_DELETE_ENABLED=0\n      - CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY=${CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    ports:\n      - \"8004:8002\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:rw\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n    user: \"0:0\"\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8002/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 10s\n    restart: unless-stopped\n\n  init_payload:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n\n    entrypoint: [\"python\", \"/app/scripts/create_indexes.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.qdrant_2": {
      "name": "services.qdrant",
      "type": "key",
      "start_line": 2,
      "end_line": 11,
      "content_hash": "55f1cf7837a912840d422fba8e8f872509156198",
      "content": "  qdrant:\n    image: qdrant/qdrant:latest\n    container_name: qdrant-db\n    # Expose Qdrant database APIs to the host\n    # 6333 = HTTP API, 6334 = gRPC\n    ports:\n      - \"6333:6333\"\n      - \"6334:6334\"\n    volumes:\n      - qdrant_storage:/qdrant/storage",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.qdrant.image_3": {
      "name": "services.qdrant.image",
      "type": "key",
      "start_line": 3,
      "end_line": 3,
      "content_hash": "e3548351c22deb286c483b3cce5c2d7b616d9418",
      "content": "    image: qdrant/qdrant:latest",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.qdrant.container_name_4": {
      "name": "services.qdrant.container_name",
      "type": "key",
      "start_line": 4,
      "end_line": 4,
      "content_hash": "e2ae7e36533fa919e471908d1f1cdebfe8b429b7",
      "content": "    container_name: qdrant-db",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.qdrant.ports_7": {
      "name": "services.qdrant.ports",
      "type": "key",
      "start_line": 7,
      "end_line": 9,
      "content_hash": "7084a91e5611ffa1a2802770a8f74998d43f7604",
      "content": "    ports:\n      - \"6333:6333\"\n      - \"6334:6334\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.qdrant.volumes_10": {
      "name": "services.qdrant.volumes",
      "type": "key",
      "start_line": 10,
      "end_line": 11,
      "content_hash": "60831b2c654f48029f7a619fb86ecf52079baf85",
      "content": "    volumes:\n      - qdrant_storage:/qdrant/storage",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_13": {
      "name": "services.mcp",
      "type": "key",
      "start_line": 13,
      "end_line": 44,
      "content_hash": "792851f2a88aece8e4c932e0f39f24b6cb1055f3",
      "content": "  mcp:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp\n    container_name: mcp-search\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      # Ensure the server binds to all interfaces for container networking\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=${FASTMCP_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n\n    # SSE endpoint for IDE agents at http://localhost:8000/sse\n    ports:\n      - \"18000:18000\"\n\n      - \"8000:8000\"\n\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.build_14": {
      "name": "services.mcp.build",
      "type": "key",
      "start_line": 14,
      "end_line": 16,
      "content_hash": "f4015ef42c7d4c8909de3cd6149b2476b974681d",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.mcp",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.build.context_15": {
      "name": "services.mcp.build.context",
      "type": "key",
      "start_line": 15,
      "end_line": 15,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.build.dockerfile_16": {
      "name": "services.mcp.build.dockerfile",
      "type": "key",
      "start_line": 16,
      "end_line": 16,
      "content_hash": "d9c9833ce19ca288ec68f35f4e13e9714acba94e",
      "content": "      dockerfile: Dockerfile.mcp",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.container_name_17": {
      "name": "services.mcp.container_name",
      "type": "key",
      "start_line": 17,
      "end_line": 17,
      "content_hash": "35ada76a6c961df9a7344965a6075b4383a43862",
      "content": "    container_name: mcp-search",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.depends_on_18": {
      "name": "services.mcp.depends_on",
      "type": "key",
      "start_line": 18,
      "end_line": 19,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.env_file_20": {
      "name": "services.mcp.env_file",
      "type": "key",
      "start_line": 20,
      "end_line": 21,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.environment_22": {
      "name": "services.mcp.environment",
      "type": "key",
      "start_line": 22,
      "end_line": 37,
      "content_hash": "7c656c20b79ca34e19a1d975d410aeb5684635cf",
      "content": "    environment:\n      # Ensure the server binds to all interfaces for container networking\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=${FASTMCP_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n\n    # SSE endpoint for IDE agents at http://localhost:8000/sse",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.ports_38": {
      "name": "services.mcp.ports",
      "type": "key",
      "start_line": 38,
      "end_line": 41,
      "content_hash": "96946ec92db7419c816181d5753e6d251d4779a9",
      "content": "    ports:\n      - \"18000:18000\"\n\n      - \"8000:8000\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp.volumes_43": {
      "name": "services.mcp.volumes",
      "type": "key",
      "start_line": 43,
      "end_line": 44,
      "content_hash": "5f4197b204d4c6dc0384fced12b44acb0748318d",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_46": {
      "name": "services.mcp_indexer",
      "type": "key",
      "start_line": 46,
      "end_line": 76,
      "content_hash": "4e95954bee1aa6662476162f2622430755dae8ee",
      "content": "  mcp_indexer:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer\n    container_name: mcp-indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HEALTH_PORT=18001\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=${FASTMCP_INDEXER_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # SSE endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_PORT:-8001}/sse\n    ports:\n      - \"${FASTMCP_INDEXER_PORT:-8001}:8001\"\n      - \"18001:18001\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.build_47": {
      "name": "services.mcp_indexer.build",
      "type": "key",
      "start_line": 47,
      "end_line": 49,
      "content_hash": "e9fa437527dc0dcf68255ae6d6daa8730837a3ff",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.build.context_48": {
      "name": "services.mcp_indexer.build.context",
      "type": "key",
      "start_line": 48,
      "end_line": 48,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.build.dockerfile_49": {
      "name": "services.mcp_indexer.build.dockerfile",
      "type": "key",
      "start_line": 49,
      "end_line": 49,
      "content_hash": "a39248293ab9144c4323411115cf4a3d7b0b3d0e",
      "content": "      dockerfile: Dockerfile.mcp-indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.container_name_50": {
      "name": "services.mcp_indexer.container_name",
      "type": "key",
      "start_line": 50,
      "end_line": 50,
      "content_hash": "32af5677a50f9b5c8786b945cf452362f565f7eb",
      "content": "    container_name: mcp-indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.depends_on_51": {
      "name": "services.mcp_indexer.depends_on",
      "type": "key",
      "start_line": 51,
      "end_line": 52,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.env_file_53": {
      "name": "services.mcp_indexer.env_file",
      "type": "key",
      "start_line": 53,
      "end_line": 54,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.environment_55": {
      "name": "services.mcp_indexer.environment",
      "type": "key",
      "start_line": 55,
      "end_line": 71,
      "content_hash": "8214a1e148503a8754ce85309973971f1b1ed6c8",
      "content": "    environment:\n      - FASTMCP_HEALTH_PORT=18001\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=${FASTMCP_INDEXER_PORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # SSE endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_PORT:-8001}/sse",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.ports_72": {
      "name": "services.mcp_indexer.ports",
      "type": "key",
      "start_line": 72,
      "end_line": 74,
      "content_hash": "433ba8bff9cf9163ae16bd70e2400542f7e17793",
      "content": "    ports:\n      - \"${FASTMCP_INDEXER_PORT:-8001}:8001\"\n      - \"18001:18001\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer.volumes_75": {
      "name": "services.mcp_indexer.volumes",
      "type": "key",
      "start_line": 75,
      "end_line": 76,
      "content_hash": "a24f8189a773a0aa2ed9343a4126c80fc489a29c",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http_79": {
      "name": "services.mcp_http",
      "type": "key",
      "start_line": 79,
      "end_line": 107,
      "content_hash": "3a7ed64ef7ae9d2e5883296ff976f39da6caff10",
      "content": "  mcp_http:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp\n    container_name: mcp-search-http\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=8000\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_HTTP_PORT:-8002}/mcp/\n    ports:\n      - \"${FASTMCP_HTTP_HEALTH_PORT:-18002}:18000\"\n      - \"${FASTMCP_HTTP_PORT:-8002}:8000\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.build_80": {
      "name": "services.mcp_http.build",
      "type": "key",
      "start_line": 80,
      "end_line": 82,
      "content_hash": "f4015ef42c7d4c8909de3cd6149b2476b974681d",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.mcp",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.build.context_81": {
      "name": "services.mcp_http.build.context",
      "type": "key",
      "start_line": 81,
      "end_line": 81,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.build.dockerfile_82": {
      "name": "services.mcp_http.build.dockerfile",
      "type": "key",
      "start_line": 82,
      "end_line": 82,
      "content_hash": "d9c9833ce19ca288ec68f35f4e13e9714acba94e",
      "content": "      dockerfile: Dockerfile.mcp",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.container_name_83": {
      "name": "services.mcp_http.container_name",
      "type": "key",
      "start_line": 83,
      "end_line": 83,
      "content_hash": "0f1d331591afd54bb2495767c60ce8ac95e96468",
      "content": "    container_name: mcp-search-http",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.depends_on_84": {
      "name": "services.mcp_http.depends_on",
      "type": "key",
      "start_line": 84,
      "end_line": 85,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.env_file_86": {
      "name": "services.mcp_http.env_file",
      "type": "key",
      "start_line": 86,
      "end_line": 87,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.environment_88": {
      "name": "services.mcp_http.environment",
      "type": "key",
      "start_line": 88,
      "end_line": 102,
      "content_hash": "ba5c8a550f6c1ac42cb9b55bdc0459faed1ef2b0",
      "content": "    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_PORT=8000\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - TOOL_STORE_DESCRIPTION=${TOOL_STORE_DESCRIPTION}\n      - TOOL_FIND_DESCRIPTION=${TOOL_FIND_DESCRIPTION}\n      - FASTMCP_HEALTH_PORT=18000\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_HTTP_PORT:-8002}/mcp/",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.ports_103": {
      "name": "services.mcp_http.ports",
      "type": "key",
      "start_line": 103,
      "end_line": 105,
      "content_hash": "f82b8a118a9cf59dbc011b88a54e269837e1aa43",
      "content": "    ports:\n      - \"${FASTMCP_HTTP_HEALTH_PORT:-18002}:18000\"\n      - \"${FASTMCP_HTTP_PORT:-8002}:8000\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_http.volumes_106": {
      "name": "services.mcp_http.volumes",
      "type": "key",
      "start_line": 106,
      "end_line": 107,
      "content_hash": "5f4197b204d4c6dc0384fced12b44acb0748318d",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http_109": {
      "name": "services.mcp_indexer_http",
      "type": "key",
      "start_line": 109,
      "end_line": 141,
      "content_hash": "7f5549a482bc595245c1e70804cb8dceea15995a",
      "content": "  mcp_indexer_http:\n    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer\n    container_name: mcp-indexer-http\n    depends_on:\n      - qdrant\n      - llamacpp\n    env_file:\n      - .env\n    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=8001\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - FASTMCP_HEALTH_PORT=18001\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_HTTP_PORT:-8003}/mcp/\n    ports:\n      - \"${FASTMCP_INDEXER_HTTP_PORT:-8003}:8001\"\n      - \"${FASTMCP_INDEXER_HTTP_HEALTH_PORT:-18003}:18001\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.build_110": {
      "name": "services.mcp_indexer_http.build",
      "type": "key",
      "start_line": 110,
      "end_line": 112,
      "content_hash": "e9fa437527dc0dcf68255ae6d6daa8730837a3ff",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.mcp-indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.build.context_111": {
      "name": "services.mcp_indexer_http.build.context",
      "type": "key",
      "start_line": 111,
      "end_line": 111,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.build.dockerfile_112": {
      "name": "services.mcp_indexer_http.build.dockerfile",
      "type": "key",
      "start_line": 112,
      "end_line": 112,
      "content_hash": "a39248293ab9144c4323411115cf4a3d7b0b3d0e",
      "content": "      dockerfile: Dockerfile.mcp-indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.container_name_113": {
      "name": "services.mcp_indexer_http.container_name",
      "type": "key",
      "start_line": 113,
      "end_line": 113,
      "content_hash": "5dd41abcdca867ec693b9176a6b139f938afff75",
      "content": "    container_name: mcp-indexer-http",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.depends_on_114": {
      "name": "services.mcp_indexer_http.depends_on",
      "type": "key",
      "start_line": 114,
      "end_line": 116,
      "content_hash": "de829bf7b6f3e3bfd9530880c176a86c2c0932bf",
      "content": "    depends_on:\n      - qdrant\n      - llamacpp",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.env_file_117": {
      "name": "services.mcp_indexer_http.env_file",
      "type": "key",
      "start_line": 117,
      "end_line": 118,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.environment_119": {
      "name": "services.mcp_indexer_http.environment",
      "type": "key",
      "start_line": 119,
      "end_line": 136,
      "content_hash": "152534d7e36d7809846da5733f864bdf56741ae1",
      "content": "    environment:\n      - FASTMCP_HOST=${FASTMCP_HOST}\n      - FASTMCP_INDEXER_PORT=8001\n      - FASTMCP_TRANSPORT=${FASTMCP_HTTP_TRANSPORT}\n      - QDRANT_URL=${QDRANT_URL}\n      - FASTMCP_HEALTH_PORT=18001\n      - DEBUG_CONTEXT_ANSWER=${DEBUG_CONTEXT_ANSWER:-1}\n      - REFRAG_DECODER=${REFRAG_DECODER:-1}\n      - LLAMACPP_URL=${LLAMACPP_URL:-http://llamacpp:8080}\n      - USE_GPU_DECODER=${USE_GPU_DECODER:-0}\n      - LLAMACPP_TIMEOUT_SEC=${LLAMACPP_TIMEOUT_SEC:-180}\n      - CTX_REQUIRE_IDENTIFIER=${CTX_REQUIRE_IDENTIFIER:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    # Streamable HTTP endpoint for IDE agents at http://localhost:${FASTMCP_INDEXER_HTTP_PORT:-8003}/mcp/",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.ports_137": {
      "name": "services.mcp_indexer_http.ports",
      "type": "key",
      "start_line": 137,
      "end_line": 139,
      "content_hash": "945fd9e04df0b59fe71cff363afde342a4fc52b7",
      "content": "    ports:\n      - \"${FASTMCP_INDEXER_HTTP_PORT:-8003}:8001\"\n      - \"${FASTMCP_INDEXER_HTTP_HEALTH_PORT:-18003}:18001\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.mcp_indexer_http.volumes_140": {
      "name": "services.mcp_indexer_http.volumes",
      "type": "key",
      "start_line": 140,
      "end_line": 141,
      "content_hash": "a24f8189a773a0aa2ed9343a4126c80fc489a29c",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp_143": {
      "name": "services.llamacpp",
      "type": "key",
      "start_line": 143,
      "end_line": 186,
      "content_hash": "c3eec7132de352c9ed7a52dce77d583e7682f562",
      "content": "  llamacpp:\n    image: ghcr.io/ggml-org/llama.cpp:server\n    container_name: llama-decoder\n    # Optional sidecar providing a text-generation API on :8080\n    # No behavior change unless REFRAG_DECODER=1\n    environment:\n      - LLAMACPP_CTX_SIZE=${LLAMACPP_CTX_SIZE:-8192}\n      - LLAMACPP_HOST=0.0.0.0\n      - LLAMACPP_PORT=8080\n      - LLAMACPP_USE_GPU=${LLAMACPP_USE_GPU:-0}\n      - LLAMACPP_GPU_LAYERS=${LLAMACPP_GPU_LAYERS:-0}\n      - LLAMACPP_GPU_SPLIT=${LLAMACPP_GPU_SPLIT:-}\n      - LLAMACPP_THREADS=${LLAMACPP_THREADS:-}\n      - LLAMACPP_EXTRA_ARGS=${LLAMACPP_EXTRA_ARGS:-}\n      - LLAMACPP_NO_WARMUP=${LLAMACPP_NO_WARMUP:-1}\n      - LLAMACPP_TEMPERATURE=${LLAMACPP_TEMPERATURE:-}\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - ./models:/models:ro\n    entrypoint: [\"/bin/sh\",\"-lc\"]\n    command:\n      - |\n        set -e\n        ARGS=\"--model /models/model.gguf --host ${LLAMACPP_HOST:-0.0.0.0} --port ${LLAMACPP_PORT:-8080} --ctx-size ${LLAMACPP_CTX_SIZE:-8192}\"\n        if [ \"${LLAMACPP_USE_GPU:-0}\" = \"1\" ]; then\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:--1}\"\n        else\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:-0}\"\n        fi\n        ARGS=\"$$ARGS --n-gpu-layers $${LAYERS}\"\n        if [ -n \"${LLAMACPP_GPU_SPLIT:-}\" ]; then\n          ARGS=\"$$ARGS --tensor-split ${LLAMACPP_GPU_SPLIT}\"\n        fi\n        if [ \"${LLAMACPP_NO_WARMUP:-1}\" != \"0\" ]; then\n          ARGS=\"$$ARGS --no-warmup\"\n        fi\n        if [ -n \"${LLAMACPP_THREADS:-}\" ]; then\n          ARGS=\"$$ARGS --threads ${LLAMACPP_THREADS}\"\n        fi\n        if [ -n \"${LLAMACPP_EXTRA_ARGS:-}\" ]; then\n          ARGS=\"$$ARGS ${LLAMACPP_EXTRA_ARGS}\"\n        fi\n        exec /app/llama-server $$ARGS",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.image_144": {
      "name": "services.llamacpp.image",
      "type": "key",
      "start_line": 144,
      "end_line": 144,
      "content_hash": "903182a6231a1bcc71d9f2cb7e24cd0c9f73bcde",
      "content": "    image: ghcr.io/ggml-org/llama.cpp:server",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.container_name_145": {
      "name": "services.llamacpp.container_name",
      "type": "key",
      "start_line": 145,
      "end_line": 145,
      "content_hash": "b21cebb186d190e0e9e3723fd45f18bc052c512d",
      "content": "    container_name: llama-decoder",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.environment_148": {
      "name": "services.llamacpp.environment",
      "type": "key",
      "start_line": 148,
      "end_line": 158,
      "content_hash": "df042a848ae4e28703f017d5126b81b5b22409b3",
      "content": "    environment:\n      - LLAMACPP_CTX_SIZE=${LLAMACPP_CTX_SIZE:-8192}\n      - LLAMACPP_HOST=0.0.0.0\n      - LLAMACPP_PORT=8080\n      - LLAMACPP_USE_GPU=${LLAMACPP_USE_GPU:-0}\n      - LLAMACPP_GPU_LAYERS=${LLAMACPP_GPU_LAYERS:-0}\n      - LLAMACPP_GPU_SPLIT=${LLAMACPP_GPU_SPLIT:-}\n      - LLAMACPP_THREADS=${LLAMACPP_THREADS:-}\n      - LLAMACPP_EXTRA_ARGS=${LLAMACPP_EXTRA_ARGS:-}\n      - LLAMACPP_NO_WARMUP=${LLAMACPP_NO_WARMUP:-1}\n      - LLAMACPP_TEMPERATURE=${LLAMACPP_TEMPERATURE:-}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.ports_159": {
      "name": "services.llamacpp.ports",
      "type": "key",
      "start_line": 159,
      "end_line": 160,
      "content_hash": "33a0b4c6b23d07e8cb2eb88b705485b3b4f386d2",
      "content": "    ports:\n      - \"8080:8080\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.volumes_161": {
      "name": "services.llamacpp.volumes",
      "type": "key",
      "start_line": 161,
      "end_line": 162,
      "content_hash": "1545b006f4423d3cf5c6dbb5d2e2b388dff229d6",
      "content": "    volumes:\n      - ./models:/models:ro",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.entrypoint_163": {
      "name": "services.llamacpp.entrypoint",
      "type": "key",
      "start_line": 163,
      "end_line": 163,
      "content_hash": "adcfbd79313731ae1964bb67a19113f012b1695a",
      "content": "    entrypoint: [\"/bin/sh\",\"-lc\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.llamacpp.command_164": {
      "name": "services.llamacpp.command",
      "type": "key",
      "start_line": 164,
      "end_line": 186,
      "content_hash": "fbec419d6e402e9390abde4201311b25f9e48bf8",
      "content": "    command:\n      - |\n        set -e\n        ARGS=\"--model /models/model.gguf --host ${LLAMACPP_HOST:-0.0.0.0} --port ${LLAMACPP_PORT:-8080} --ctx-size ${LLAMACPP_CTX_SIZE:-8192}\"\n        if [ \"${LLAMACPP_USE_GPU:-0}\" = \"1\" ]; then\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:--1}\"\n        else\n          LAYERS=\"${LLAMACPP_GPU_LAYERS:-0}\"\n        fi\n        ARGS=\"$$ARGS --n-gpu-layers $${LAYERS}\"\n        if [ -n \"${LLAMACPP_GPU_SPLIT:-}\" ]; then\n          ARGS=\"$$ARGS --tensor-split ${LLAMACPP_GPU_SPLIT}\"\n        fi\n        if [ \"${LLAMACPP_NO_WARMUP:-1}\" != \"0\" ]; then\n          ARGS=\"$$ARGS --no-warmup\"\n        fi\n        if [ -n \"${LLAMACPP_THREADS:-}\" ]; then\n          ARGS=\"$$ARGS --threads ${LLAMACPP_THREADS}\"\n        fi\n        if [ -n \"${LLAMACPP_EXTRA_ARGS:-}\" ]; then\n          ARGS=\"$$ARGS ${LLAMACPP_EXTRA_ARGS}\"\n        fi\n        exec /app/llama-server $$ARGS",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer_188": {
      "name": "services.indexer",
      "type": "key",
      "start_line": 188,
      "end_line": 214,
      "content_hash": "92c851c3f3be0d2e21aa4d57d074a3691a4c164d",
      "content": "  indexer:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n\n    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/ingest_code.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.build_189": {
      "name": "services.indexer.build",
      "type": "key",
      "start_line": 189,
      "end_line": 191,
      "content_hash": "5f17dc77ad3fa01d41f4633c680af811d5f0719c",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.build.context_190": {
      "name": "services.indexer.build.context",
      "type": "key",
      "start_line": 190,
      "end_line": 190,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.build.dockerfile_191": {
      "name": "services.indexer.build.dockerfile",
      "type": "key",
      "start_line": 191,
      "end_line": 191,
      "content_hash": "fca1ab723f36dadaf106da76545461c692a4a079",
      "content": "      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.depends_on_192": {
      "name": "services.indexer.depends_on",
      "type": "key",
      "start_line": 192,
      "end_line": 193,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.env_file_194": {
      "name": "services.indexer.env_file",
      "type": "key",
      "start_line": 194,
      "end_line": 195,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.environment_196": {
      "name": "services.indexer.environment",
      "type": "key",
      "start_line": 196,
      "end_line": 208,
      "content_hash": "72879c96fc13ee8bb0a341a8e37797c7634ae254",
      "content": "    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.working_dir_209": {
      "name": "services.indexer.working_dir",
      "type": "key",
      "start_line": 209,
      "end_line": 209,
      "content_hash": "a3bcecc57a57c582c5b62e327b931a5b855c0336",
      "content": "    working_dir: /work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.volumes_210": {
      "name": "services.indexer.volumes",
      "type": "key",
      "start_line": 210,
      "end_line": 212,
      "content_hash": "3c99f67cab1363a4828ce7574b67059f267eaaf6",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.indexer.entrypoint_214": {
      "name": "services.indexer.entrypoint",
      "type": "key",
      "start_line": 214,
      "end_line": 214,
      "content_hash": "a014062cec3c114c96228edb1a843899ecf2562d",
      "content": "    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/ingest_code.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher_216": {
      "name": "services.watcher",
      "type": "key",
      "start_line": 216,
      "end_line": 248,
      "content_hash": "a322c61f01f437d04ef25ce428899e616d678a77",
      "content": "  watcher:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - WATCH_ROOT=/work\n      # Watcher-specific backpressure & timeouts (safer defaults)\n      - QDRANT_TIMEOUT=60\n      - MAX_MICRO_CHUNKS_PER_FILE=${MAX_MICRO_CHUNKS_PER_FILE:-200}\n      - INDEX_UPSERT_BATCH=128\n      - INDEX_UPSERT_RETRIES=5\n      - WATCH_DEBOUNCE_SECS=${WATCH_DEBOUNCE_SECS:-1.5}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/watch_index.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.build_217": {
      "name": "services.watcher.build",
      "type": "key",
      "start_line": 217,
      "end_line": 219,
      "content_hash": "5f17dc77ad3fa01d41f4633c680af811d5f0719c",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.build.context_218": {
      "name": "services.watcher.build.context",
      "type": "key",
      "start_line": 218,
      "end_line": 218,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.build.dockerfile_219": {
      "name": "services.watcher.build.dockerfile",
      "type": "key",
      "start_line": 219,
      "end_line": 219,
      "content_hash": "fca1ab723f36dadaf106da76545461c692a4a079",
      "content": "      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.depends_on_220": {
      "name": "services.watcher.depends_on",
      "type": "key",
      "start_line": 220,
      "end_line": 221,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.env_file_222": {
      "name": "services.watcher.env_file",
      "type": "key",
      "start_line": 222,
      "end_line": 223,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.environment_224": {
      "name": "services.watcher.environment",
      "type": "key",
      "start_line": 224,
      "end_line": 243,
      "content_hash": "5968e05a452c7589de8728f367e9706fa07f8d47",
      "content": "    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - HF_HOME=/tmp/huggingface\n      - HF_HUB_CACHE=/tmp/huggingface/hub\n      - HUGGINGFACE_HUB_CACHE=/tmp/huggingface/hub\n      - TRANSFORMERS_CACHE=/tmp/huggingface/transformers\n      - FASTEMBED_CACHE_PATH=/tmp/huggingface/fastembed\n      - HF_HUB_DISABLE_XET=1\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n      - WATCH_ROOT=/work\n      # Watcher-specific backpressure & timeouts (safer defaults)\n      - QDRANT_TIMEOUT=60\n      - MAX_MICRO_CHUNKS_PER_FILE=${MAX_MICRO_CHUNKS_PER_FILE:-200}\n      - INDEX_UPSERT_BATCH=128\n      - INDEX_UPSERT_RETRIES=5\n      - WATCH_DEBOUNCE_SECS=${WATCH_DEBOUNCE_SECS:-1.5}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.working_dir_244": {
      "name": "services.watcher.working_dir",
      "type": "key",
      "start_line": 244,
      "end_line": 244,
      "content_hash": "a3bcecc57a57c582c5b62e327b931a5b855c0336",
      "content": "    working_dir: /work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.volumes_245": {
      "name": "services.watcher.volumes",
      "type": "key",
      "start_line": 245,
      "end_line": 247,
      "content_hash": "3c99f67cab1363a4828ce7574b67059f267eaaf6",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.watcher.entrypoint_248": {
      "name": "services.watcher.entrypoint",
      "type": "key",
      "start_line": 248,
      "end_line": 248,
      "content_hash": "c358ca49aa9af1892c6d48094c3c3611dc4a4489",
      "content": "    entrypoint: [\"sh\", \"-c\", \"mkdir -p /tmp/huggingface/hub /tmp/huggingface/transformers /tmp/huggingface/fastembed && exec python /app/scripts/watch_index.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service_251": {
      "name": "services.upload_service",
      "type": "key",
      "start_line": 251,
      "end_line": 285,
      "content_hash": "7c55c6c82cbcfe030c2b8f323ab9978bf867c5db",
      "content": "  upload_service:\n    build:\n      context: .\n      dockerfile: Dockerfile.upload-service\n    container_name: upload-service\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - UPLOAD_SERVICE_HOST=0.0.0.0\n      - UPLOAD_SERVICE_PORT=8002\n      - QDRANT_URL=${QDRANT_URL}\n      - WORK_DIR=/work\n      - CTXCE_ADMIN_COLLECTION_DELETE_ENABLED=0\n      - CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY=${CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}\n    ports:\n      - \"8004:8002\"\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:rw\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n    user: \"0:0\"\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8002/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 10s\n    restart: unless-stopped",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.build_252": {
      "name": "services.upload_service.build",
      "type": "key",
      "start_line": 252,
      "end_line": 254,
      "content_hash": "fee696124b28e6bab4119a98c88807bae2edec38",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.upload-service",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.build.context_253": {
      "name": "services.upload_service.build.context",
      "type": "key",
      "start_line": 253,
      "end_line": 253,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.build.dockerfile_254": {
      "name": "services.upload_service.build.dockerfile",
      "type": "key",
      "start_line": 254,
      "end_line": 254,
      "content_hash": "00d6f4c127b9ffaea6757ddaf3cc642ef415573b",
      "content": "      dockerfile: Dockerfile.upload-service",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.container_name_255": {
      "name": "services.upload_service.container_name",
      "type": "key",
      "start_line": 255,
      "end_line": 255,
      "content_hash": "9619f7f08da52ad5fd1882bb9144eba6e0b3b1ac",
      "content": "    container_name: upload-service",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.depends_on_256": {
      "name": "services.upload_service.depends_on",
      "type": "key",
      "start_line": 256,
      "end_line": 257,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.env_file_258": {
      "name": "services.upload_service.env_file",
      "type": "key",
      "start_line": 258,
      "end_line": 259,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.environment_260": {
      "name": "services.upload_service.environment",
      "type": "key",
      "start_line": 260,
      "end_line": 272,
      "content_hash": "2e9ac1cb909ec7b4e595b2290748358c5dd75a17",
      "content": "    environment:\n      - UPLOAD_SERVICE_HOST=0.0.0.0\n      - UPLOAD_SERVICE_PORT=8002\n      - QDRANT_URL=${QDRANT_URL}\n      - WORK_DIR=/work\n      - CTXCE_ADMIN_COLLECTION_DELETE_ENABLED=0\n      - CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY=${CTXCE_COLLECTION_REGISTRY_UNDELETE_ON_DISCOVERY:-0}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n      - EMBEDDING_MODEL=${EMBEDDING_MODEL}\n      - EMBEDDING_PROVIDER=${EMBEDDING_PROVIDER}\n      - QWEN3_EMBEDDING_ENABLED=${QWEN3_EMBEDDING_ENABLED:-0}\n      - QWEN3_QUERY_INSTRUCTION=${QWEN3_QUERY_INSTRUCTION:-1}\n      - QWEN3_INSTRUCTION_TEXT=${QWEN3_INSTRUCTION_TEXT}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.ports_273": {
      "name": "services.upload_service.ports",
      "type": "key",
      "start_line": 273,
      "end_line": 274,
      "content_hash": "aa33b446c93a33bb8434e70b72b20edc32eded31",
      "content": "    ports:\n      - \"8004:8002\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.volumes_275": {
      "name": "services.upload_service.volumes",
      "type": "key",
      "start_line": 275,
      "end_line": 277,
      "content_hash": "31e0a1c34f762d8a8bfe7d170a739af61240f155",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:rw\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.user_278": {
      "name": "services.upload_service.user",
      "type": "key",
      "start_line": 278,
      "end_line": 278,
      "content_hash": "cb1aa9113d6fbe9ae27179a2ef6b4411448baa38",
      "content": "    user: \"0:0\"",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck_279": {
      "name": "services.upload_service.healthcheck",
      "type": "key",
      "start_line": 279,
      "end_line": 284,
      "content_hash": "8c32c31bfd7060dd786227d192ed58586c44c7d1",
      "content": "    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8002/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 10s",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck.test_280": {
      "name": "services.upload_service.healthcheck.test",
      "type": "key",
      "start_line": 280,
      "end_line": 280,
      "content_hash": "302b4437714094b8b944af6fb87cc4fe847d0233",
      "content": "      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8002/health\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck.interval_281": {
      "name": "services.upload_service.healthcheck.interval",
      "type": "key",
      "start_line": 281,
      "end_line": 281,
      "content_hash": "0c30cb23938fbb260547c1093a7901b9a23d677c",
      "content": "      interval: 30s",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck.timeout_282": {
      "name": "services.upload_service.healthcheck.timeout",
      "type": "key",
      "start_line": 282,
      "end_line": 282,
      "content_hash": "acdf07325310ca35b5a7d8a9f9e17a372bd66ad3",
      "content": "      timeout: 10s",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck.retries_283": {
      "name": "services.upload_service.healthcheck.retries",
      "type": "key",
      "start_line": 283,
      "end_line": 283,
      "content_hash": "90508af0177a7483604e60303e00ae598b7d9bdb",
      "content": "      retries: 3",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.healthcheck.start_period_284": {
      "name": "services.upload_service.healthcheck.start_period",
      "type": "key",
      "start_line": 284,
      "end_line": 284,
      "content_hash": "829220e7e94de5e6214b8cd616f7ecd4d609dc49",
      "content": "      start_period: 10s",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.upload_service.restart_285": {
      "name": "services.upload_service.restart",
      "type": "key",
      "start_line": 285,
      "end_line": 285,
      "content_hash": "74557caa0a21d8e8ad7cfa64ad6b18fb402da2d0",
      "content": "    restart: unless-stopped",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload_287": {
      "name": "services.init_payload",
      "type": "key",
      "start_line": 287,
      "end_line": 303,
      "content_hash": "b709eadc82e8daa0ee168b0f79732701d0dc516b",
      "content": "  init_payload:\n    build:\n      context: .\n      dockerfile: Dockerfile.indexer\n    depends_on:\n      - qdrant\n    env_file:\n      - .env\n    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}\n    working_dir: /work\n    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw\n\n    entrypoint: [\"python\", \"/app/scripts/create_indexes.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.build_288": {
      "name": "services.init_payload.build",
      "type": "key",
      "start_line": 288,
      "end_line": 290,
      "content_hash": "5f17dc77ad3fa01d41f4633c680af811d5f0719c",
      "content": "    build:\n      context: .\n      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.build.context_289": {
      "name": "services.init_payload.build.context",
      "type": "key",
      "start_line": 289,
      "end_line": 289,
      "content_hash": "3659828311974a51a3b0608f8b6b8935e8116957",
      "content": "      context: .",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.build.dockerfile_290": {
      "name": "services.init_payload.build.dockerfile",
      "type": "key",
      "start_line": 290,
      "end_line": 290,
      "content_hash": "fca1ab723f36dadaf106da76545461c692a4a079",
      "content": "      dockerfile: Dockerfile.indexer",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.depends_on_291": {
      "name": "services.init_payload.depends_on",
      "type": "key",
      "start_line": 291,
      "end_line": 292,
      "content_hash": "9c01229f5474f21fdf7fbdcf97371fa5954c75db",
      "content": "    depends_on:\n      - qdrant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.env_file_293": {
      "name": "services.init_payload.env_file",
      "type": "key",
      "start_line": 293,
      "end_line": 294,
      "content_hash": "b41d395466de321da37bafc9e759bd64d3245410",
      "content": "    env_file:\n      - .env",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.environment_295": {
      "name": "services.init_payload.environment",
      "type": "key",
      "start_line": 295,
      "end_line": 297,
      "content_hash": "cf6423ed52af589f1dfb2c61065b6782dae14fa9",
      "content": "    environment:\n      - QDRANT_URL=${QDRANT_URL}\n      - COLLECTION_NAME=${COLLECTION_NAME:-codebase}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.working_dir_298": {
      "name": "services.init_payload.working_dir",
      "type": "key",
      "start_line": 298,
      "end_line": 298,
      "content_hash": "a3bcecc57a57c582c5b62e327b931a5b855c0336",
      "content": "    working_dir: /work",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.volumes_299": {
      "name": "services.init_payload.volumes",
      "type": "key",
      "start_line": 299,
      "end_line": 301,
      "content_hash": "3c99f67cab1363a4828ce7574b67059f267eaaf6",
      "content": "    volumes:\n      - ${HOST_INDEX_PATH:-.}:/work:ro\n      - ${HOST_INDEX_PATH:-.}/.codebase:/work/.codebase:rw",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_services.init_payload.entrypoint_303": {
      "name": "services.init_payload.entrypoint",
      "type": "key",
      "start_line": 303,
      "end_line": 303,
      "content_hash": "02145e4b90b2ceb6de40e8ec85fe676c7941d4a1",
      "content": "    entrypoint: [\"python\", \"/app/scripts/create_indexes.py\"]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_volumes_305": {
      "name": "volumes",
      "type": "key",
      "start_line": 305,
      "end_line": 308,
      "content_hash": "5ecfdb33353bbd0d65b1fdbd9aa33d8e00340ceb",
      "content": "volumes:\n  qdrant_storage:\n    driver: local\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_volumes.qdrant_storage_306": {
      "name": "volumes.qdrant_storage",
      "type": "key",
      "start_line": 306,
      "end_line": 308,
      "content_hash": "0cafe9b90fceaad762f1cf7905e096a31a71a27a",
      "content": "  qdrant_storage:\n    driver: local\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "key_volumes.qdrant_storage.driver_307": {
      "name": "volumes.qdrant_storage.driver",
      "type": "key",
      "start_line": 307,
      "end_line": 307,
      "content_hash": "2ccd9b5efb381fd54b252c1d1777bbc03bec08ce",
      "content": "    driver: local",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}