{
  "file_path": "/work/sdk/mistral/client.go",
  "file_hash": "63527d11693f8f286d18edb3e5b3b251b845c5a8",
  "updated_at": "2025-12-26T17:34:20.406412",
  "symbols": {
    "struct_Client_22": {
      "name": "Client",
      "type": "struct",
      "start_line": 22,
      "end_line": 32,
      "content_hash": "c9251917d787044700dd2a61aea6211e00526de1",
      "content": "type Client struct {\n\thttpClient *http.Client\n\tbaseURL    string\n\tapiKey     string\n\tuserAgent  string\n}\n\n// ClientOption is a function that configures the Client\ntype ClientOption func(*Client)\n\n// NewClient creates a new Mistral API client",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewClient_33": {
      "name": "NewClient",
      "type": "function",
      "start_line": 33,
      "end_line": 48,
      "content_hash": "803fa858e4a3ee919fd0cb18e0f1295f6c155cda",
      "content": "func NewClient(apiKey string, opts ...ClientOption) *Client {\n\tclient := &Client{\n\t\tapiKey:     apiKey,\n\t\tbaseURL:    DefaultBaseURL,\n\t\thttpClient: &http.Client{Timeout: 60 * time.Second},\n\t\tuserAgent:  UserAgent,\n\t}\n\n\tfor _, opt := range opts {\n\t\topt(client)\n\t}\n\n\treturn client\n}\n\n// WithBaseURL sets custom base URL",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_WithBaseURL_49": {
      "name": "WithBaseURL",
      "type": "function",
      "start_line": 49,
      "end_line": 55,
      "content_hash": "d51660db48590d069406b3d4deec2f7c8be138e4",
      "content": "func WithBaseURL(baseURL string) ClientOption {\n\treturn func(c *Client) {\n\t\tc.baseURL = baseURL\n\t}\n}\n\n// WithHTTPClient sets custom HTTP client",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_WithHTTPClient_56": {
      "name": "WithHTTPClient",
      "type": "function",
      "start_line": 56,
      "end_line": 62,
      "content_hash": "d91d76fc8ce2fc1067b386602651ac18ffbc49b7",
      "content": "func WithHTTPClient(httpClient *http.Client) ClientOption {\n\treturn func(c *Client) {\n\t\tc.httpClient = httpClient\n\t}\n}\n\n// WithUserAgent sets custom user agent",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_WithUserAgent_63": {
      "name": "WithUserAgent",
      "type": "function",
      "start_line": 63,
      "end_line": 69,
      "content_hash": "8459a3cd1f3d43fb7144408237e709f7e746d543",
      "content": "func WithUserAgent(userAgent string) ClientOption {\n\treturn func(c *Client) {\n\t\tc.userAgent = userAgent\n\t}\n}\n\n// doRequest performs an HTTP request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_doRequest_70": {
      "name": "doRequest",
      "type": "method",
      "start_line": 70,
      "end_line": 111,
      "content_hash": "051ceeb80182e1192a2ba8e4ca4d20bb408d3f19",
      "content": "func (c *Client) doRequest(ctx context.Context, method, endpoint string, body interface{}, result interface{}) error {\n\turl := c.baseURL + endpoint\n\n\tvar reqBody io.Reader\n\tif body != nil {\n\t\tjsonBody, err := json.Marshal(body)\n\t\tif err != nil {\n\t\t\treturn fmt.Errorf(\"failed to marshal request body: %w\", err)\n\t\t}\n\t\treqBody = bytes.NewBuffer(jsonBody)\n\t}\n\n\treq, err := http.NewRequestWithContext(ctx, method, url, reqBody)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to create request: %w\", err)\n\t}\n\n\treq.Header.Set(\"Authorization\", \"Bearer \"+c.apiKey)\n\treq.Header.Set(\"Content-Type\", \"application/json\")\n\treq.Header.Set(\"User-Agent\", c.userAgent)\n\n\tresp, err := c.httpClient.Do(req)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"request failed: %w\", err)\n\t}\n\tdefer resp.Body.Close()\n\n\tif resp.StatusCode < 200 || resp.StatusCode >= 300 {\n\t\tbodyBytes, _ := io.ReadAll(resp.Body)\n\t\treturn fmt.Errorf(\"API error: status %d, body: %s\", resp.StatusCode, string(bodyBytes))\n\t}\n\n\tif result != nil {\n\t\tif err := json.NewDecoder(resp.Body).Decode(result); err != nil {\n\t\t\treturn fmt.Errorf(\"failed to decode response: %w\", err)\n\t\t}\n\t}\n\n\treturn nil\n}\n\n// doRawRequest performs HTTP request returning raw response for streaming",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_doRawRequest_112": {
      "name": "doRawRequest",
      "type": "method",
      "start_line": 112,
      "end_line": 136,
      "content_hash": "78cb4f14e79e4995c5d57bf93c4af6b0c697f20d",
      "content": "func (c *Client) doRawRequest(ctx context.Context, method, endpoint string, body interface{}) (*http.Response, error) {\n\turl := c.baseURL + endpoint\n\n\tvar reqBody io.Reader\n\tif body != nil {\n\t\tjsonBody, err := json.Marshal(body)\n\t\tif err != nil {\n\t\t\treturn nil, fmt.Errorf(\"failed to marshal request body: %w\", err)\n\t\t}\n\t\treqBody = bytes.NewBuffer(jsonBody)\n\t}\n\n\treq, err := http.NewRequestWithContext(ctx, method, url, reqBody)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to create request: %w\", err)\n\t}\n\n\treq.Header.Set(\"Authorization\", \"Bearer \"+c.apiKey)\n\treq.Header.Set(\"Content-Type\", \"application/json\")\n\treq.Header.Set(\"User-Agent\", c.userAgent)\n\n\treturn c.httpClient.Do(req)\n}\n\n// Error represents an API error response",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_Error_137": {
      "name": "Error",
      "type": "struct",
      "start_line": 137,
      "end_line": 143,
      "content_hash": "2b5fa942085f9f68b4ef25412a1e6a2c9a3bb66d",
      "content": "type Error struct {\n\tType    string `json:\"type\"`\n\tMessage string `json:\"message\"`\n\tParam   string `json:\"param,omitempty\"`\n\tCode    string `json:\"code,omitempty\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Error_144": {
      "name": "Error",
      "type": "method",
      "start_line": 144,
      "end_line": 146,
      "content_hash": "281c3354abcae1266cd3e10f69e5be9ff4fc4a38",
      "content": "func (e *Error) Error() string {\n\treturn fmt.Sprintf(\"%s: %s\", e.Type, e.Message)\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}