{
  "file_path": "/work/internal/agent/tools/job_kill.go",
  "file_hash": "5306e795e7996b53c949a29611472ee445a0e3d8",
  "updated_at": "2025-12-26T17:34:20.397531",
  "symbols": {
    "struct_JobKillParams_19": {
      "name": "JobKillParams",
      "type": "struct",
      "start_line": 19,
      "end_line": 22,
      "content_hash": "4704122c7804e48b26dbe45b619ab78edce7229c",
      "content": "type JobKillParams struct {\n\tShellID string `json:\"shell_id\" description:\"The ID of the background shell to terminate\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_JobKillResponseMetadata_23": {
      "name": "JobKillResponseMetadata",
      "type": "struct",
      "start_line": 23,
      "end_line": 28,
      "content_hash": "afd1dfad9ca84715c545b7f7ddb676dde07572e7",
      "content": "type JobKillResponseMetadata struct {\n\tShellID     string `json:\"shell_id\"`\n\tCommand     string `json:\"command\"`\n\tDescription string `json:\"description\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewJobKillTool_29": {
      "name": "NewJobKillTool",
      "type": "function",
      "start_line": 29,
      "end_line": 59,
      "content_hash": "9696c6db3a1b0ce01689579ca46880d9212b3852",
      "content": "func NewJobKillTool() fantasy.AgentTool {\n\treturn fantasy.NewAgentTool(\n\t\tJobKillToolName,\n\t\tstring(jobKillDescription),\n\t\tfunc(ctx context.Context, params JobKillParams, call fantasy.ToolCall) (fantasy.ToolResponse, error) {\n\t\t\tif params.ShellID == \"\" {\n\t\t\t\treturn fantasy.NewTextErrorResponse(\"missing shell_id\"), nil\n\t\t\t}\n\n\t\t\tbgManager := shell.GetBackgroundShellManager()\n\n\t\t\tbgShell, ok := bgManager.Get(params.ShellID)\n\t\t\tif !ok {\n\t\t\t\treturn fantasy.NewTextErrorResponse(fmt.Sprintf(\"background shell not found: %s\", params.ShellID)), nil\n\t\t\t}\n\n\t\t\tmetadata := JobKillResponseMetadata{\n\t\t\t\tShellID:     params.ShellID,\n\t\t\t\tCommand:     bgShell.Command,\n\t\t\t\tDescription: bgShell.Description,\n\t\t\t}\n\n\t\t\terr := bgManager.Kill(params.ShellID)\n\t\t\tif err != nil {\n\t\t\t\treturn fantasy.NewTextErrorResponse(err.Error()), nil\n\t\t\t}\n\n\t\t\tresult := fmt.Sprintf(\"Background shell %s terminated successfully\", params.ShellID)\n\t\t\treturn fantasy.WithResponseMetadata(fantasy.NewTextResponse(result), metadata), nil\n\t\t})\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}