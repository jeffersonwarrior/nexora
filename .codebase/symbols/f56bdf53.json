{
  "file_path": "/work/sdk/openai/chat.go",
  "file_hash": "6b03a5799655ed9f9fa56247210484fd69968922",
  "updated_at": "2025-12-26T17:34:23.589720",
  "symbols": {
    "struct_ChatCompletionRequest_14": {
      "name": "ChatCompletionRequest",
      "type": "struct",
      "start_line": 14,
      "end_line": 19,
      "content_hash": "40f455ab7a0491c66596cbcbbe2b34fe5d25779f",
      "content": "type ChatCompletionRequest struct {\n\tbase.ChatCompletionRequest\n\t// OpenAI-specific fields can be added here\n}\n\n// CreateChatCompletionRequest creates a new chat completion request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_CreateChatCompletionRequest_20": {
      "name": "CreateChatCompletionRequest",
      "type": "function",
      "start_line": 20,
      "end_line": 29,
      "content_hash": "de70e5a7007d5dce4480ecb1a1e92080ea31486c",
      "content": "func CreateChatCompletionRequest(model string, messages []base.Message) *ChatCompletionRequest {\n\treturn &ChatCompletionRequest{\n\t\tbase.ChatCompletionRequest{\n\t\t\tModel:    model,\n\t\t\tMessages: messages,\n\t\t},\n\t}\n}\n\n// CreateChatCompletionResponse creates a response object",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_CreateChatCompletionResponse_30": {
      "name": "CreateChatCompletionResponse",
      "type": "function",
      "start_line": 30,
      "end_line": 34,
      "content_hash": "4f3fea26daffab32b4c68588f6aa6224fd8e8039",
      "content": "func CreateChatCompletionResponse() *ChatCompletionResponse {\n\treturn &ChatCompletionResponse{}\n}\n\n// ChatCompletionResponse represents OpenAI's chat completion response",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ChatCompletionResponse_35": {
      "name": "ChatCompletionResponse",
      "type": "struct",
      "start_line": 35,
      "end_line": 44,
      "content_hash": "0de203eb2b07d619b0b5952f08ef6b5c85f2758d",
      "content": "type ChatCompletionResponse struct {\n\tID      string                 `json:\"id\"`\n\tObject  string                 `json:\"object\"`\n\tCreated int64                  `json:\"created\"`\n\tModel   string                 `json:\"model\"`\n\tChoices []ChatCompletionChoice `json:\"choices\"`\n\tUsage   base.Usage             `json:\"usage\"`\n}\n\n// ChatCompletionChoice represents a single completion choice",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ChatCompletionChoice_45": {
      "name": "ChatCompletionChoice",
      "type": "struct",
      "start_line": 45,
      "end_line": 51,
      "content_hash": "0aa6a72effe49d7157a07aa939d97e4e8485faa4",
      "content": "type ChatCompletionChoice struct {\n\tIndex        int              `json:\"index\"`\n\tMessage      AssistantMessage `json:\"message\"`\n\tFinishReason string           `json:\"finish_reason\"`\n}\n\n// AssistantMessage is a message from the assistant",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_AssistantMessage_52": {
      "name": "AssistantMessage",
      "type": "struct",
      "start_line": 52,
      "end_line": 58,
      "content_hash": "a0dd497a16a030974ab4e7da4957e93d77d720bd",
      "content": "type AssistantMessage struct {\n\tContent *string `json:\"content\"`\n\tRefusal *string `json:\"refusal\"`\n\tRole    string  `json:\"role\"`\n}\n\n// DeltaMessage represents a delta message in streaming",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_DeltaMessage_59": {
      "name": "DeltaMessage",
      "type": "struct",
      "start_line": 59,
      "end_line": 65,
      "content_hash": "e87a30e4ae65f79344861ac61cdf6c020cf820f5",
      "content": "type DeltaMessage struct {\n\tRole      *string    `json:\"role,omitempty\"`\n\tContent   *string    `json:\"content,omitempty\"`\n\tToolCalls []ToolCall `json:\"tool_calls,omitempty\"`\n}\n\n// ToolCall represents a tool call by the model",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ToolCall_66": {
      "name": "ToolCall",
      "type": "struct",
      "start_line": 66,
      "end_line": 72,
      "content_hash": "e4f14d8ea28aba49523617665a0a345dc67a0053",
      "content": "type ToolCall struct {\n\tID       string       `json:\"id\"`\n\tType     string       `json:\"type\"`\n\tFunction FunctionCall `json:\"function\"`\n}\n\n// FunctionCall is the actual function call",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_FunctionCall_73": {
      "name": "FunctionCall",
      "type": "struct",
      "start_line": 73,
      "end_line": 78,
      "content_hash": "b2201106d8a5453d1f78972b09f2d5a16b9a9ca5",
      "content": "type FunctionCall struct {\n\tName      string `json:\"name\"`\n\tArguments string `json:\"arguments\"`\n}\n\n// CompletionChunk represents a chunk of a streaming response",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_CompletionChunk_79": {
      "name": "CompletionChunk",
      "type": "struct",
      "start_line": 79,
      "end_line": 88,
      "content_hash": "337860cb3abf51f9a9d2765f8593a1a9b6f5dfef",
      "content": "type CompletionChunk struct {\n\tID      string                   `json:\"id\"`\n\tObject  string                   `json:\"object\"`\n\tCreated int64                    `json:\"created\"`\n\tModel   string                   `json:\"model\"`\n\tChoices []CompletionStreamChoice `json:\"choices\"`\n\tUsage   *base.Usage              `json:\"usage,omitempty\"`\n}\n\n// CompletionStreamChoice is a choice in a streaming response",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_CompletionStreamChoice_89": {
      "name": "CompletionStreamChoice",
      "type": "struct",
      "start_line": 89,
      "end_line": 95,
      "content_hash": "de3e352e57bc9ab76026a6e7d90b2f412dbaab76",
      "content": "type CompletionStreamChoice struct {\n\tIndex        int          `json:\"index\"`\n\tDelta        DeltaMessage `json:\"delta\"`\n\tFinishReason *string      `json:\"finish_reason\"`\n}\n\n// CreateChatCompletionStream creates a streaming chat completion",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_CreateChatCompletionStream_96": {
      "name": "CreateChatCompletionStream",
      "type": "method",
      "start_line": 96,
      "end_line": 143,
      "content_hash": "4b3c852d44689b00c01a2d51917c687aba9ff1a6",
      "content": "func (c *Client) CreateChatCompletionStream(\n\tctx context.Context,\n\treq *ChatCompletionRequest,\n) (<-chan *base.CompletionChunk, error) {\n\tstream := true\n\treq.Stream = &stream\n\n\tresp, err := c.DoRawRequest(ctx, \"POST\", \"/chat/completions\", req)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tch := make(chan *base.CompletionChunk)\n\tgo func() {\n\t\tdefer resp.Body.Close()\n\t\tdefer close(ch)\n\n\t\tscanner := bufio.NewScanner(resp.Body)\n\t\tfor scanner.Scan() {\n\t\t\tline := scanner.Text()\n\n\t\t\t// Skip empty lines and SSE format prefixes\n\t\t\tif line == \"\" || !strings.HasPrefix(line, \"data: \") {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t// Remove \"data: \" prefix\n\t\t\tdata := strings.TrimPrefix(line, \"data: \")\n\n\t\t\t// Check for [DONE] marker\n\t\t\tif data == \"[DONE]\" {\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tvar chunk base.CompletionEvent\n\t\t\tif err := json.Unmarshal([]byte(data), &chunk); err != nil {\n\t\t\t\tfmt.Printf(\"Error parsing chunk: %v\\n\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tch <- &chunk.Data\n\t\t}\n\t}()\n\n\treturn ch, nil\n}\n\n// AddSystemMessage adds a system message to the request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddSystemMessage_144": {
      "name": "AddSystemMessage",
      "type": "method",
      "start_line": 144,
      "end_line": 152,
      "content_hash": "294663bee1042ad80b93462d88736a9cb968a5a5",
      "content": "func (req *ChatCompletionRequest) AddSystemMessage(content string) {\n\tmsg := base.SystemMessage{\n\t\tContent: content,\n\t\tRole:    \"system\",\n\t}\n\treq.Messages = append(req.Messages, msg)\n}\n\n// AddUserMessage adds a user message to the request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddUserMessage_153": {
      "name": "AddUserMessage",
      "type": "method",
      "start_line": 153,
      "end_line": 161,
      "content_hash": "97333f52b8ce9a73f74ef5523c9b02eb22cfa1e9",
      "content": "func (req *ChatCompletionRequest) AddUserMessage(content string) {\n\tmsg := base.UserMessage{\n\t\tContent: content,\n\t\tRole:    \"user\",\n\t}\n\treq.Messages = append(req.Messages, msg)\n}\n\n// AddAssistantMessage adds an assistant message to the request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddAssistantMessage_162": {
      "name": "AddAssistantMessage",
      "type": "method",
      "start_line": 162,
      "end_line": 170,
      "content_hash": "18c11c7f1cc58505b9344bfdfa6d9ec5a80af2b8",
      "content": "func (req *ChatCompletionRequest) AddAssistantMessage(content string) {\n\tmsg := base.AssistantMessage{\n\t\tContent: &content,\n\t\tRole:    \"assistant\",\n\t}\n\treq.Messages = append(req.Messages, msg)\n}\n\n// AddToolMessage adds a tool message to the request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddToolMessage_171": {
      "name": "AddToolMessage",
      "type": "method",
      "start_line": 171,
      "end_line": 181,
      "content_hash": "230cc131ba42a7fc2b5e0855be18a6fef3ce2990",
      "content": "func (req *ChatCompletionRequest) AddToolMessage(content, toolCallID, toolName string) {\n\tmsg := base.ToolMessage{\n\t\tContent:    content,\n\t\tToolCallID: toolCallID,\n\t\tName:       &toolName,\n\t\tRole:       \"tool\",\n\t}\n\treq.Messages = append(req.Messages, msg)\n}\n\n// EnableJSONMode enables JSON output mode",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_EnableJSONMode_182": {
      "name": "EnableJSONMode",
      "type": "method",
      "start_line": 182,
      "end_line": 189,
      "content_hash": "40f855a7b9680e8ab3e3e39a954d5fada2165db7",
      "content": "func (req *ChatCompletionRequest) EnableJSONMode() {\n\tresponseFormat := base.ResponseFormat{\n\t\tType: \"json_object\",\n\t}\n\treq.ResponseFormat = &responseFormat\n}\n\n// EnableJSONSchemaMode enables JSON schema mode",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_EnableJSONSchemaMode_190": {
      "name": "EnableJSONSchemaMode",
      "type": "method",
      "start_line": 190,
      "end_line": 203,
      "content_hash": "31defac0bc908764fe87ff1706911dd112021bd4",
      "content": "func (req *ChatCompletionRequest) EnableJSONSchemaMode(name string, description string, schema map[string]interface{}, strict bool) {\n\tresponseFormat := base.ResponseFormat{\n\t\tType: \"json_schema\",\n\t\tJSONSchema: &base.JSONSchema{\n\t\t\tName:        name,\n\t\t\tDescription: description,\n\t\t\tSchema:      schema,\n\t\t\tStrict:      strict,\n\t\t},\n\t}\n\treq.ResponseFormat = &responseFormat\n}\n\n// SetTemperature sets the sampling temperature",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetTemperature_204": {
      "name": "SetTemperature",
      "type": "method",
      "start_line": 204,
      "end_line": 208,
      "content_hash": "ba20f32fed4870316700ee7f7aaa0d0edf0f5001",
      "content": "func (req *ChatCompletionRequest) SetTemperature(temp float64) {\n\treq.Temperature = &temp\n}\n\n// SetMaxTokens sets the maximum number of tokens",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetMaxTokens_209": {
      "name": "SetMaxTokens",
      "type": "method",
      "start_line": 209,
      "end_line": 213,
      "content_hash": "939f5072745037fbcbff93673a0335e50b250c2d",
      "content": "func (req *ChatCompletionRequest) SetMaxTokens(maxTokens int) {\n\treq.MaxTokens = &maxTokens\n}\n\n// SetStop sets stop sequences",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetStop_214": {
      "name": "SetStop",
      "type": "method",
      "start_line": 214,
      "end_line": 218,
      "content_hash": "b81c85bf783a4c7cb2f0a20187586e0a2d40f739",
      "content": "func (req *ChatCompletionRequest) SetStop(stop []string) {\n\treq.Stop = stop\n}\n\n// EnableStreaming enables streaming responses",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_EnableStreaming_219": {
      "name": "EnableStreaming",
      "type": "method",
      "start_line": 219,
      "end_line": 224,
      "content_hash": "0108020cfc5c8f916422492de90e038e55df36e3",
      "content": "func (req *ChatCompletionRequest) EnableStreaming() {\n\tstream := true\n\treq.Stream = &stream\n}\n\n// AddTool adds a tool to the request",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddTool_225": {
      "name": "AddTool",
      "type": "method",
      "start_line": 225,
      "end_line": 232,
      "content_hash": "126af32bb92a3cfeb372a389e7a397c3d7a4fed6",
      "content": "func (req *ChatCompletionRequest) AddTool(tool base.Tool) {\n\tif req.Tools == nil {\n\t\treq.Tools = []base.Tool{}\n\t}\n\treq.Tools = append(req.Tools, tool)\n}\n\n// SetToolChoice sets the tool choice",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetToolChoice_233": {
      "name": "SetToolChoice",
      "type": "method",
      "start_line": 233,
      "end_line": 235,
      "content_hash": "9f26899f8d1bf6dc6c354afd0c3407ba0b85bb54",
      "content": "func (req *ChatCompletionRequest) SetToolChoice(choice interface{}) {\n\treq.ToolChoice = choice\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}