{
  "file_path": "/work/internal/message/content.go",
  "file_hash": "5a5c99613167f6a8114d51b46f53763a31b8aa74",
  "updated_at": "2025-12-26T17:34:23.411599",
  "symbols": {
    "interface_ContentPart_40": {
      "name": "ContentPart",
      "type": "interface",
      "start_line": 40,
      "end_line": 43,
      "content_hash": "e1359d3d9e9f7a9165fcbc198e28a94893c40969",
      "content": "type ContentPart interface {\n\tisPart()\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ReasoningContent_44": {
      "name": "ReasoningContent",
      "type": "struct",
      "start_line": 44,
      "end_line": 53,
      "content_hash": "0a41a036e7036d65284566a3334d09233f7b6fca",
      "content": "type ReasoningContent struct {\n\tThinking         string                             `json:\"thinking\"`\n\tSignature        string                             `json:\"signature\"`\n\tThoughtSignature string                             `json:\"thought_signature\"` // Used for google\n\tToolID           string                             `json:\"tool_id\"`           // Used for openrouter google models\n\tResponsesData    *openai.ResponsesReasoningMetadata `json:\"responses_data\"`\n\tStartedAt        int64                              `json:\"started_at,omitempty\"`\n\tFinishedAt       int64                              `json:\"finished_at,omitempty\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_String_54": {
      "name": "String",
      "type": "method",
      "start_line": 54,
      "end_line": 58,
      "content_hash": "3c5ccb7901d2f11dd67516cb6b7b380e7c6d4b55",
      "content": "func (tc ReasoningContent) String() string {\n\treturn tc.Thinking\n}\nfunc (ReasoningContent) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_TextContent_59": {
      "name": "TextContent",
      "type": "struct",
      "start_line": 59,
      "end_line": 62,
      "content_hash": "fe9a796e6009ca6410bec0bb8c7152b36b4949e2",
      "content": "type TextContent struct {\n\tText string `json:\"text\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_String_63": {
      "name": "String",
      "type": "method",
      "start_line": 63,
      "end_line": 68,
      "content_hash": "3b2457a243cc4036914b8a63d3de4eabfcb9736d",
      "content": "func (tc TextContent) String() string {\n\treturn tc.Text\n}\n\nfunc (TextContent) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ImageURLContent_69": {
      "name": "ImageURLContent",
      "type": "struct",
      "start_line": 69,
      "end_line": 73,
      "content_hash": "6fdbe64b60f47558326944cf8e37fc9db17bc377",
      "content": "type ImageURLContent struct {\n\tURL    string `json:\"url\"`\n\tDetail string `json:\"detail,omitempty\"`\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_String_74": {
      "name": "String",
      "type": "method",
      "start_line": 74,
      "end_line": 79,
      "content_hash": "5abc823a1e43e3bfdc31f4bc59dff4b28461ab7b",
      "content": "func (iuc ImageURLContent) String() string {\n\treturn iuc.URL\n}\n\nfunc (ImageURLContent) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_BinaryContent_80": {
      "name": "BinaryContent",
      "type": "struct",
      "start_line": 80,
      "end_line": 85,
      "content_hash": "0f18977b208a5f549d407b2d359e0638e59c9207",
      "content": "type BinaryContent struct {\n\tPath     string\n\tMIMEType string\n\tData     []byte\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_String_86": {
      "name": "String",
      "type": "method",
      "start_line": 86,
      "end_line": 95,
      "content_hash": "97adf34792173c20146abb34ae2d9447b20a8899",
      "content": "func (bc BinaryContent) String(p catwalk.InferenceProvider) string {\n\tbase64Encoded := base64.StdEncoding.EncodeToString(bc.Data)\n\tif p == catwalk.InferenceProviderOpenAI {\n\t\treturn \"data:\" + bc.MIMEType + \";base64,\" + base64Encoded\n\t}\n\treturn base64Encoded\n}\n\nfunc (BinaryContent) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ToolCall_96": {
      "name": "ToolCall",
      "type": "struct",
      "start_line": 96,
      "end_line": 105,
      "content_hash": "04ba22e483cffb7b9beb3674e9519faa0d47dc60",
      "content": "type ToolCall struct {\n\tID               string `json:\"id\"`\n\tName             string `json:\"name\"`\n\tInput            string `json:\"input\"`\n\tProviderExecuted bool   `json:\"provider_executed\"`\n\tFinished         bool   `json:\"finished\"`\n}\n\nfunc (ToolCall) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ToolResult_106": {
      "name": "ToolResult",
      "type": "struct",
      "start_line": 106,
      "end_line": 117,
      "content_hash": "9c4aa273671f50386dc092c096f73ce5f51c6f29",
      "content": "type ToolResult struct {\n\tToolCallID string `json:\"tool_call_id\"`\n\tName       string `json:\"name\"`\n\tContent    string `json:\"content\"`\n\tData       string `json:\"data\"`\n\tMIMEType   string `json:\"mime_type\"`\n\tMetadata   string `json:\"metadata\"`\n\tIsError    bool   `json:\"is_error\"`\n}\n\nfunc (ToolResult) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_Finish_118": {
      "name": "Finish",
      "type": "struct",
      "start_line": 118,
      "end_line": 126,
      "content_hash": "df4582f4b620345b15911b884284a2462ad0e9c9",
      "content": "type Finish struct {\n\tReason  FinishReason `json:\"reason\"`\n\tTime    int64        `json:\"time\"`\n\tMessage string       `json:\"message,omitempty\"`\n\tDetails string       `json:\"details,omitempty\"`\n}\n\nfunc (Finish) isPart() {}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_Message_127": {
      "name": "Message",
      "type": "struct",
      "start_line": 127,
      "end_line": 138,
      "content_hash": "7a7af6a4eb8c7003046d1646c273ed567de78b9d",
      "content": "type Message struct {\n\tID               string\n\tRole             MessageRole\n\tSessionID        string\n\tParts            []ContentPart\n\tModel            string\n\tProvider         string\n\tCreatedAt        int64\n\tUpdatedAt        int64\n\tIsSummaryMessage bool\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Content_139": {
      "name": "Content",
      "type": "method",
      "start_line": 139,
      "end_line": 147,
      "content_hash": "4c8d9846ef41e9c14ec4367b973ae1fc9d70dc5e",
      "content": "func (m *Message) Content() TextContent {\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(TextContent); ok {\n\t\t\treturn c\n\t\t}\n\t}\n\treturn TextContent{}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ReasoningContent_148": {
      "name": "ReasoningContent",
      "type": "method",
      "start_line": 148,
      "end_line": 156,
      "content_hash": "0eebaac60a11ac8ad1f3eecbe82844589244d6ad",
      "content": "func (m *Message) ReasoningContent() ReasoningContent {\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\treturn c\n\t\t}\n\t}\n\treturn ReasoningContent{}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ImageURLContent_157": {
      "name": "ImageURLContent",
      "type": "method",
      "start_line": 157,
      "end_line": 166,
      "content_hash": "17befca3465f75e0926b44b258cc570251371ced",
      "content": "func (m *Message) ImageURLContent() []ImageURLContent {\n\timageURLContents := make([]ImageURLContent, 0)\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(ImageURLContent); ok {\n\t\t\timageURLContents = append(imageURLContents, c)\n\t\t}\n\t}\n\treturn imageURLContents\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_BinaryContent_167": {
      "name": "BinaryContent",
      "type": "method",
      "start_line": 167,
      "end_line": 176,
      "content_hash": "112ce2dc0d806a65b169c3f1566699f261b5dd60",
      "content": "func (m *Message) BinaryContent() []BinaryContent {\n\tbinaryContents := make([]BinaryContent, 0)\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(BinaryContent); ok {\n\t\t\tbinaryContents = append(binaryContents, c)\n\t\t}\n\t}\n\treturn binaryContents\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ToolCalls_177": {
      "name": "ToolCalls",
      "type": "method",
      "start_line": 177,
      "end_line": 186,
      "content_hash": "260b693ffb0b0689dd2e54bfe44f992d0eeb709c",
      "content": "func (m *Message) ToolCalls() []ToolCall {\n\ttoolCalls := make([]ToolCall, 0)\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(ToolCall); ok {\n\t\t\ttoolCalls = append(toolCalls, c)\n\t\t}\n\t}\n\treturn toolCalls\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ToolResults_187": {
      "name": "ToolResults",
      "type": "method",
      "start_line": 187,
      "end_line": 196,
      "content_hash": "18741a2d1998c0b4c79983eb12e9ddc0629725d2",
      "content": "func (m *Message) ToolResults() []ToolResult {\n\ttoolResults := make([]ToolResult, 0)\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(ToolResult); ok {\n\t\t\ttoolResults = append(toolResults, c)\n\t\t}\n\t}\n\treturn toolResults\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_IsFinished_197": {
      "name": "IsFinished",
      "type": "method",
      "start_line": 197,
      "end_line": 205,
      "content_hash": "c160bb2d843452561b6a940e8974cfd5677bb71f",
      "content": "func (m *Message) IsFinished() bool {\n\tfor _, part := range m.Parts {\n\t\tif _, ok := part.(Finish); ok {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_FinishPart_206": {
      "name": "FinishPart",
      "type": "method",
      "start_line": 206,
      "end_line": 214,
      "content_hash": "4a5dcf10145d07146727881373ffecf22063fc1a",
      "content": "func (m *Message) FinishPart() *Finish {\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(Finish); ok {\n\t\t\treturn &c\n\t\t}\n\t}\n\treturn nil\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_FinishReason_215": {
      "name": "FinishReason",
      "type": "method",
      "start_line": 215,
      "end_line": 223,
      "content_hash": "480c80e21d80fe627e10fa4bad57ab83407dcba9",
      "content": "func (m *Message) FinishReason() FinishReason {\n\tfor _, part := range m.Parts {\n\t\tif c, ok := part.(Finish); ok {\n\t\t\treturn c.Reason\n\t\t}\n\t}\n\treturn \"\"\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_IsThinking_224": {
      "name": "IsThinking",
      "type": "method",
      "start_line": 224,
      "end_line": 230,
      "content_hash": "687abebb09a733e2a96c6e254af90aecdf831ad7",
      "content": "func (m *Message) IsThinking() bool {\n\tif m.ReasoningContent().Thinking != \"\" && m.Content().Text == \"\" && !m.IsFinished() {\n\t\treturn true\n\t}\n\treturn false\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AppendContent_231": {
      "name": "AppendContent",
      "type": "method",
      "start_line": 231,
      "end_line": 243,
      "content_hash": "e671e52e01a30c88daf7ee8aee3bd3f0ec959a8a",
      "content": "func (m *Message) AppendContent(delta string) {\n\tfound := false\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(TextContent); ok {\n\t\t\tm.Parts[i] = TextContent{Text: c.Text + delta}\n\t\t\tfound = true\n\t\t}\n\t}\n\tif !found {\n\t\tm.Parts = append(m.Parts, TextContent{Text: delta})\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AppendReasoningContent_244": {
      "name": "AppendReasoningContent",
      "type": "method",
      "start_line": 244,
      "end_line": 264,
      "content_hash": "fe2921eb43a78729a32764238ae0880084676bc0",
      "content": "func (m *Message) AppendReasoningContent(delta string) {\n\tfound := false\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\tm.Parts[i] = ReasoningContent{\n\t\t\t\tThinking:   c.Thinking + delta,\n\t\t\t\tSignature:  c.Signature,\n\t\t\t\tStartedAt:  c.StartedAt,\n\t\t\t\tFinishedAt: c.FinishedAt,\n\t\t\t}\n\t\t\tfound = true\n\t\t}\n\t}\n\tif !found {\n\t\tm.Parts = append(m.Parts, ReasoningContent{\n\t\t\tThinking:  delta,\n\t\t\tStartedAt: time.Now().Unix(),\n\t\t})\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AppendThoughtSignature_265": {
      "name": "AppendThoughtSignature",
      "type": "method",
      "start_line": 265,
      "end_line": 281,
      "content_hash": "6aa4e6d4859d624eb072598a271396d37d8c92eb",
      "content": "func (m *Message) AppendThoughtSignature(signature string, toolCallID string) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\tm.Parts[i] = ReasoningContent{\n\t\t\t\tThinking:         c.Thinking,\n\t\t\t\tThoughtSignature: c.ThoughtSignature + signature,\n\t\t\t\tToolID:           toolCallID,\n\t\t\t\tSignature:        c.Signature,\n\t\t\t\tStartedAt:        c.StartedAt,\n\t\t\t\tFinishedAt:       c.FinishedAt,\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t}\n\tm.Parts = append(m.Parts, ReasoningContent{ThoughtSignature: signature})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AppendReasoningSignature_282": {
      "name": "AppendReasoningSignature",
      "type": "method",
      "start_line": 282,
      "end_line": 296,
      "content_hash": "b136f1a7f48cf39532720e7b73fed095f0a59aea",
      "content": "func (m *Message) AppendReasoningSignature(signature string) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\tm.Parts[i] = ReasoningContent{\n\t\t\t\tThinking:   c.Thinking,\n\t\t\t\tSignature:  c.Signature + signature,\n\t\t\t\tStartedAt:  c.StartedAt,\n\t\t\t\tFinishedAt: c.FinishedAt,\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t}\n\tm.Parts = append(m.Parts, ReasoningContent{Signature: signature})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetReasoningResponsesData_297": {
      "name": "SetReasoningResponsesData",
      "type": "method",
      "start_line": 297,
      "end_line": 310,
      "content_hash": "e405f2dab8eb23d98720b3093fbdef87c3718b44",
      "content": "func (m *Message) SetReasoningResponsesData(data *openai.ResponsesReasoningMetadata) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\tm.Parts[i] = ReasoningContent{\n\t\t\t\tThinking:      c.Thinking,\n\t\t\t\tResponsesData: data,\n\t\t\t\tStartedAt:     c.StartedAt,\n\t\t\t\tFinishedAt:    c.FinishedAt,\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_FinishThinking_311": {
      "name": "FinishThinking",
      "type": "method",
      "start_line": 311,
      "end_line": 326,
      "content_hash": "83a998f3f9b7c2a752e3e008471df973bcad9e06",
      "content": "func (m *Message) FinishThinking() {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ReasoningContent); ok {\n\t\t\tif c.FinishedAt == 0 {\n\t\t\t\tm.Parts[i] = ReasoningContent{\n\t\t\t\t\tThinking:   c.Thinking,\n\t\t\t\t\tSignature:  c.Signature,\n\t\t\t\t\tStartedAt:  c.StartedAt,\n\t\t\t\t\tFinishedAt: time.Now().Unix(),\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ThinkingDuration_327": {
      "name": "ThinkingDuration",
      "type": "method",
      "start_line": 327,
      "end_line": 340,
      "content_hash": "f40cfec69227d3aed7ab802bd92ae79d95c51931",
      "content": "func (m *Message) ThinkingDuration() time.Duration {\n\treasoning := m.ReasoningContent()\n\tif reasoning.StartedAt == 0 {\n\t\treturn 0\n\t}\n\n\tendTime := reasoning.FinishedAt\n\tif endTime == 0 {\n\t\tendTime = time.Now().Unix()\n\t}\n\n\treturn time.Duration(endTime-reasoning.StartedAt) * time.Second\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_FinishToolCall_341": {
      "name": "FinishToolCall",
      "type": "method",
      "start_line": 341,
      "end_line": 356,
      "content_hash": "b3080d3a2cdabb15d581eee9bee7d7be99892293",
      "content": "func (m *Message) FinishToolCall(toolCallID string) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ToolCall); ok {\n\t\t\tif c.ID == toolCallID {\n\t\t\t\tm.Parts[i] = ToolCall{\n\t\t\t\t\tID:       c.ID,\n\t\t\t\t\tName:     c.Name,\n\t\t\t\t\tInput:    c.Input,\n\t\t\t\t\tFinished: true,\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AppendToolCallInput_357": {
      "name": "AppendToolCallInput",
      "type": "method",
      "start_line": 357,
      "end_line": 372,
      "content_hash": "48854eb3d2870ad2e81fd953612a76805c34377c",
      "content": "func (m *Message) AppendToolCallInput(toolCallID string, inputDelta string) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ToolCall); ok {\n\t\t\tif c.ID == toolCallID {\n\t\t\t\tm.Parts[i] = ToolCall{\n\t\t\t\t\tID:       c.ID,\n\t\t\t\t\tName:     c.Name,\n\t\t\t\t\tInput:    c.Input + inputDelta,\n\t\t\t\t\tFinished: c.Finished,\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddToolCall_373": {
      "name": "AddToolCall",
      "type": "method",
      "start_line": 373,
      "end_line": 384,
      "content_hash": "6f82ebb37611d1a2c074136121a6ee4c8c25155c",
      "content": "func (m *Message) AddToolCall(tc ToolCall) {\n\tfor i, part := range m.Parts {\n\t\tif c, ok := part.(ToolCall); ok {\n\t\t\tif c.ID == tc.ID {\n\t\t\t\tm.Parts[i] = tc\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t}\n\tm.Parts = append(m.Parts, tc)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetToolCalls_385": {
      "name": "SetToolCalls",
      "type": "method",
      "start_line": 385,
      "end_line": 399,
      "content_hash": "82fa3d202d7e7e9f29288fbd91a912697b4d90b3",
      "content": "func (m *Message) SetToolCalls(tc []ToolCall) {\n\t// remove any existing tool call part it could have multiple\n\tparts := make([]ContentPart, 0)\n\tfor _, part := range m.Parts {\n\t\tif _, ok := part.(ToolCall); ok {\n\t\t\tcontinue\n\t\t}\n\t\tparts = append(parts, part)\n\t}\n\tm.Parts = parts\n\tfor _, toolCall := range tc {\n\t\tm.Parts = append(m.Parts, toolCall)\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddToolResult_400": {
      "name": "AddToolResult",
      "type": "method",
      "start_line": 400,
      "end_line": 403,
      "content_hash": "a90fdf929d4fddbb17fd51ebf8910ed97026cbba",
      "content": "func (m *Message) AddToolResult(tr ToolResult) {\n\tm.Parts = append(m.Parts, tr)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_SetToolResults_404": {
      "name": "SetToolResults",
      "type": "method",
      "start_line": 404,
      "end_line": 409,
      "content_hash": "5c342339028617f7a24824fa90f472d2072256a8",
      "content": "func (m *Message) SetToolResults(tr []ToolResult) {\n\tfor _, toolResult := range tr {\n\t\tm.Parts = append(m.Parts, toolResult)\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddFinish_410": {
      "name": "AddFinish",
      "type": "method",
      "start_line": 410,
      "end_line": 420,
      "content_hash": "15c13315a9f37ef42cc9ab97df929e4b7dc81f14",
      "content": "func (m *Message) AddFinish(reason FinishReason, message, details string) {\n\t// remove any existing finish part\n\tfor i, part := range m.Parts {\n\t\tif _, ok := part.(Finish); ok {\n\t\t\tm.Parts = slices.Delete(m.Parts, i, i+1)\n\t\t\tbreak\n\t\t}\n\t}\n\tm.Parts = append(m.Parts, Finish{Reason: reason, Time: time.Now().Unix(), Message: message, Details: details})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddImageURL_421": {
      "name": "AddImageURL",
      "type": "method",
      "start_line": 421,
      "end_line": 424,
      "content_hash": "4de48ef4fc80ddf1445a911db656fa9bc49de65e",
      "content": "func (m *Message) AddImageURL(url, detail string) {\n\tm.Parts = append(m.Parts, ImageURLContent{URL: url, Detail: detail})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_AddBinary_425": {
      "name": "AddBinary",
      "type": "method",
      "start_line": 425,
      "end_line": 428,
      "content_hash": "812da6704b0be17f1a5c45f56f6baa5e63606c18",
      "content": "func (m *Message) AddBinary(mimeType string, data []byte) {\n\tm.Parts = append(m.Parts, BinaryContent{MIMEType: mimeType, Data: data})\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ToAIMessage_429": {
      "name": "ToAIMessage",
      "type": "method",
      "start_line": 429,
      "end_line": 515,
      "content_hash": "07ba901609171ceb4b68e25751340884f141c596",
      "content": "func (m *Message) ToAIMessage() []fantasy.Message {\n\tvar messages []fantasy.Message\n\tswitch m.Role {\n\tcase User:\n\t\tvar parts []fantasy.MessagePart\n\t\ttext := strings.TrimSpace(m.Content().Text)\n\t\tif text != \"\" {\n\t\t\tparts = append(parts, fantasy.TextPart{Text: text})\n\t\t}\n\t\tfor _, content := range m.BinaryContent() {\n\t\t\tparts = append(parts, fantasy.FilePart{\n\t\t\t\tFilename:  content.Path,\n\t\t\t\tData:      content.Data,\n\t\t\t\tMediaType: content.MIMEType,\n\t\t\t})\n\t\t}\n\t\tmessages = append(messages, fantasy.Message{\n\t\t\tRole:    fantasy.MessageRoleUser,\n\t\t\tContent: parts,\n\t\t})\n\tcase Assistant:\n\t\tvar parts []fantasy.MessagePart\n\t\ttext := strings.TrimSpace(m.Content().Text)\n\t\tif text != \"\" {\n\t\t\tparts = append(parts, fantasy.TextPart{Text: text})\n\t\t}\n\t\treasoning := m.ReasoningContent()\n\t\tif reasoning.Thinking != \"\" {\n\t\t\treasoningPart := fantasy.ReasoningPart{Text: reasoning.Thinking, ProviderOptions: fantasy.ProviderOptions{}}\n\t\t\tif reasoning.Signature != \"\" {\n\t\t\t\treasoningPart.ProviderOptions[anthropic.Name] = &anthropic.ReasoningOptionMetadata{\n\t\t\t\t\tSignature: reasoning.Signature,\n\t\t\t\t}\n\t\t\t}\n\t\t\tif reasoning.ResponsesData != nil {\n\t\t\t\treasoningPart.ProviderOptions[openai.Name] = reasoning.ResponsesData\n\t\t\t}\n\t\t\tif reasoning.ThoughtSignature != \"\" {\n\t\t\t\treasoningPart.ProviderOptions[google.Name] = &google.ReasoningMetadata{\n\t\t\t\t\tSignature: reasoning.ThoughtSignature,\n\t\t\t\t\tToolID:    reasoning.ToolID,\n\t\t\t\t}\n\t\t\t}\n\t\t\tparts = append(parts, reasoningPart)\n\t\t}\n\t\tfor _, call := range m.ToolCalls() {\n\t\t\tparts = append(parts, fantasy.ToolCallPart{\n\t\t\t\tToolCallID:       call.ID,\n\t\t\t\tToolName:         call.Name,\n\t\t\t\tInput:            call.Input,\n\t\t\t\tProviderExecuted: call.ProviderExecuted,\n\t\t\t})\n\t\t}\n\t\tmessages = append(messages, fantasy.Message{\n\t\t\tRole:    fantasy.MessageRoleAssistant,\n\t\t\tContent: parts,\n\t\t})\n\tcase Tool:\n\t\tvar parts []fantasy.MessagePart\n\t\tfor _, result := range m.ToolResults() {\n\t\t\tvar content fantasy.ToolResultOutputContent\n\t\t\tif result.IsError {\n\t\t\t\tcontent = fantasy.ToolResultOutputContentError{\n\t\t\t\t\tError: errors.New(result.Content),\n\t\t\t\t}\n\t\t\t} else if result.Data != \"\" {\n\t\t\t\tcontent = fantasy.ToolResultOutputContentMedia{\n\t\t\t\t\tData:      result.Data,\n\t\t\t\t\tMediaType: result.MIMEType,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcontent = fantasy.ToolResultOutputContentText{\n\t\t\t\t\tText: result.Content,\n\t\t\t\t}\n\t\t\t}\n\t\t\tparts = append(parts, fantasy.ToolResultPart{\n\t\t\t\tToolCallID: result.ToolCallID,\n\t\t\t\tOutput:     content,\n\t\t\t})\n\t\t}\n\t\tmessages = append(messages, fantasy.Message{\n\t\t\tRole:    fantasy.MessageRoleTool,\n\t\t\tContent: parts,\n\t\t})\n\t}\n\treturn messages\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}