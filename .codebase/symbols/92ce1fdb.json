{
  "file_path": "/work/external-deps/helix-db/helix-db/src/helix_engine/reranker/reranker.rs",
  "file_hash": "045ddac4656528dd013cea5a5586d62a9cffeab4",
  "updated_at": "2025-12-26T17:34:24.322564",
  "symbols": {
    "struct_ScoredItem_15": {
      "name": "ScoredItem",
      "type": "struct",
      "start_line": 15,
      "end_line": 20,
      "content_hash": "f6d6d73958ec8525c0540ee290c421994a2c88e5",
      "content": "pub struct ScoredItem<T> {\n    pub item: T,\n    pub score: f64,\n    pub original_rank: usize,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_ScoredItem_21": {
      "name": "ScoredItem",
      "type": "impl",
      "start_line": 21,
      "end_line": 21,
      "content_hash": "4e853d55b29b78b29e1019f0332d2ef60adfdc19",
      "content": "impl<T> ScoredItem<T> {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_new_22": {
      "name": "new",
      "type": "method",
      "start_line": 22,
      "end_line": 34,
      "content_hash": "5921fbcf9d4f1440cfda27553d323f6b3b581a50",
      "content": "    pub fn new(item: T, score: f64, rank: usize) -> Self {\n        Self {\n            item,\n            score,\n            original_rank: rank,\n        }\n    }\n}\n\n/// Core trait for reranking operations.\n///\n/// This trait defines the interface for different reranking strategies\n/// (RRF, MMR, Cross-Encoder, etc.) to operate on traversal values.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "trait_Reranker_35": {
      "name": "Reranker",
      "type": "trait",
      "start_line": 35,
      "end_line": 48,
      "content_hash": "7102cc7ca6aa63d6f3e5a0f036fb209841576b31",
      "content": "pub trait Reranker: Send + Sync {\n    /// Rerank a list of items with their original scores.\n    ///\n    /// # Arguments\n    /// * `items` - Iterator of items to rerank\n    /// * `query` - Optional query context for relevance-based reranking\n    ///\n    /// # Returns\n    /// A vector of reranked items with updated scores\n    fn rerank<'arena, I>(&self, items: I, query: Option<&str>) -> RerankerResult<Vec<TraversalValue<'arena>>>\n    where\n        I: Iterator<Item = TraversalValue<'arena>>;\n\n    /// Get the name of this reranker for debugging/logging",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_name_49": {
      "name": "name",
      "type": "method",
      "start_line": 49,
      "end_line": 55,
      "content_hash": "e185b78718e7f7844764051c36e484c7221b1d0e",
      "content": "    fn name(&self) -> &str;\n}\n\n/// Extract score from a TraversalValue.\n///\n/// This handles the different types (Node, Edge, Vector) and extracts\n/// their associated score/distance value.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_extract_score_56": {
      "name": "extract_score",
      "type": "method",
      "start_line": 56,
      "end_line": 71,
      "content_hash": "18f0bd6d1f7c8f5013f03f4d1f0a560b0ccde424",
      "content": "pub fn extract_score(item: &TraversalValue) -> RerankerResult<f64> {\n    match item {\n        TraversalValue::Vector(v) => Ok(v.score()),\n        TraversalValue::NodeWithScore { score, .. } => Ok(*score),\n        _ => {\n            // For nodes and edges without explicit scores, try to extract from properties\n            // or return a default score of 0.0\n            Ok(0.0)\n        }\n    }\n}\n\n/// Update the score of a TraversalValue.\n///\n/// This modifies the distance/score field of the item to reflect\n/// the new reranked score.",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_update_score_72": {
      "name": "update_score",
      "type": "method",
      "start_line": 72,
      "end_line": 89,
      "content_hash": "3fcc6510d7b73533d8fe073de1abb9aca9f1ce02",
      "content": "pub fn update_score(item: &mut TraversalValue, new_score: f64) -> RerankerResult<()> {\n    match item {\n        TraversalValue::Vector(v) => {\n            v.distance = Some(new_score);\n            Ok(())\n        }\n        TraversalValue::NodeWithScore { score, .. } => {\n            *score = new_score;\n            Ok(())\n        }\n        // Note: Node and Edge have ImmutablePropertiesMap which cannot be modified\n        // For now, we cannot update scores on plain Node/Edge items\n        // They would need to be wrapped in NodeWithScore variant\n        _ => Err(RerankerError::ScoreExtractionError(\n            \"Cannot update score for this traversal value type (only Vector and NodeWithScore supported)\".to_string(),\n        )),\n    }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}