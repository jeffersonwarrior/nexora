{
  "file_path": "/work/internal/tui/components/dialogs/reasoning/reasoning.go",
  "file_hash": "1a6b9a7bde95bdb8c9e9413c52d009134caf813a",
  "updated_at": "2025-12-26T17:34:24.943903",
  "symbols": {
    "struct_EffortOption_27": {
      "name": "EffortOption",
      "type": "struct",
      "start_line": 27,
      "end_line": 31,
      "content_hash": "74482444b0c3df03a69f47b4c6c1a02a034934f1",
      "content": "type EffortOption struct {\n\tTitle  string\n\tEffort string\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "interface_ReasoningDialog_32": {
      "name": "ReasoningDialog",
      "type": "interface",
      "start_line": 32,
      "end_line": 35,
      "content_hash": "1abf5e9d0d7bb4a659817e19e7a2a0fd26fdb210",
      "content": "type ReasoningDialog interface {\n\tdialogs.DialogModel\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_reasoningDialogCmp_36": {
      "name": "reasoningDialogCmp",
      "type": "struct",
      "start_line": 36,
      "end_line": 45,
      "content_hash": "208dc1ade17c0cd83dd624e4cf31ab1a55364eb9",
      "content": "type reasoningDialogCmp struct {\n\twidth   int\n\twWidth  int // Width of the terminal window\n\twHeight int // Height of the terminal window\n\n\teffortList listModel\n\tkeyMap     ReasoningDialogKeyMap\n\thelp       help.Model\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ReasoningEffortSelectedMsg_46": {
      "name": "ReasoningEffortSelectedMsg",
      "type": "struct",
      "start_line": 46,
      "end_line": 49,
      "content_hash": "0f8b89758dc90fa69a35534e13e6de978a629d52",
      "content": "type ReasoningEffortSelectedMsg struct {\n\tEffort string\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_ReasoningDialogKeyMap_50": {
      "name": "ReasoningDialogKeyMap",
      "type": "struct",
      "start_line": 50,
      "end_line": 56,
      "content_hash": "c9e6c5c7ca76f7a8058fef70853fdaafa651999f",
      "content": "type ReasoningDialogKeyMap struct {\n\tNext     key.Binding\n\tPrevious key.Binding\n\tSelect   key.Binding\n\tClose    key.Binding\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_DefaultReasoningDialogKeyMap_57": {
      "name": "DefaultReasoningDialogKeyMap",
      "type": "function",
      "start_line": 57,
      "end_line": 77,
      "content_hash": "6e6490ee59d85b784b46479a524c307c9ec155ac",
      "content": "func DefaultReasoningDialogKeyMap() ReasoningDialogKeyMap {\n\treturn ReasoningDialogKeyMap{\n\t\tNext: key.NewBinding(\n\t\t\tkey.WithKeys(\"down\", \"j\", \"ctrl+n\"),\n\t\t\tkey.WithHelp(\"\u2193/j/ctrl+n\", \"next\"),\n\t\t),\n\t\tPrevious: key.NewBinding(\n\t\t\tkey.WithKeys(\"up\", \"k\", \"ctrl+p\"),\n\t\t\tkey.WithHelp(\"\u2191/k/ctrl+p\", \"previous\"),\n\t\t),\n\t\tSelect: key.NewBinding(\n\t\t\tkey.WithKeys(\"enter\"),\n\t\t\tkey.WithHelp(\"enter\", \"select\"),\n\t\t),\n\t\tClose: key.NewBinding(\n\t\t\tkey.WithKeys(\"esc\", \"ctrl+c\"),\n\t\t\tkey.WithHelp(\"esc/ctrl+c\", \"close\"),\n\t\t),\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ShortHelp_78": {
      "name": "ShortHelp",
      "type": "method",
      "start_line": 78,
      "end_line": 81,
      "content_hash": "d1f126356d8bd6303087ef242d5a9fb2c2f40462",
      "content": "func (k ReasoningDialogKeyMap) ShortHelp() []key.Binding {\n\treturn []key.Binding{k.Select, k.Close}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_FullHelp_82": {
      "name": "FullHelp",
      "type": "method",
      "start_line": 82,
      "end_line": 88,
      "content_hash": "a239686b77a0a8267cde93cc21fbf68b9640ecf0",
      "content": "func (k ReasoningDialogKeyMap) FullHelp() [][]key.Binding {\n\treturn [][]key.Binding{\n\t\t{k.Next, k.Previous},\n\t\t{k.Select, k.Close},\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_NewReasoningDialog_89": {
      "name": "NewReasoningDialog",
      "type": "function",
      "start_line": 89,
      "end_line": 118,
      "content_hash": "e719176246de15b2a4701eeb665fb895eca4e709",
      "content": "func NewReasoningDialog() ReasoningDialog {\n\tkeyMap := DefaultReasoningDialogKeyMap()\n\tlistKeyMap := list.DefaultKeyMap()\n\tlistKeyMap.Down.SetEnabled(false)\n\tlistKeyMap.Up.SetEnabled(false)\n\tlistKeyMap.DownOneItem = keyMap.Next\n\tlistKeyMap.UpOneItem = keyMap.Previous\n\n\tt := styles.CurrentTheme()\n\tinputStyle := t.S().Base.PaddingLeft(1).PaddingBottom(1)\n\teffortList := list.NewFilterableList(\n\t\t[]list.CompletionItem[EffortOption]{},\n\t\tlist.WithFilterInputStyle(inputStyle),\n\t\tlist.WithFilterListOptions(\n\t\t\tlist.WithKeyMap(listKeyMap),\n\t\t\tlist.WithWrapNavigation(),\n\t\t\tlist.WithResizeByList(),\n\t\t),\n\t)\n\thelp := help.New()\n\thelp.Styles = t.S().Help\n\n\treturn &reasoningDialogCmp{\n\t\teffortList: effortList,\n\t\twidth:      defaultWidth,\n\t\tkeyMap:     keyMap,\n\t\thelp:       help,\n\t}\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Init_119": {
      "name": "Init",
      "type": "method",
      "start_line": 119,
      "end_line": 122,
      "content_hash": "736a8c6ad86783f302a957b6dd0626d1b39fb18f",
      "content": "func (r *reasoningDialogCmp) Init() tea.Cmd {\n\treturn r.populateEffortOptions()\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_populateEffortOptions_123": {
      "name": "populateEffortOptions",
      "type": "method",
      "start_line": 123,
      "end_line": 170,
      "content_hash": "905da69da282cfe8928c12b98e55c2e2f98bbe67",
      "content": "func (r *reasoningDialogCmp) populateEffortOptions() tea.Cmd {\n\tcfg := config.Get()\n\tif agentCfg, ok := cfg.Agents[config.AgentCoder]; ok {\n\t\tselectedModel := cfg.Models[agentCfg.Model]\n\t\tmodel := cfg.GetModelByType(agentCfg.Model)\n\n\t\t// Get current reasoning effort\n\t\tcurrentEffort := selectedModel.ReasoningEffort\n\t\tif currentEffort == \"\" && model != nil {\n\t\t\tcurrentEffort = model.DefaultReasoningEffort\n\t\t}\n\n\t\tefforts := []EffortOption{}\n\t\tcaser := cases.Title(language.Und)\n\t\tfor _, level := range model.ReasoningLevels {\n\t\t\tefforts = append(efforts, EffortOption{\n\t\t\t\tTitle:  caser.String(level),\n\t\t\t\tEffort: level,\n\t\t\t})\n\t\t}\n\n\t\teffortItems := []list.CompletionItem[EffortOption]{}\n\t\tselectedID := \"\"\n\t\tfor _, effort := range efforts {\n\t\t\topts := []list.CompletionItemOption{\n\t\t\t\tlist.WithCompletionID(effort.Effort),\n\t\t\t}\n\t\t\tif effort.Effort == currentEffort {\n\t\t\t\topts = append(opts, list.WithCompletionShortcut(\"current\"))\n\t\t\t\tselectedID = effort.Effort\n\t\t\t}\n\t\t\teffortItems = append(effortItems, list.NewCompletionItem(\n\t\t\t\teffort.Title,\n\t\t\t\teffort,\n\t\t\t\topts...,\n\t\t\t))\n\t\t}\n\n\t\tcmd := r.effortList.SetItems(effortItems)\n\t\t// Set the current effort as the selected item\n\t\tif currentEffort != \"\" && selectedID != \"\" {\n\t\t\treturn tea.Sequence(cmd, r.effortList.SetSelected(selectedID))\n\t\t}\n\t\treturn cmd\n\t}\n\treturn nil\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Update_171": {
      "name": "Update",
      "type": "method",
      "start_line": 171,
      "end_line": 203,
      "content_hash": "ad2a18c3879f6f2db9da899c1feba8bfef9fcc40",
      "content": "func (r *reasoningDialogCmp) Update(msg tea.Msg) (util.Model, tea.Cmd) {\n\tswitch msg := msg.(type) {\n\tcase tea.WindowSizeMsg:\n\t\tr.wWidth = msg.Width\n\t\tr.wHeight = msg.Height\n\t\treturn r, r.effortList.SetSize(r.listWidth(), r.listHeight())\n\tcase tea.KeyPressMsg:\n\t\tswitch {\n\t\tcase key.Matches(msg, r.keyMap.Select):\n\t\t\tselectedItem := r.effortList.SelectedItem()\n\t\t\tif selectedItem == nil {\n\t\t\t\treturn r, nil // No item selected, do nothing\n\t\t\t}\n\t\t\teffort := (*selectedItem).Value()\n\t\t\treturn r, tea.Sequence(\n\t\t\t\tutil.CmdHandler(dialogs.CloseDialogMsg{}),\n\t\t\t\tfunc() tea.Msg {\n\t\t\t\t\treturn ReasoningEffortSelectedMsg{\n\t\t\t\t\t\tEffort: effort.Effort,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t)\n\t\tcase key.Matches(msg, r.keyMap.Close):\n\t\t\treturn r, util.CmdHandler(dialogs.CloseDialogMsg{})\n\t\tdefault:\n\t\t\tu, cmd := r.effortList.Update(msg)\n\t\t\tr.effortList = u.(listModel)\n\t\t\treturn r, cmd\n\t\t}\n\t}\n\treturn r, nil\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_View_204": {
      "name": "View",
      "type": "method",
      "start_line": 204,
      "end_line": 218,
      "content_hash": "f63531459377e6db9c61c1f06f358d17e2cd2682",
      "content": "func (r *reasoningDialogCmp) View() string {\n\tt := styles.CurrentTheme()\n\tlistView := r.effortList\n\n\theader := t.S().Base.Padding(0, 1, 1, 1).Render(core.Title(\"Select Reasoning Effort\", r.width-4))\n\tcontent := lipgloss.JoinVertical(\n\t\tlipgloss.Left,\n\t\theader,\n\t\tlistView.View(),\n\t\t\"\",\n\t\tt.S().Base.Width(r.width-2).PaddingLeft(1).AlignHorizontal(lipgloss.Left).Render(r.help.View(r.keyMap)),\n\t)\n\treturn r.style().Render(content)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Cursor_219": {
      "name": "Cursor",
      "type": "method",
      "start_line": 219,
      "end_line": 229,
      "content_hash": "788d54fddf52e1fc8d641e3d8496f236e2e3e05d",
      "content": "func (r *reasoningDialogCmp) Cursor() *tea.Cursor {\n\tif cursor, ok := r.effortList.(util.Cursor); ok {\n\t\tcursor := cursor.Cursor()\n\t\tif cursor != nil {\n\t\t\tcursor = r.moveCursor(cursor)\n\t\t}\n\t\treturn cursor\n\t}\n\treturn nil\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_listWidth_230": {
      "name": "listWidth",
      "type": "method",
      "start_line": 230,
      "end_line": 233,
      "content_hash": "f5d2d05115f8e33180a4e07b2980734e40bafd61",
      "content": "func (r *reasoningDialogCmp) listWidth() int {\n\treturn r.width - 2 // 4 for padding\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_listHeight_234": {
      "name": "listHeight",
      "type": "method",
      "start_line": 234,
      "end_line": 238,
      "content_hash": "d217dac4cecac1e7dda69f87a0c735311c11b5b9",
      "content": "func (r *reasoningDialogCmp) listHeight() int {\n\tlistHeight := len(r.effortList.Items()) + 2 + 4 // height based on items + 2 for the input + 4 for the sections\n\treturn min(listHeight, r.wHeight/2)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_moveCursor_239": {
      "name": "moveCursor",
      "type": "method",
      "start_line": 239,
      "end_line": 246,
      "content_hash": "7cf4cfc37bfef4e2adc2bc7d8bc2aac4867b7798",
      "content": "func (r *reasoningDialogCmp) moveCursor(cursor *tea.Cursor) *tea.Cursor {\n\trow, col := r.Position()\n\toffset := row + 3\n\tcursor.Y += offset\n\tcursor.X = cursor.X + col + 2\n\treturn cursor\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_style_247": {
      "name": "style",
      "type": "method",
      "start_line": 247,
      "end_line": 254,
      "content_hash": "e78923078ea2d491975646ef8409d47bdc905ac1",
      "content": "func (r *reasoningDialogCmp) style() lipgloss.Style {\n\tt := styles.CurrentTheme()\n\treturn t.S().Base.\n\t\tWidth(r.width).\n\t\tBorder(lipgloss.RoundedBorder()).\n\t\tBorderForeground(t.BorderFocus)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_Position_255": {
      "name": "Position",
      "type": "method",
      "start_line": 255,
      "end_line": 261,
      "content_hash": "1c7f585b614b6eea245fd06f8f868a67ac045ff3",
      "content": "func (r *reasoningDialogCmp) Position() (int, int) {\n\trow := r.wHeight/4 - 2 // just a bit above the center\n\tcol := r.wWidth / 2\n\tcol -= r.width / 2\n\treturn row, col\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_ID_262": {
      "name": "ID",
      "type": "method",
      "start_line": 262,
      "end_line": 264,
      "content_hash": "9d8bd258b83f3a7b5ee49580cef0a57d358da050",
      "content": "func (r *reasoningDialogCmp) ID() dialogs.DialogID {\n\treturn ReasoningDialogID\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}