{
  "file_path": "/work/external-deps/claude-swarm/dist/index.js",
  "file_hash": "fb270a8ead48cffd7a7fe8eeade2bf523fac3162",
  "updated_at": "2025-12-26T17:34:23.367037",
  "symbols": {
    "function_ensureInitialized_52": {
      "name": "ensureInitialized",
      "type": "function",
      "start_line": 52,
      "end_line": 97,
      "content_hash": "ec1a06e1514efea819b36c39ac9e7a198ba97ca6",
      "content": "async function ensureInitialized(projectDir) {\n    // Validate project directory (throws on invalid path)\n    const validatedDir = validateProjectDir(projectDir);\n    if (!stateManager || stateManager.projectDir !== validatedDir) {\n        stateManager = new StateManager(validatedDir);\n        workerManager = new WorkerManager(validatedDir, stateManager);\n        // Register completion callback to log when workers complete/crash\n        workerManager.onWorkerCompletion((featureId, status, output) => {\n            const currentState = stateManager?.load();\n            if (currentState) {\n                const feature = currentState.features.find((f) => f.id === featureId);\n                const shortOutput = output ? output.slice(0, 100).replace(/\\n/g, \" \") : \"\";\n                const logMessage = status === \"completed\"\n                    ? `[${new Date().toISOString()}] \ud83d\udd14 Worker completed: ${featureId} - use mark_complete to update status`\n                    : `[${new Date().toISOString()}] \u26a0\ufe0f Worker crashed: ${featureId}${shortOutput ? ` - ${shortOutput}...` : \"\"} - use mark_complete to update status`;\n                currentState.progressLog.push(logMessage);\n                currentState.lastUpdated = new Date().toISOString();\n                stateManager?.save(currentState);\n                // Also log to stderr for immediate visibility\n                console.error(logMessage);\n            }\n        });\n        // Start the completion monitor\n        workerManager.startCompletionMonitor();\n        // Start dashboard server if enabled and not already running\n        if (ENABLE_DASHBOARD && !dashboardServer) {\n            try {\n                // Pass a getter function so dashboard always has current stateManager\n                dashboardServer = await startDashboardServer(() => stateManager, {\n                    port: DASHBOARD_PORT,\n                    host: \"127.0.0.1\",\n                });\n                console.error(`\ud83d\udcca Dashboard available at http://127.0.0.1:${DASHBOARD_PORT}`);\n            }\n            catch (err) {\n                // Log error but don't fail - dashboard is optional\n                console.error(`\u26a0\ufe0f Failed to start dashboard server: ${err.message}`);\n            }\n        }\n    }\n    // TypeScript safety: workerManager is always set when stateManager is set\n    if (!workerManager) {\n        throw new Error(\"WorkerManager not initialized\");\n    }\n    return { state: stateManager, workers: workerManager };\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_calculatePriority_2170": {
      "name": "calculatePriority",
      "type": "function",
      "start_line": 2170,
      "end_line": 2196,
      "content_hash": "89f01b8c3ac66f94a80ae693543534b2fd2bd554",
      "content": "    function calculatePriority(feature, allFeatures) {\n        let score = 0;\n        // +50 points per feature this blocks\n        const blockedCount = allFeatures.filter(f => f.dependsOn?.includes(feature.id) && f.status === \"pending\").length;\n        score += blockedCount * 50;\n        // +40 points if no dependencies (can start immediately)\n        if (!feature.dependsOn || feature.dependsOn.length === 0) {\n            score += 40;\n        }\n        // +30 points for low complexity (if available)\n        if (feature.complexity && feature.complexity.score < 40) {\n            score += 30;\n        }\n        // -20 points per previous attempt (struggling)\n        score -= (feature.attempts || 0) * 20;\n        // Strategy-specific adjustments\n        if (strategy === \"breadth-first\") {\n            // Prefer features with no dependencies\n            if (!feature.dependsOn || feature.dependsOn.length === 0)\n                score += 20;\n        }\n        else if (strategy === \"depth-first\") {\n            // Prefer features that unblock others\n            score += blockedCount * 30;\n        }\n        return Math.max(0, score);\n    }",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_getReadyFeatures_2198": {
      "name": "getReadyFeatures",
      "type": "function",
      "start_line": 2198,
      "end_line": 2213,
      "content_hash": "2a6497618f016a7d85b90d9877dc7895a10280b7",
      "content": "    function getReadyFeatures() {\n        return current.features.filter(f => {\n            if (f.status !== \"pending\")\n                return false;\n            // Check dependencies are met\n            if (f.dependsOn && f.dependsOn.length > 0) {\n                const unmetDeps = f.dependsOn.filter(depId => {\n                    const dep = current.features.find(df => df.id === depId);\n                    return !dep || dep.status !== \"completed\";\n                });\n                if (unmetDeps.length > 0)\n                    return false;\n            }\n            return true;\n        });\n    }",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_main_2260": {
      "name": "main",
      "type": "function",
      "start_line": 2260,
      "end_line": 2264,
      "content_hash": "c161e59e33c63283cb1cef9c3eae8dc5b0c4ea9e",
      "content": "async function main() {\n    const transport = new StdioServerTransport();\n    await server.connect(transport);\n    console.error(\"Claude Orchestrator MCP Server running\");\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}