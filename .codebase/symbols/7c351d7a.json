{
  "file_path": "/work/internal/agent/tools/edit_ai_test.go",
  "file_hash": "acd1f374e7a52b630786da91bc7a9f747218c8e6",
  "updated_at": "2025-12-26T17:34:24.019881",
  "symbols": {
    "function_TestAIModeExpansion_12": {
      "name": "TestAIModeExpansion",
      "type": "function",
      "start_line": 12,
      "end_line": 23,
      "content_hash": "2b27cbd16b0482c2622925d2445a51ded1871313",
      "content": "func TestAIModeExpansion(t *testing.T) {\n\t// Create a temporary test file\n\ttmpDir := t.TempDir()\n\ttestFile := filepath.Join(tmpDir, \"test.go\")\n\n\t// Create a file with specific content\n\tcontent := `package main\n\nimport (\n\t\"fmt\"\n)\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_main_24": {
      "name": "main",
      "type": "function",
      "start_line": 24,
      "end_line": 54,
      "content_hash": "a7a34a37538c2afec3e972ac59fc90b4418236b4",
      "content": "func main() {\n\tfmt.Println(\"Hello, World!\")\n}`\n\n\terr := os.WriteFile(testFile, []byte(content), 0o644)\n\trequire.NoError(t, err)\n\n\t// Test 1: Minimal context should be expanded\n\tpartialString := \"fmt.Println(\\\"Hello, World!\\\")\"\n\texpanded, err := autoExpandContext(testFile, partialString)\n\trequire.NoError(t, err)\n\n\t// Should include surrounding context\n\trequire.Contains(t, expanded, \"func main() {\")\n\trequire.Contains(t, expanded, \"fmt.Println(\\\"Hello, World!\\\")\")\n\n\t// Should have more lines than the original\n\toriginalLines := strings.Count(partialString, \"\\n\") + 1\n\texpandedLines := strings.Count(expanded, \"\\n\") + 1\n\trequire.Greater(t, expandedLines, originalLines)\n\n\t// Test 2: Full context should not be expanded\n\tfullString := `func main() {\n\tfmt.Println(\"Hello, World!\")\n}`\n\n\texpandedFull, err := autoExpandContext(testFile, fullString)\n\trequire.NoError(t, err)\n\trequire.Equal(t, fullString, expandedFull)\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "function_TestTabNormalizationInAIMode_55": {
      "name": "TestTabNormalizationInAIMode",
      "type": "function",
      "start_line": 55,
      "end_line": 90,
      "content_hash": "b7f12bdabeecece43f633e8c6eac5f8f191db375",
      "content": "func TestTabNormalizationInAIMode(t *testing.T) {\n\t// Test that display tabs from VIEW output are properly normalized\n\ttests := []struct {\n\t\tname     string\n\t\tinput    string\n\t\texpected string\n\t}{\n\t\t{\n\t\t\tname:     \"display tab normalized\",\n\t\t\tinput:    \"func\u2192\\tmain() {\",\n\t\t\texpected: \"func\\tmain() {\",\n\t\t},\n\t\t{\n\t\t\tname:     \"multiple display tabs normalized\",\n\t\t\tinput:    \"func\u2192\\t\u2192\\tmain() {\",\n\t\t\texpected: \"func\\t\\tmain() {\",\n\t\t},\n\t\t{\n\t\t\tname:     \"partial display tab normalized\",\n\t\t\tinput:    \"func\u2192main() {\",\n\t\t\texpected: \"func\\tmain() {\",\n\t\t},\n\t\t{\n\t\t\tname:     \"real tabs unchanged\",\n\t\t\tinput:    \"func\\tmain() {\",\n\t\t\texpected: \"func\\tmain() {\",\n\t\t},\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\tresult := normalizeTabIndicators(tt.input)\n\t\t\trequire.Equal(t, tt.expected, result)\n\t\t})\n\t}\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}