{
  "file_path": "/work/external-deps/helix-db/helix-db/src/helixc/generator/source_steps.rs",
  "file_hash": "69b9a8cd9a00dcb8c29443084c5c048b2fef14af",
  "updated_at": "2025-12-26T17:34:24.350853",
  "symbols": {
    "enum_SourceStep_12": {
      "name": "SourceStep",
      "type": "enum",
      "start_line": 12,
      "end_line": 44,
      "content_hash": "52295e053f1821cf1aa3acdc437f76f705318975",
      "content": "pub enum SourceStep {\n    /// Traversal starts from an identifier\n    Identifier(GenRef<String>),\n    /// Add a node\n    AddN(AddN),\n    /// Add an edge\n    AddE(AddE),\n    /// Insert a vector\n    AddV(AddV),\n    /// Lookup a node by ID\n    NFromID(NFromID),\n    /// Lookup a node by index\n    NFromIndex(NFromIndex),\n    /// Lookup a node by type\n    NFromType(NFromType),\n    /// Lookup an edge by ID\n    EFromID(EFromID),\n    /// Lookup an edge by type\n    EFromType(EFromType),\n    /// Lookup a vector by ID\n    VFromID(VFromID),\n    /// Lookup a vector by type\n    VFromType(VFromType),\n    /// Search for vectors\n    SearchVector(SearchVector),\n    /// Search for vectors using BM25\n    SearchBM25(SearchBM25),\n    /// Traversal starts from an anonymous node\n    Anonymous,\n    Empty,\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_AddN_45": {
      "name": "AddN",
      "type": "struct",
      "start_line": 45,
      "end_line": 52,
      "content_hash": "ce442cfa3e44b84ace05e9ff945fb8cb758a57ec",
      "content": "pub struct AddN {\n    /// Label of node\n    pub label: GenRef<String>,\n    /// Properties of node\n    pub properties: Option<Vec<(String, GeneratedValue)>>,\n    /// Names of properties to index on\n    pub secondary_indices: Option<Vec<String>>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_53": {
      "name": "Display",
      "type": "impl",
      "start_line": 53,
      "end_line": 53,
      "content_hash": "0ed6ccc4703325c4907b667a6cd2f3ffb13851e4",
      "content": "impl Display for AddN {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_54": {
      "name": "fmt",
      "type": "method",
      "start_line": 54,
      "end_line": 65,
      "content_hash": "33a38d2c2584c83ede2e4908a269fa63c6da17c5",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        let properties = write_properties(&self.properties);\n        let secondary_indices = write_secondary_indices(&self.secondary_indices);\n        write!(\n            f,\n            \"add_n({}, {}, {})\",\n            self.label, properties, secondary_indices\n        )\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_AddE_66": {
      "name": "AddE",
      "type": "struct",
      "start_line": 66,
      "end_line": 79,
      "content_hash": "83d32b9d5413b2c5437684686eebeaca097e5616",
      "content": "pub struct AddE {\n    /// Label of edge\n    pub label: GenRef<String>,\n    /// Properties of edge\n    pub properties: Option<Vec<(String, GeneratedValue)>>,\n    /// From node ID\n    pub from: GeneratedValue,\n    /// To node ID\n    pub to: GeneratedValue,\n    /// Whether from is a plural variable (needs iteration)\n    pub from_is_plural: bool,\n    /// Whether to is a plural variable (needs iteration)\n    pub to_is_plural: bool,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_80": {
      "name": "Display",
      "type": "impl",
      "start_line": 80,
      "end_line": 80,
      "content_hash": "f70be521e841fd90ac5e2d68eb01d7528ec7f883",
      "content": "impl Display for AddE {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_81": {
      "name": "fmt",
      "type": "method",
      "start_line": 81,
      "end_line": 131,
      "content_hash": "f62f72a06e112e9f009b93e93ee2733a545dbdb7",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        // If either from or to is plural, we need to generate iteration code\n        match (self.from_is_plural, self.to_is_plural) {\n            (false, false) => {\n                // Both singular - from and to already have .id() appended\n                write!(\n                    f,\n                    \"add_edge({}, {}, {}, {}, false)\",\n                    self.label,\n                    write_properties(&self.properties),\n                    self.from,\n                    self.to\n                )\n            }\n            (true, false) => {\n                // From is plural - iterate over from, to already has .id()\n                write!(\n                    f,\n                    \"{}.iter().map(|from_val| {{\\n        G::new_mut(&db, &arena, &mut txn)\\n        .add_edge({}, {}, from_val.id(), {}, false)\\n        .collect_to_obj()\\n    }}).collect::<Result<Vec<_>,_>>()?\",\n                    self.from,\n                    self.label,\n                    write_properties(&self.properties),\n                    self.to\n                )\n            }\n            (false, true) => {\n                // To is plural - iterate over to, from already has .id()\n                write!(\n                    f,\n                    \"{}.iter().map(|to_val| {{\\n        G::new_mut(&db, &arena, &mut txn)\\n        .add_edge({}, {}, {}, to_val.id(), false)\\n        .collect_to_obj()\\n    }}).collect::<Result<Vec<_>,_>>()?\",\n                    self.to,\n                    self.label,\n                    write_properties(&self.properties),\n                    self.from\n                )\n            }\n            (true, true) => {\n                // Both plural - nested iteration\n                write!(\n                    f,\n                    \"{}.iter().flat_map(|from_val| {{\\n        {}.iter().map(move |to_val| {{\\n            G::new_mut(&db, &arena, &mut txn)\\n            .add_edge({}, {}, from_val.id(), to_val.id(), false)\\n            .collect_to_obj()\\n        }})\\n    }}).collect::<Result<Vec<_>,_>>()?\",\n                    self.from,\n                    self.to,\n                    self.label,\n                    write_properties(&self.properties)\n                )\n            }\n        }\n    }\n}\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_AddV_132": {
      "name": "AddV",
      "type": "struct",
      "start_line": 132,
      "end_line": 139,
      "content_hash": "94fc2a34bd3e68c91eccbd75431c18fcd8a08079",
      "content": "pub struct AddV {\n    /// Vector to add\n    pub vec: VecData,\n    /// Label of vector\n    pub label: GenRef<String>,\n    /// Properties of vector\n    pub properties: Option<Vec<(String, GeneratedValue)>>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_140": {
      "name": "Display",
      "type": "impl",
      "start_line": 140,
      "end_line": 140,
      "content_hash": "bf941383413e5d391cf1c11d5ee948e5e1434d35",
      "content": "impl Display for AddV {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_141": {
      "name": "fmt",
      "type": "method",
      "start_line": 141,
      "end_line": 152,
      "content_hash": "0b9be260535272944308a2a0268fd745f67572d0",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(\n            f,\n            \"insert_v::<fn(&HVector, &RoTxn) -> bool>({}, {}, {})\",\n            self.vec,\n            self.label,\n            write_properties(&self.properties)\n        )\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_NFromID_153": {
      "name": "NFromID",
      "type": "struct",
      "start_line": 153,
      "end_line": 160,
      "content_hash": "cb19ffefd1c039f51569f2a25606ef40ac6e3cb3",
      "content": "pub struct NFromID {\n    /// ID of node\n    pub id: GenRef<String>,\n    /// Label of node\n    ///\n    /// - unused currently but kept in the case ID lookups need to be from specific table based on type\n    pub label: GenRef<String>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_161": {
      "name": "Display",
      "type": "impl",
      "start_line": 161,
      "end_line": 161,
      "content_hash": "14e4823833f6d726a548649830bd0aeecbfdd37e",
      "content": "impl Display for NFromID {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_162": {
      "name": "fmt",
      "type": "method",
      "start_line": 162,
      "end_line": 167,
      "content_hash": "5dee0a1ed33c5f8f1e2b04d8e74c79bfcfe353bb",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"n_from_id({})\", self.id)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_NFromType_168": {
      "name": "NFromType",
      "type": "struct",
      "start_line": 168,
      "end_line": 171,
      "content_hash": "c18738ed316be1414c64e1d519803dc480e6c2f7",
      "content": "pub struct NFromType {\n    /// Label of nodes to lookup\n    pub label: GenRef<String>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_172": {
      "name": "Display",
      "type": "impl",
      "start_line": 172,
      "end_line": 172,
      "content_hash": "9944a4b91ce4706ea83b2988eb02a1e250aa8a32",
      "content": "impl Display for NFromType {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_173": {
      "name": "fmt",
      "type": "method",
      "start_line": 173,
      "end_line": 178,
      "content_hash": "c9ce35af225969ce1e41484509d7304d9e3ab102",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"n_from_type({})\", self.label)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_EFromID_179": {
      "name": "EFromID",
      "type": "struct",
      "start_line": 179,
      "end_line": 186,
      "content_hash": "6b68b5b314d37351a1f299ce2055349f33c464fc",
      "content": "pub struct EFromID {\n    /// ID of edge\n    pub id: GenRef<String>,\n    /// Label of edge\n    ///\n    /// - unused currently but kept in the case ID lookups need to be from specific table based on type\n    pub label: GenRef<String>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_187": {
      "name": "Display",
      "type": "impl",
      "start_line": 187,
      "end_line": 187,
      "content_hash": "2e493274bf2bc35945d0e14b4b3a3bafa498a3eb",
      "content": "impl Display for EFromID {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_188": {
      "name": "fmt",
      "type": "method",
      "start_line": 188,
      "end_line": 193,
      "content_hash": "e199f50439b21260e0ed6df843f7268fd54dd161",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"e_from_id({})\", self.id)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_EFromType_194": {
      "name": "EFromType",
      "type": "struct",
      "start_line": 194,
      "end_line": 197,
      "content_hash": "eeaa288ad3615686c1f6a801da4b2b732b11f908",
      "content": "pub struct EFromType {\n    /// Label of edges to lookup\n    pub label: GenRef<String>,\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_198": {
      "name": "Display",
      "type": "impl",
      "start_line": 198,
      "end_line": 198,
      "content_hash": "a0fcc4c6106a1989661cd6eb753995c9acfe5475",
      "content": "impl Display for EFromType {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_199": {
      "name": "fmt",
      "type": "method",
      "start_line": 199,
      "end_line": 204,
      "content_hash": "785cb823308e60a3db331f37adc9a71d28a0f7fd",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"e_from_type({})\", self.label)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_VFromID_205": {
      "name": "VFromID",
      "type": "struct",
      "start_line": 205,
      "end_line": 214,
      "content_hash": "3b9fee4454112be8d291599da2fb879b08a2fd31",
      "content": "pub struct VFromID {\n    /// ID of vector\n    pub id: GenRef<String>,\n    /// Label of vector\n    pub label: GenRef<String>,\n\n    /// Whether to get the vector data\n    pub get_vector_data: bool,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_215": {
      "name": "Display",
      "type": "impl",
      "start_line": 215,
      "end_line": 215,
      "content_hash": "b687eef99f601f787a45a6a42014811ee0545d19",
      "content": "impl Display for VFromID {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_216": {
      "name": "fmt",
      "type": "method",
      "start_line": 216,
      "end_line": 221,
      "content_hash": "b53857448b3a2e84a16cfe8ec08827245cff8c76",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"v_from_id({}, {})\", self.id, self.get_vector_data)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_VFromType_222": {
      "name": "VFromType",
      "type": "struct",
      "start_line": 222,
      "end_line": 228,
      "content_hash": "6a015ecca9276a03ba47f9919ffe2e62e284cec5",
      "content": "pub struct VFromType {\n    /// Label of vectors to lookup\n    pub label: GenRef<String>,\n    /// Whether to get the vector data\n    pub get_vector_data: bool,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_229": {
      "name": "Display",
      "type": "impl",
      "start_line": 229,
      "end_line": 229,
      "content_hash": "acb7f8026daf8fb0b64c88dac76f68ebef652c0d",
      "content": "impl Display for VFromType {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_230": {
      "name": "fmt",
      "type": "method",
      "start_line": 230,
      "end_line": 235,
      "content_hash": "c5eaafbc7b3b1fafce9b2a69d21355a2de697888",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(f, \"v_from_type({}, {})\", self.label, self.get_vector_data)\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_SearchBM25_236": {
      "name": "SearchBM25",
      "type": "struct",
      "start_line": 236,
      "end_line": 244,
      "content_hash": "9cfd6c2bf2c25672c06f0c1d546b58f3f3618d7c",
      "content": "pub struct SearchBM25 {\n    /// Type of node to search for\n    pub type_arg: GenRef<String>,\n    /// Query to search for\n    pub query: GeneratedValue,\n    /// Number of results to return\n    pub k: GeneratedValue,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_245": {
      "name": "Display",
      "type": "impl",
      "start_line": 245,
      "end_line": 245,
      "content_hash": "be7246f6197e51c140c68bf6cc93722d2fe75e3f",
      "content": "impl Display for SearchBM25 {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_246": {
      "name": "fmt",
      "type": "method",
      "start_line": 246,
      "end_line": 254,
      "content_hash": "cbd2f06ee48060e299241370f55843d8a5c6d67d",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(\n            f,\n            \"search_bm25({}, {}, {})?\",\n            self.type_arg, self.query, self.k\n        )\n    }\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_255": {
      "name": "Display",
      "type": "impl",
      "start_line": 255,
      "end_line": 255,
      "content_hash": "834a217e23ba976cdf5f4a4f01f335148fe83b2b",
      "content": "impl Display for SourceStep {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_256": {
      "name": "fmt",
      "type": "method",
      "start_line": 256,
      "end_line": 277,
      "content_hash": "c21f8c6ed74ccd963d5f237271c0818dd4310457",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        match self {\n            SourceStep::Identifier(_) => write!(f, \"\"),\n            SourceStep::AddN(add_n) => write!(f, \"{add_n}\"),\n            SourceStep::AddE(add_e) => write!(f, \"{add_e}\"),\n            SourceStep::AddV(add_v) => write!(f, \"{add_v}\"),\n            SourceStep::NFromID(n_from_id) => write!(f, \"{n_from_id}\"),\n            SourceStep::NFromIndex(n_from_index) => write!(f, \"{n_from_index}\"),\n            SourceStep::NFromType(n_from_type) => write!(f, \"{n_from_type}\"),\n            SourceStep::EFromID(e_from_id) => write!(f, \"{e_from_id}\"),\n            SourceStep::EFromType(e_from_type) => write!(f, \"{e_from_type}\"),\n            SourceStep::SearchVector(search_vector) => write!(f, \"{search_vector}\"),\n            SourceStep::SearchBM25(search_bm25) => write!(f, \"{search_bm25}\"),\n            SourceStep::Anonymous => write!(f, \"\"),\n            SourceStep::Empty => panic!(\"Should not be empty\"),\n            SourceStep::VFromID(v_from_id) => write!(f, \"{v_from_id}\"),\n            SourceStep::VFromType(v_from_type) => write!(f, \"{v_from_type}\"),\n        }\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_SearchVector_278": {
      "name": "SearchVector",
      "type": "struct",
      "start_line": 278,
      "end_line": 288,
      "content_hash": "a45e8222970bdfe8674f0fc99667cb1429c3289d",
      "content": "pub struct SearchVector {\n    /// Label of vector to search for\n    pub label: GenRef<String>,\n    /// Vector to search for\n    pub vec: VecData,\n    /// Number of results to return\n    pub k: GeneratedValue,\n    /// Pre-filter to apply to the search - currently not implemented in grammar\n    pub pre_filter: Option<Vec<BoExp>>,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_289": {
      "name": "Display",
      "type": "impl",
      "start_line": 289,
      "end_line": 289,
      "content_hash": "d5e9df8d895764e7edef92b0a66ba0d0dc8ce53f",
      "content": "impl Display for SearchVector {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_290": {
      "name": "fmt",
      "type": "method",
      "start_line": 290,
      "end_line": 313,
      "content_hash": "39ebc8ef523ada67e7dac02243265f232765c880",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        match &self.pre_filter {\n            Some(pre_filter) => write!(\n                f,\n                \"search_v::<fn(&HVector, &RoTxn) -> bool, _>({}, {}, {}, Some(&[{}]))\",\n                self.vec,\n                self.k,\n                self.label,\n                pre_filter\n                    .iter()\n                    .map(|f| format!(\"|v: &HVector, txn: &RoTxn| {f}\"))\n                    .collect::<Vec<_>>()\n                    .join(\", \")\n            ),\n            None => write!(\n                f,\n                \"search_v::<fn(&HVector, &RoTxn) -> bool, _>({}, {}, {}, None)\",\n                self.vec, self.k, self.label,\n            ),\n        }\n    }\n}\n\n#[derive(Clone, Debug)]",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "struct_NFromIndex_314": {
      "name": "NFromIndex",
      "type": "struct",
      "start_line": 314,
      "end_line": 322,
      "content_hash": "940a24fd94f6efa2012281ec6e167662e0f3c3fd",
      "content": "pub struct NFromIndex {\n    /// Index to search against\n    pub index: GenRef<String>,\n    /// Key to search for in the index\n    pub key: GeneratedValue,\n    /// Label of nodes to lookup - used for post filtering\n    pub label: GenRef<String>,\n}\n",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "impl_Display_323": {
      "name": "Display",
      "type": "impl",
      "start_line": 323,
      "end_line": 323,
      "content_hash": "165719919e1b3e01f946bc040de3758677c322a1",
      "content": "impl Display for NFromIndex {",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    },
    "method_fmt_324": {
      "name": "fmt",
      "type": "method",
      "start_line": 324,
      "end_line": 331,
      "content_hash": "9d21709eb907c22f8ad367ba366331c1d282eeb3",
      "content": "    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        write!(\n            f,\n            \"n_from_index({}, {}, {})\",\n            self.label, self.index, self.key\n        )\n    }\n}",
      "pseudo": "",
      "tags": [],
      "qdrant_ids": []
    }
  }
}